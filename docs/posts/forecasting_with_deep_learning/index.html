<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stephen J Parton">

<title>Notes to Myself - Flight Forecasting with Deep Learning - Incomplete</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.0/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<meta property="og:title" content="Notes to Myself - Flight Forecasting with Deep Learning - Incomplete">
<meta property="og:description" content="This analysis is one section of a multi-part set of posts looking at forecasting on domestic Australian flight volumes by route in the period prior to when covid largely shut the industry down.">
<meta property="og:site-name" content="Notes to Myself">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Notes to Myself</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="dropdown-header">
 <span class="menu-text">by Stephen Parton</span></li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/spinbris"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/spinb"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/stephen-parton-2737594/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Flight Forecasting with Deep Learning - Incomplete</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">analytics</div>
                <div class="quarto-category">flights</div>
                <div class="quarto-category">maps</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Stephen J Parton </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">27-12-2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries"><span class="toc-section-number">2</span>  Load Libraries</a></li>
  <li><a href="#load-data" id="toc-load-data" class="nav-link" data-scroll-target="#load-data"><span class="toc-section-number">3</span>  Load Data</a></li>
  <li><a href="#preprocessing" id="toc-preprocessing" class="nav-link" data-scroll-target="#preprocessing"><span class="toc-section-number">4</span>  Preprocessing</a></li>
  <li><a href="#split-data" id="toc-split-data" class="nav-link" data-scroll-target="#split-data"><span class="toc-section-number">5</span>  Split Data</a>
  <ul class="collapse">
  <li><a href="#training-set-top-10-routes" id="toc-training-set-top-10-routes" class="nav-link" data-scroll-target="#training-set-top-10-routes"><span class="toc-section-number">5.1</span>  Training Set (top 10 routes)</a></li>
  <li><a href="#testing-set-top-10-routes" id="toc-testing-set-top-10-routes" class="nav-link" data-scroll-target="#testing-set-top-10-routes"><span class="toc-section-number">5.2</span>  Testing Set (top 10 routes)</a></li>
  </ul></li>
  <li><a href="#gluonts" id="toc-gluonts" class="nav-link" data-scroll-target="#gluonts"><span class="toc-section-number">6</span>  GLUONTS</a>
  <ul class="collapse">
  <li><a href="#deepar" id="toc-deepar" class="nav-link" data-scroll-target="#deepar"><span class="toc-section-number">6.1</span>  DeepAR</a></li>
  <li><a href="#n-beats-neural-basis-expansion-analysis-for-time-series" id="toc-n-beats-neural-basis-expansion-analysis-for-time-series" class="nav-link" data-scroll-target="#n-beats-neural-basis-expansion-analysis-for-time-series"><span class="toc-section-number">6.2</span>  N-Beats (Neural Basis Expansion Analysis for Time Series)</a></li>
  </ul></li>
  <li><a href="#modeltime-comparison" id="toc-modeltime-comparison" class="nav-link" data-scroll-target="#modeltime-comparison"><span class="toc-section-number">7</span>  Modeltime Comparison</a></li>
  <li><a href="#refit-models" id="toc-refit-models" class="nav-link" data-scroll-target="#refit-models"><span class="toc-section-number">8</span>  Refit Models</a></li>
  <li><a href="#make-predictions" id="toc-make-predictions" class="nav-link" data-scroll-target="#make-predictions"><span class="toc-section-number">9</span>  Make Predictions</a></li>
  <li><a href="#ensemble-model" id="toc-ensemble-model" class="nav-link" data-scroll-target="#ensemble-model"><span class="toc-section-number">10</span>  Ensemble Model</a></li>
  <li><a href="#refit-ensemble-to-full-traintest-data-set-and-graph" id="toc-refit-ensemble-to-full-traintest-data-set-and-graph" class="nav-link" data-scroll-target="#refit-ensemble-to-full-traintest-data-set-and-graph"><span class="toc-section-number">11</span>  Refit Ensemble to Full Train/Test Data Set and Graph</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>This analysis is one section of a multi-part set of posts looking at forecasting on domestic Australian flight volumes by route in the period prior to when covid largely shut the industry down. Its intention is just to provide me with examples over the main models to save time on future projects.It is split into:</p>
<p>1. Some pre analysis (basic EDA analysis is not covered as already included in previous posts)</p>
<p>2. ‘Sequence’ style models - ARIMA etc</p>
<p>3. ML style models - XGBoost etc including nesting and ensembling</p>
<p>4. Deep learning models (GLuonTS etc)</p>
<p>5. Summary of conclusions</p>
<p>This post is in relation to the part 4. Approaches used are:</p>
<ul>
<li><p>GluonTS</p>
<ul>
<li><p>DeepAR</p></li>
<li><p>N-BEATS</p></li>
</ul></li>
</ul>
</section>
<section id="load-libraries" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="load-libraries"><span class="header-section-number">2</span> Load Libraries</h2>
<div class="cell" data-hash="index_cache/html/libraries_6ba99f42e1702dc90e61c4a5e8261f2d">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Time Series ML</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime.gluonts)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime.ensemble)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Core</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Timing &amp; Parallel Processing</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doFuture)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="load-data" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="load-data"><span class="header-section-number">3</span> Load Data</h2>
<p>Loading pre-prepared data as well as some parameters. Also setting up parallel processing.</p>
<div class="cell" data-hash="index_cache/html/data_5c25abadb6809d1a4d5964b291673681">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>top_routes_prep_df <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"./posts/aust_domestic_flights/artifacts/top_routes_prep_df.rds"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>start          <span class="ot">&lt;-</span> <span class="st">"2001-01-01"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>end            <span class="ot">&lt;-</span> <span class="st">"2019-07-01"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>horizon_nested <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>end_precovid   <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"01-02-2020"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>top_x          <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#d2 &lt;- dmy("01-07-2022")</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>max_act   <span class="ot">&lt;-</span> <span class="fu">max</span>(top_routes_prep_df<span class="sc">$</span>date)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>max_test  <span class="ot">&lt;-</span> <span class="fu">ymd</span>(end)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>max_pred  <span class="ot">&lt;-</span> max_test <span class="sc">%m+%</span> <span class="fu">months</span>(horizon_nested)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>FORECAST_HORIZON <span class="ot">&lt;-</span>  <span class="dv">1</span><span class="sc">*</span><span class="dv">12</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>lag_period       <span class="ot">&lt;-</span>  <span class="dv">1</span><span class="sc">*</span><span class="dv">12</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>rolling_periods  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">12</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># * Parallel Processing ----</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="fu">registerDoFuture</span>()</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>n_cores <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">detectCores</span>()</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">strategy =</span> cluster,</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">workers  =</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(n_cores)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="preprocessing" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="preprocessing"><span class="header-section-number">4</span> Preprocessing</h2>
<p>Some additional wrangling.</p>
<div class="cell" data-hash="index_cache/html/wrangle_9905250c14b4db6baaed7f1717bffef6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># topx list</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>topx <span class="ot">&lt;-</span> top_routes_prep_df <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">passenger_trips =</span> <span class="fu">sum</span>(passenger_trips)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(passenger_trips, <span class="at">n=</span>top_x) <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(passenger_trips)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(route) <span class="sc">%&gt;%</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.character</span>()</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>full_data_tbl <span class="ot">&lt;-</span> top_routes_prep_df <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#initial wrangle</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(route,date,passenger_trips) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">route =</span> <span class="fu">as.character</span>(route)) <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_by_time</span>(date, <span class="at">.by =</span> <span class="st">"month"</span>, <span class="at">passenger_trips =</span> <span class="fu">sum</span>(passenger_trips)) <span class="sc">%&gt;%</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pad_by_time</span>(</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by       =</span> <span class="st">"month"</span>,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">.pad_value  =</span> <span class="dv">0</span>,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">.start_date =</span> <span class="fu">min</span>(top_routes_prep_df<span class="sc">$</span>date)) <span class="sc">%&gt;%</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_by_time</span>(<span class="at">.date_var    =</span> date,<span class="at">.start_date =</span> start, <span class="at">.end_date =</span> end ) <span class="sc">%&gt;%</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>full_data_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_timeseries_signature</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(day<span class="sc">:</span>mday7)) <span class="sc">%&gt;%</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">".iso"</span>),<span class="sc">-</span><span class="fu">contains</span>(<span class="st">".xts"</span>))</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>full_data_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="co">#log transform target</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">passenger_trips      =</span> <span class="fu">log1p</span>(passenger_trips),</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">index.num            =</span> <span class="fu">log1p</span>(index.num),</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">diff                 =</span> <span class="fu">log1p</span>(diff),</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">year                 =</span> <span class="fu">log1p</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">#groupwise manipulation</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">future_frame</span>(</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var   =</span> date,</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">.length_out =</span> FORECAST_HORIZON,</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">.bind_data  =</span> <span class="cn">TRUE</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fourier</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_fourier</span>(</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">.periods  =</span> <span class="fu">c</span>(<span class="fl">0.5</span> <span class="sc">*</span> FORECAST_HORIZON, FORECAST_HORIZON),</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">.K        =</span> <span class="dv">1</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Lags</span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_lags</span>(</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value =</span> passenger_trips,</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">.lags =</span>  FORECAST_HORIZON</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rolling Features</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_slidify</span>(</span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value   =</span> passenger_trips_lag12,</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">.f       =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x,<span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">.period  =</span> <span class="fu">c</span>(<span class="dv">6</span>, FORECAST_HORIZON, <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON),</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">.partial =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">.align   =</span> <span class="st">'center'</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">"rowid"</span>)</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>data_prepared_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(passenger_trips)) <span class="sc">%&gt;%</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>future_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(passenger_trips))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="split-data" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="split-data"><span class="header-section-number">5</span> Split Data</h2>
<p>Split into training and testing sets.</p>
<section id="training-set-top-10-routes" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="training-set-top-10-routes"><span class="header-section-number">5.1</span> Training Set (top 10 routes)</h3>
<div class="cell" data-hash="index_cache/html/split_e7dec7165ec07bf10f80bfb4818d78f6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> data_prepared_tbl <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">time_series_split</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_var =</span> date,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">assess =</span> FORECAST_HORIZON,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative =</span> <span class="cn">TRUE</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">training</span>(splits) <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    passenger_trips,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">.facet_ncol =</span> <span class="dv">2</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">.smooth =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Training Splits"</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-afa072c74db4a6b6ccfa" style="width:100%;height:975px;"></div>
<script type="application/json" data-for="htmlwidget-afa072c74db4a6b6ccfa">{"x":{"data":[{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[11.6492641634218,11.6120374994667,11.7388810587842,11.6645644216316,11.6624569211634,11.5423289153395,11.6689287134463,11.6755373901438,11.7283674350974,11.753508068222,11.6658010464908,11.6614144332277,11.6428215077104,11.6194992443259,11.7654724666537,11.6762765481321,11.7355408768434,11.6406940343805,11.7354047957388,11.7830976298342,11.7821354745323,11.8557986006295,11.7649984943295,11.8058189344725,11.7599574031329,11.7526114329038,11.8510320795536,11.7896249489742,11.7917383219529,11.6913644945,11.8503258421643,11.8344508374011,11.9069318384894,11.8909508573196,11.8719416660263,11.8692983632978,11.8028525155718,11.8068405716416,11.9531462043687,11.955943229131,11.9216851400278,11.876234355545,12.0179824822734,11.9730807581611,11.9608751846845,12.0107387948552,11.9089191941761,11.8917933144675,11.8562456294916,11.8020290266273,11.9759988856987,11.9569315680961,11.9867281187752,11.9130898825413,11.983247793426,11.9778662998735,11.9599738777285,12.0200984258781,11.9607090473141,11.9426993721844,11.8982014711105,11.8613968515583,12.0117959095169,11.9701730811148,11.9483829382759,11.8810001838598,12.0131672772766,11.9875434317667,11.976766393726,12.0271732265375,11.9964312780813,11.9353984490194,11.9960550704349,12.0191645867981,12.1285218305116,12.0917891044935,12.0315704377883,11.9979962621963,12.106252310248,12.1350115653447,12.0673047089675,12.1727226658486,12.1468798107174,12.1579480098475,12.1013952298398,12.0210554587882,12.1972589184981,12.1718382798574,12.1027267657966,12.0093458294085,12.0899600888466,12.0668795413359,12.0108482033807,12.0662644520855,12.0338063645775,11.9981440081474,12.0047823136886,11.9894391080185,12.1674045796393,12.1795541169694,12.1450213702101,12.0792785065583,12.2000495430109,12.1934938633233,12.1514474908662,12.2281814351182,12.1602433436785,12.2112790685575,12.1707252214984,12.0388603665368,12.2163793485188,12.1911265063818,12.1618699428504,12.0092301686353,12.1209612805558,12.0643535391584,12.0305101944287,12.0961684898225,12.0343230085412,12.0216568974476,12.0399649310992,12.0134279884131,12.1195938539645,12.0739459801,12.0691354597708,12.0114558106421,12.0872722175056,12.0441123834781,12.0389903786517,12.0886170562574,12.1250469548871,12.0663909499352,12.0747046254127,12.0049046041898,12.1784444784127,12.1367225673954,12.0719525082009,12.0241969893078,12.2010651288196,12.1126901066318,12.0989160734838,12.1852064528488,12.1374779090627,12.1545214231452,12.1269266190512,12.069290259864,12.1822357916738,12.1514686135361,12.1360953610963,12.0930887007933,12.1875420089107,12.1711395274901,12.1289269873534,12.2418451126183,12.1418060874073,12.1736011053832,12.0872891095402,12.0712947620729,12.2075715216539,12.2307945259849,12.1385643857474,12.0738318483005,12.217976512533,12.1770505492362,12.1481256855753,12.2444324112515,12.2045164352629,12.1969309876129,12.1398046296784,12.1360846362006,12.2460190568393,12.2385591965645,12.2075864990754,12.1168697780694,12.2814259134098,12.152207626038,12.1850430658357,12.2637470373417,12.2371787937036,12.2212173828566,12.1942075326514,12.1147026928254,12.2775371267385,12.219393527313,12.1994205694498,12.1798877951065,12.285479766646,12.1825532194873,12.2145020183326,12.3104056334622,12.2700188037555,12.2852719206914,12.2109009703868,12.1601491186272,12.3093284478319,12.2802102601017,12.2062226342813,12.1693723534455,12.2912314742781],"text":["date: 2002-01-01<br />.value: 11.64926","date: 2002-02-01<br />.value: 11.61204","date: 2002-03-01<br />.value: 11.73888","date: 2002-04-01<br />.value: 11.66456","date: 2002-05-01<br />.value: 11.66246","date: 2002-06-01<br />.value: 11.54233","date: 2002-07-01<br />.value: 11.66893","date: 2002-08-01<br />.value: 11.67554","date: 2002-09-01<br />.value: 11.72837","date: 2002-10-01<br />.value: 11.75351","date: 2002-11-01<br />.value: 11.66580","date: 2002-12-01<br />.value: 11.66141","date: 2003-01-01<br />.value: 11.64282","date: 2003-02-01<br />.value: 11.61950","date: 2003-03-01<br />.value: 11.76547","date: 2003-04-01<br />.value: 11.67628","date: 2003-05-01<br />.value: 11.73554","date: 2003-06-01<br />.value: 11.64069","date: 2003-07-01<br />.value: 11.73540","date: 2003-08-01<br />.value: 11.78310","date: 2003-09-01<br />.value: 11.78214","date: 2003-10-01<br />.value: 11.85580","date: 2003-11-01<br />.value: 11.76500","date: 2003-12-01<br />.value: 11.80582","date: 2004-01-01<br />.value: 11.75996","date: 2004-02-01<br />.value: 11.75261","date: 2004-03-01<br />.value: 11.85103","date: 2004-04-01<br />.value: 11.78962","date: 2004-05-01<br />.value: 11.79174","date: 2004-06-01<br />.value: 11.69136","date: 2004-07-01<br />.value: 11.85033","date: 2004-08-01<br />.value: 11.83445","date: 2004-09-01<br />.value: 11.90693","date: 2004-10-01<br />.value: 11.89095","date: 2004-11-01<br />.value: 11.87194","date: 2004-12-01<br />.value: 11.86930","date: 2005-01-01<br />.value: 11.80285","date: 2005-02-01<br />.value: 11.80684","date: 2005-03-01<br />.value: 11.95315","date: 2005-04-01<br />.value: 11.95594","date: 2005-05-01<br />.value: 11.92169","date: 2005-06-01<br />.value: 11.87623","date: 2005-07-01<br />.value: 12.01798","date: 2005-08-01<br />.value: 11.97308","date: 2005-09-01<br />.value: 11.96088","date: 2005-10-01<br />.value: 12.01074","date: 2005-11-01<br />.value: 11.90892","date: 2005-12-01<br />.value: 11.89179","date: 2006-01-01<br />.value: 11.85625","date: 2006-02-01<br />.value: 11.80203","date: 2006-03-01<br />.value: 11.97600","date: 2006-04-01<br />.value: 11.95693","date: 2006-05-01<br />.value: 11.98673","date: 2006-06-01<br />.value: 11.91309","date: 2006-07-01<br />.value: 11.98325","date: 2006-08-01<br />.value: 11.97787","date: 2006-09-01<br />.value: 11.95997","date: 2006-10-01<br />.value: 12.02010","date: 2006-11-01<br />.value: 11.96071","date: 2006-12-01<br />.value: 11.94270","date: 2007-01-01<br />.value: 11.89820","date: 2007-02-01<br />.value: 11.86140","date: 2007-03-01<br />.value: 12.01180","date: 2007-04-01<br />.value: 11.97017","date: 2007-05-01<br />.value: 11.94838","date: 2007-06-01<br />.value: 11.88100","date: 2007-07-01<br />.value: 12.01317","date: 2007-08-01<br />.value: 11.98754","date: 2007-09-01<br />.value: 11.97677","date: 2007-10-01<br />.value: 12.02717","date: 2007-11-01<br />.value: 11.99643","date: 2007-12-01<br />.value: 11.93540","date: 2008-01-01<br />.value: 11.99606","date: 2008-02-01<br />.value: 12.01916","date: 2008-03-01<br />.value: 12.12852","date: 2008-04-01<br />.value: 12.09179","date: 2008-05-01<br />.value: 12.03157","date: 2008-06-01<br />.value: 11.99800","date: 2008-07-01<br />.value: 12.10625","date: 2008-08-01<br />.value: 12.13501","date: 2008-09-01<br />.value: 12.06730","date: 2008-10-01<br />.value: 12.17272","date: 2008-11-01<br />.value: 12.14688","date: 2008-12-01<br />.value: 12.15795","date: 2009-01-01<br />.value: 12.10140","date: 2009-02-01<br />.value: 12.02106","date: 2009-03-01<br />.value: 12.19726","date: 2009-04-01<br />.value: 12.17184","date: 2009-05-01<br />.value: 12.10273","date: 2009-06-01<br />.value: 12.00935","date: 2009-07-01<br />.value: 12.08996","date: 2009-08-01<br />.value: 12.06688","date: 2009-09-01<br />.value: 12.01085","date: 2009-10-01<br />.value: 12.06626","date: 2009-11-01<br />.value: 12.03381","date: 2009-12-01<br />.value: 11.99814","date: 2010-01-01<br />.value: 12.00478","date: 2010-02-01<br />.value: 11.98944","date: 2010-03-01<br />.value: 12.16740","date: 2010-04-01<br />.value: 12.17955","date: 2010-05-01<br />.value: 12.14502","date: 2010-06-01<br />.value: 12.07928","date: 2010-07-01<br />.value: 12.20005","date: 2010-08-01<br />.value: 12.19349","date: 2010-09-01<br />.value: 12.15145","date: 2010-10-01<br />.value: 12.22818","date: 2010-11-01<br />.value: 12.16024","date: 2010-12-01<br />.value: 12.21128","date: 2011-01-01<br />.value: 12.17073","date: 2011-02-01<br />.value: 12.03886","date: 2011-03-01<br />.value: 12.21638","date: 2011-04-01<br />.value: 12.19113","date: 2011-05-01<br />.value: 12.16187","date: 2011-06-01<br />.value: 12.00923","date: 2011-07-01<br />.value: 12.12096","date: 2011-08-01<br />.value: 12.06435","date: 2011-09-01<br />.value: 12.03051","date: 2011-10-01<br />.value: 12.09617","date: 2011-11-01<br />.value: 12.03432","date: 2011-12-01<br />.value: 12.02166","date: 2012-01-01<br />.value: 12.03996","date: 2012-02-01<br />.value: 12.01343","date: 2012-03-01<br />.value: 12.11959","date: 2012-04-01<br />.value: 12.07395","date: 2012-05-01<br />.value: 12.06914","date: 2012-06-01<br />.value: 12.01146","date: 2012-07-01<br />.value: 12.08727","date: 2012-08-01<br />.value: 12.04411","date: 2012-09-01<br />.value: 12.03899","date: 2012-10-01<br />.value: 12.08862","date: 2012-11-01<br />.value: 12.12505","date: 2012-12-01<br />.value: 12.06639","date: 2013-01-01<br />.value: 12.07470","date: 2013-02-01<br />.value: 12.00490","date: 2013-03-01<br />.value: 12.17844","date: 2013-04-01<br />.value: 12.13672","date: 2013-05-01<br />.value: 12.07195","date: 2013-06-01<br />.value: 12.02420","date: 2013-07-01<br />.value: 12.20107","date: 2013-08-01<br />.value: 12.11269","date: 2013-09-01<br />.value: 12.09892","date: 2013-10-01<br />.value: 12.18521","date: 2013-11-01<br />.value: 12.13748","date: 2013-12-01<br />.value: 12.15452","date: 2014-01-01<br />.value: 12.12693","date: 2014-02-01<br />.value: 12.06929","date: 2014-03-01<br />.value: 12.18224","date: 2014-04-01<br />.value: 12.15147","date: 2014-05-01<br />.value: 12.13610","date: 2014-06-01<br />.value: 12.09309","date: 2014-07-01<br />.value: 12.18754","date: 2014-08-01<br />.value: 12.17114","date: 2014-09-01<br />.value: 12.12893","date: 2014-10-01<br />.value: 12.24185","date: 2014-11-01<br />.value: 12.14181","date: 2014-12-01<br />.value: 12.17360","date: 2015-01-01<br />.value: 12.08729","date: 2015-02-01<br />.value: 12.07129","date: 2015-03-01<br />.value: 12.20757","date: 2015-04-01<br />.value: 12.23079","date: 2015-05-01<br />.value: 12.13856","date: 2015-06-01<br />.value: 12.07383","date: 2015-07-01<br />.value: 12.21798","date: 2015-08-01<br />.value: 12.17705","date: 2015-09-01<br />.value: 12.14813","date: 2015-10-01<br />.value: 12.24443","date: 2015-11-01<br />.value: 12.20452","date: 2015-12-01<br />.value: 12.19693","date: 2016-01-01<br />.value: 12.13980","date: 2016-02-01<br />.value: 12.13608","date: 2016-03-01<br />.value: 12.24602","date: 2016-04-01<br />.value: 12.23856","date: 2016-05-01<br />.value: 12.20759","date: 2016-06-01<br />.value: 12.11687","date: 2016-07-01<br />.value: 12.28143","date: 2016-08-01<br />.value: 12.15221","date: 2016-09-01<br />.value: 12.18504","date: 2016-10-01<br />.value: 12.26375","date: 2016-11-01<br />.value: 12.23718","date: 2016-12-01<br />.value: 12.22122","date: 2017-01-01<br />.value: 12.19421","date: 2017-02-01<br />.value: 12.11470","date: 2017-03-01<br />.value: 12.27754","date: 2017-04-01<br />.value: 12.21939","date: 2017-05-01<br />.value: 12.19942","date: 2017-06-01<br />.value: 12.17989","date: 2017-07-01<br />.value: 12.28548","date: 2017-08-01<br />.value: 12.18255","date: 2017-09-01<br />.value: 12.21450","date: 2017-10-01<br />.value: 12.31041","date: 2017-11-01<br />.value: 12.27002","date: 2017-12-01<br />.value: 12.28527","date: 2018-01-01<br />.value: 12.21090","date: 2018-02-01<br />.value: 12.16015","date: 2018-03-01<br />.value: 12.30933","date: 2018-04-01<br />.value: 12.28021","date: 2018-05-01<br />.value: 12.20622","date: 2018-06-01<br />.value: 12.16937","date: 2018-07-01<br />.value: 12.29123"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[11.4275636358191,11.3510768989639,11.5285625657496,11.4727803246658,11.4364762928068,11.2981344340362,11.5185297316901,11.4930390341626,11.5155719599111,11.6526874073454,11.5556400673778,11.5992774579473,11.584725060586,11.4610635879176,11.6106327693743,11.5905529506495,11.5123252848982,11.4486749023686,11.6260666326969,11.5681898640739,11.6044649081107,11.7684432688991,11.5868819970861,11.7094950350294,11.6782195401866,11.5923741500935,11.6890025656669,11.6604830293278,11.5732017908446,11.4925696847132,11.7140442418471,11.6348067579528,11.633797059448,11.7007899645669,11.6502147877221,11.6488452531061,11.6096165091242,11.554297708076,11.6689116021717,11.6415209460009,11.5604100152919,11.4812387002216,11.6616816204802,11.6096800556562,11.5657076504092,11.6912724670088,11.6058418728965,11.6247887914489,11.5963102739042,11.5751394113763,11.7180435289392,11.7133897755001,11.6320143143473,11.5788536450843,11.7300670404088,11.667627421388,11.6809705968454,11.7705322768388,11.7362849929598,11.779549872896,11.7271332106265,11.6595248482446,11.8347480605417,11.7770573969617,11.6830141712772,11.6327952108206,11.796313330499,11.7231539750172,11.7384262358581,11.8664093228052,11.7802160367739,11.8330287439273,11.8335658944294,11.7494352883398,11.8673919721066,11.824475419772,11.7396705230661,11.6558216209972,11.8550460055611,11.7783772657804,11.7464390610256,11.8843165927446,11.759933969386,11.8071908199862,11.7834334026108,11.6508596510595,11.7975102457625,11.8200350943881,11.6930863558726,11.6341691722556,11.7827082975342,11.8074664611329,11.8314882810479,11.954201633814,11.8893324454784,11.9114867967616,11.897459709563,11.8508894455308,11.9640520384463,11.9601017721391,11.8198217563458,11.7883198520829,11.9283343032497,11.8737139367405,11.9011494622958,12.0078229060766,11.922336112524,11.9865662218409,11.9077272547767,11.8188648536928,11.9737180525212,11.9405759802136,11.8689902227833,11.7134388753365,11.8941320329316,11.8176563765216,11.8499261333753,11.9039602888695,11.8894216634826,11.8908069522145,11.8809655799877,11.785026785455,11.9367477117146,11.904717521491,11.859645018043,11.7762200657714,11.9012783234684,11.8621164739992,11.9076261776312,11.9513674751752,11.9753000670515,11.9296469813341,11.8895245974437,11.7857882725237,11.9433693235892,11.9633448180794,11.8105232142094,11.7596136531296,11.9129022061753,11.8528346456697,11.8568342673793,12.0015177496523,11.9080910479307,11.9788457687783,11.9295612810806,11.8216446964878,11.9788332175536,11.9544781780419,11.8518803315994,11.806415637705,11.9321882787628,11.899710515465,11.9020850238704,12.060942821824,11.9413516060489,11.9985686562036,11.9416186991976,11.8393690105253,11.9832977762444,11.9642812998435,11.8722907865952,11.7647031192787,11.9596220837355,11.8804117551206,11.9261272344501,12.0508038408342,11.9811900830121,12.0288460871601,11.998107073706,11.8894491135749,12.0343823758049,11.9845902137926,11.9036829442061,11.8112061729318,11.9429465909743,11.8980109793691,11.9511674925923,12.0169862587833,12.0164787089691,12.0188571328459,12.0130035401895,11.8805363924607,12.0532011472013,11.9803883693062,11.9323066274049,11.8583857591414,11.97299238827,11.8975005547869,11.9263190594005,12.0468306938121,12.0256053684964,12.0453990711404,11.995345441356,11.892894971512,12.0598380506624,12.0454342995674,11.9276608047297,11.8608956320313,11.9939555784815],"text":["date: 2002-01-01<br />.value: 11.42756","date: 2002-02-01<br />.value: 11.35108","date: 2002-03-01<br />.value: 11.52856","date: 2002-04-01<br />.value: 11.47278","date: 2002-05-01<br />.value: 11.43648","date: 2002-06-01<br />.value: 11.29813","date: 2002-07-01<br />.value: 11.51853","date: 2002-08-01<br />.value: 11.49304","date: 2002-09-01<br />.value: 11.51557","date: 2002-10-01<br />.value: 11.65269","date: 2002-11-01<br />.value: 11.55564","date: 2002-12-01<br />.value: 11.59928","date: 2003-01-01<br />.value: 11.58473","date: 2003-02-01<br />.value: 11.46106","date: 2003-03-01<br />.value: 11.61063","date: 2003-04-01<br />.value: 11.59055","date: 2003-05-01<br />.value: 11.51233","date: 2003-06-01<br />.value: 11.44867","date: 2003-07-01<br />.value: 11.62607","date: 2003-08-01<br />.value: 11.56819","date: 2003-09-01<br />.value: 11.60446","date: 2003-10-01<br />.value: 11.76844","date: 2003-11-01<br />.value: 11.58688","date: 2003-12-01<br />.value: 11.70950","date: 2004-01-01<br />.value: 11.67822","date: 2004-02-01<br />.value: 11.59237","date: 2004-03-01<br />.value: 11.68900","date: 2004-04-01<br />.value: 11.66048","date: 2004-05-01<br />.value: 11.57320","date: 2004-06-01<br />.value: 11.49257","date: 2004-07-01<br />.value: 11.71404","date: 2004-08-01<br />.value: 11.63481","date: 2004-09-01<br />.value: 11.63380","date: 2004-10-01<br />.value: 11.70079","date: 2004-11-01<br />.value: 11.65021","date: 2004-12-01<br />.value: 11.64885","date: 2005-01-01<br />.value: 11.60962","date: 2005-02-01<br />.value: 11.55430","date: 2005-03-01<br />.value: 11.66891","date: 2005-04-01<br />.value: 11.64152","date: 2005-05-01<br />.value: 11.56041","date: 2005-06-01<br />.value: 11.48124","date: 2005-07-01<br />.value: 11.66168","date: 2005-08-01<br />.value: 11.60968","date: 2005-09-01<br />.value: 11.56571","date: 2005-10-01<br />.value: 11.69127","date: 2005-11-01<br />.value: 11.60584","date: 2005-12-01<br />.value: 11.62479","date: 2006-01-01<br />.value: 11.59631","date: 2006-02-01<br />.value: 11.57514","date: 2006-03-01<br />.value: 11.71804","date: 2006-04-01<br />.value: 11.71339","date: 2006-05-01<br />.value: 11.63201","date: 2006-06-01<br />.value: 11.57885","date: 2006-07-01<br />.value: 11.73007","date: 2006-08-01<br />.value: 11.66763","date: 2006-09-01<br />.value: 11.68097","date: 2006-10-01<br />.value: 11.77053","date: 2006-11-01<br />.value: 11.73628","date: 2006-12-01<br />.value: 11.77955","date: 2007-01-01<br />.value: 11.72713","date: 2007-02-01<br />.value: 11.65952","date: 2007-03-01<br />.value: 11.83475","date: 2007-04-01<br />.value: 11.77706","date: 2007-05-01<br />.value: 11.68301","date: 2007-06-01<br />.value: 11.63280","date: 2007-07-01<br />.value: 11.79631","date: 2007-08-01<br />.value: 11.72315","date: 2007-09-01<br />.value: 11.73843","date: 2007-10-01<br />.value: 11.86641","date: 2007-11-01<br />.value: 11.78022","date: 2007-12-01<br />.value: 11.83303","date: 2008-01-01<br />.value: 11.83357","date: 2008-02-01<br />.value: 11.74944","date: 2008-03-01<br />.value: 11.86739","date: 2008-04-01<br />.value: 11.82448","date: 2008-05-01<br />.value: 11.73967","date: 2008-06-01<br />.value: 11.65582","date: 2008-07-01<br />.value: 11.85505","date: 2008-08-01<br />.value: 11.77838","date: 2008-09-01<br />.value: 11.74644","date: 2008-10-01<br />.value: 11.88432","date: 2008-11-01<br />.value: 11.75993","date: 2008-12-01<br />.value: 11.80719","date: 2009-01-01<br />.value: 11.78343","date: 2009-02-01<br />.value: 11.65086","date: 2009-03-01<br />.value: 11.79751","date: 2009-04-01<br />.value: 11.82004","date: 2009-05-01<br />.value: 11.69309","date: 2009-06-01<br />.value: 11.63417","date: 2009-07-01<br />.value: 11.78271","date: 2009-08-01<br />.value: 11.80747","date: 2009-09-01<br />.value: 11.83149","date: 2009-10-01<br />.value: 11.95420","date: 2009-11-01<br />.value: 11.88933","date: 2009-12-01<br />.value: 11.91149","date: 2010-01-01<br />.value: 11.89746","date: 2010-02-01<br />.value: 11.85089","date: 2010-03-01<br />.value: 11.96405","date: 2010-04-01<br />.value: 11.96010","date: 2010-05-01<br />.value: 11.81982","date: 2010-06-01<br />.value: 11.78832","date: 2010-07-01<br />.value: 11.92833","date: 2010-08-01<br />.value: 11.87371","date: 2010-09-01<br />.value: 11.90115","date: 2010-10-01<br />.value: 12.00782","date: 2010-11-01<br />.value: 11.92234","date: 2010-12-01<br />.value: 11.98657","date: 2011-01-01<br />.value: 11.90773","date: 2011-02-01<br />.value: 11.81886","date: 2011-03-01<br />.value: 11.97372","date: 2011-04-01<br />.value: 11.94058","date: 2011-05-01<br />.value: 11.86899","date: 2011-06-01<br />.value: 11.71344","date: 2011-07-01<br />.value: 11.89413","date: 2011-08-01<br />.value: 11.81766","date: 2011-09-01<br />.value: 11.84993","date: 2011-10-01<br />.value: 11.90396","date: 2011-11-01<br />.value: 11.88942","date: 2011-12-01<br />.value: 11.89081","date: 2012-01-01<br />.value: 11.88097","date: 2012-02-01<br />.value: 11.78503","date: 2012-03-01<br />.value: 11.93675","date: 2012-04-01<br />.value: 11.90472","date: 2012-05-01<br />.value: 11.85965","date: 2012-06-01<br />.value: 11.77622","date: 2012-07-01<br />.value: 11.90128","date: 2012-08-01<br />.value: 11.86212","date: 2012-09-01<br />.value: 11.90763","date: 2012-10-01<br />.value: 11.95137","date: 2012-11-01<br />.value: 11.97530","date: 2012-12-01<br />.value: 11.92965","date: 2013-01-01<br />.value: 11.88952","date: 2013-02-01<br />.value: 11.78579","date: 2013-03-01<br />.value: 11.94337","date: 2013-04-01<br />.value: 11.96334","date: 2013-05-01<br />.value: 11.81052","date: 2013-06-01<br />.value: 11.75961","date: 2013-07-01<br />.value: 11.91290","date: 2013-08-01<br />.value: 11.85283","date: 2013-09-01<br />.value: 11.85683","date: 2013-10-01<br />.value: 12.00152","date: 2013-11-01<br />.value: 11.90809","date: 2013-12-01<br />.value: 11.97885","date: 2014-01-01<br />.value: 11.92956","date: 2014-02-01<br />.value: 11.82164","date: 2014-03-01<br />.value: 11.97883","date: 2014-04-01<br />.value: 11.95448","date: 2014-05-01<br />.value: 11.85188","date: 2014-06-01<br />.value: 11.80642","date: 2014-07-01<br />.value: 11.93219","date: 2014-08-01<br />.value: 11.89971","date: 2014-09-01<br />.value: 11.90209","date: 2014-10-01<br />.value: 12.06094","date: 2014-11-01<br />.value: 11.94135","date: 2014-12-01<br />.value: 11.99857","date: 2015-01-01<br />.value: 11.94162","date: 2015-02-01<br />.value: 11.83937","date: 2015-03-01<br />.value: 11.98330","date: 2015-04-01<br />.value: 11.96428","date: 2015-05-01<br />.value: 11.87229","date: 2015-06-01<br />.value: 11.76470","date: 2015-07-01<br />.value: 11.95962","date: 2015-08-01<br />.value: 11.88041","date: 2015-09-01<br />.value: 11.92613","date: 2015-10-01<br />.value: 12.05080","date: 2015-11-01<br />.value: 11.98119","date: 2015-12-01<br />.value: 12.02885","date: 2016-01-01<br />.value: 11.99811","date: 2016-02-01<br />.value: 11.88945","date: 2016-03-01<br />.value: 12.03438","date: 2016-04-01<br />.value: 11.98459","date: 2016-05-01<br />.value: 11.90368","date: 2016-06-01<br />.value: 11.81121","date: 2016-07-01<br />.value: 11.94295","date: 2016-08-01<br />.value: 11.89801","date: 2016-09-01<br />.value: 11.95117","date: 2016-10-01<br />.value: 12.01699","date: 2016-11-01<br />.value: 12.01648","date: 2016-12-01<br />.value: 12.01886","date: 2017-01-01<br />.value: 12.01300","date: 2017-02-01<br />.value: 11.88054","date: 2017-03-01<br />.value: 12.05320","date: 2017-04-01<br />.value: 11.98039","date: 2017-05-01<br />.value: 11.93231","date: 2017-06-01<br />.value: 11.85839","date: 2017-07-01<br />.value: 11.97299","date: 2017-08-01<br />.value: 11.89750","date: 2017-09-01<br />.value: 11.92632","date: 2017-10-01<br />.value: 12.04683","date: 2017-11-01<br />.value: 12.02561","date: 2017-12-01<br />.value: 12.04540","date: 2018-01-01<br />.value: 11.99535","date: 2018-02-01<br />.value: 11.89289","date: 2018-03-01<br />.value: 12.05984","date: 2018-04-01<br />.value: 12.04543","date: 2018-05-01<br />.value: 11.92766","date: 2018-06-01<br />.value: 11.86090","date: 2018-07-01<br />.value: 11.99396"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[11.2350088878087,11.1588471468788,11.2860875980677,11.3067496440736,11.2811825448426,11.3695745900743,11.5141946592024,11.4721243035663,11.3685815413334,11.4748289197034,11.3187215922412,11.1763752253069,11.1654650791486,11.029747433133,11.1162615128151,11.1772149381744,11.1195420780546,11.1668088706813,11.3150353445681,11.3367728411218,11.2950306150917,11.3122525472834,11.2545821058173,11.2885311317544,11.2472657765529,11.0245786229647,11.1306542860116,11.2595675215624,11.3911871173705,11.4811561212812,11.5839615809441,11.5597995088388,11.4672165488766,11.453897068508,11.3234705259951,11.3375834940994,11.2742874926974,11.1612664914206,11.3293030624432,11.3520639846737,11.3853307013549,11.4329835855467,11.5489005320928,11.4991206149937,11.448578925403,11.3868745947696,11.3048552381535,11.3249680565576,11.230390125338,11.1347204024811,11.2056935332737,11.3476851889067,11.3455713352981,11.4299350838394,11.6352404380895,11.5732300355757,11.5583098360048,11.6077264242347,11.5235290477544,11.502006064721,11.43123807221,11.3355795093175,11.3880422828235,11.4637037076779,11.487258878221,11.518818069425,11.6646675321318,11.5987911859466,11.5430569187496,11.6220578581458,11.4865096184648,11.4963589956617,11.4325610388842,11.346256760584,11.4143640054796,11.4295764641952,11.4692661156298,11.5501538100603,11.6664445167911,11.6246636003087,11.5592554625528,11.6008813957285,11.4672479514736,11.5086362795518,11.5262463467531,11.2531179292844,11.3602636761944,11.4336224836317,11.4745380045654,11.4784892876491,11.6049210667158,11.5462248353712,11.4903526041178,11.5468920145335,11.4965521508523,11.4384281862773,11.3418286741167,11.3269813546451,11.3293631387401,11.3709124909233,11.4059970541402,11.4993537849401,11.6338325047293,11.6145971853809,11.5368079934335,11.5578032237483,11.4748393079646,11.5241917612441,11.3607178960796,11.3089593455583,11.316971406445,11.3506770871054,11.3768995350015,11.4611162480438,11.5706281750985,11.517982655797,11.4787066215835,11.4772879245791,11.4471274843798,11.491946946585,11.4898001235685,11.2785566454155,11.4086532457918,11.4251647163627,11.4457701897828,11.5135152909887,11.6408172347749,11.6026199059889,11.5062733888899,11.5953898533911,11.5569232114479,11.5078827719384,11.4208430702582,11.4176142851654,11.3855692523292,11.4329619208298,11.4139666369371,11.5516075715626,11.6751548525548,11.6088718060174,11.5483891292458,11.5828245923499,11.4842481740834,11.5796116781653,11.5552854761363,11.4377600108025,11.4551374412028,11.5109835807329,11.4714574284765,11.4918958852757,11.6997949973602,11.6236167468129,11.5737006636847,11.6263255762978,11.571118898548,11.6455839767451,11.531403686216,11.5164193542245,11.4964809927542,11.5614965575262,11.5194541069329,11.5613727132079,11.7032813267925,11.6541906247738,11.6142900073507,11.653478398777,11.6406940343805,11.6929777823201,11.5860922800889,11.5530592227099,11.59918572661,11.558032664869,11.553097648409,11.6003867407402,11.7399574465312,11.6760726970446,11.6461355559829,11.6794140051279,11.6337793363361,11.6949803195356,11.6273785179389,11.4471381644321,11.6052949615645,11.6788296579921,11.5669305790487,11.627949141539,11.7746356694333,11.6924013098976,11.6752993839545,11.7278110126374,11.6775157477339,11.6752483752575,11.6145158827317,11.5352151929443,11.5775702304637,11.577073284794,11.5727309278382,11.5465729843824,11.7336180150334],"text":["date: 2002-01-01<br />.value: 11.23501","date: 2002-02-01<br />.value: 11.15885","date: 2002-03-01<br />.value: 11.28609","date: 2002-04-01<br />.value: 11.30675","date: 2002-05-01<br />.value: 11.28118","date: 2002-06-01<br />.value: 11.36957","date: 2002-07-01<br />.value: 11.51419","date: 2002-08-01<br />.value: 11.47212","date: 2002-09-01<br />.value: 11.36858","date: 2002-10-01<br />.value: 11.47483","date: 2002-11-01<br />.value: 11.31872","date: 2002-12-01<br />.value: 11.17638","date: 2003-01-01<br />.value: 11.16547","date: 2003-02-01<br />.value: 11.02975","date: 2003-03-01<br />.value: 11.11626","date: 2003-04-01<br />.value: 11.17721","date: 2003-05-01<br />.value: 11.11954","date: 2003-06-01<br />.value: 11.16681","date: 2003-07-01<br />.value: 11.31504","date: 2003-08-01<br />.value: 11.33677","date: 2003-09-01<br />.value: 11.29503","date: 2003-10-01<br />.value: 11.31225","date: 2003-11-01<br />.value: 11.25458","date: 2003-12-01<br />.value: 11.28853","date: 2004-01-01<br />.value: 11.24727","date: 2004-02-01<br />.value: 11.02458","date: 2004-03-01<br />.value: 11.13065","date: 2004-04-01<br />.value: 11.25957","date: 2004-05-01<br />.value: 11.39119","date: 2004-06-01<br />.value: 11.48116","date: 2004-07-01<br />.value: 11.58396","date: 2004-08-01<br />.value: 11.55980","date: 2004-09-01<br />.value: 11.46722","date: 2004-10-01<br />.value: 11.45390","date: 2004-11-01<br />.value: 11.32347","date: 2004-12-01<br />.value: 11.33758","date: 2005-01-01<br />.value: 11.27429","date: 2005-02-01<br />.value: 11.16127","date: 2005-03-01<br />.value: 11.32930","date: 2005-04-01<br />.value: 11.35206","date: 2005-05-01<br />.value: 11.38533","date: 2005-06-01<br />.value: 11.43298","date: 2005-07-01<br />.value: 11.54890","date: 2005-08-01<br />.value: 11.49912","date: 2005-09-01<br />.value: 11.44858","date: 2005-10-01<br />.value: 11.38687","date: 2005-11-01<br />.value: 11.30486","date: 2005-12-01<br />.value: 11.32497","date: 2006-01-01<br />.value: 11.23039","date: 2006-02-01<br />.value: 11.13472","date: 2006-03-01<br />.value: 11.20569","date: 2006-04-01<br />.value: 11.34769","date: 2006-05-01<br />.value: 11.34557","date: 2006-06-01<br />.value: 11.42994","date: 2006-07-01<br />.value: 11.63524","date: 2006-08-01<br />.value: 11.57323","date: 2006-09-01<br />.value: 11.55831","date: 2006-10-01<br />.value: 11.60773","date: 2006-11-01<br />.value: 11.52353","date: 2006-12-01<br />.value: 11.50201","date: 2007-01-01<br />.value: 11.43124","date: 2007-02-01<br />.value: 11.33558","date: 2007-03-01<br />.value: 11.38804","date: 2007-04-01<br />.value: 11.46370","date: 2007-05-01<br />.value: 11.48726","date: 2007-06-01<br />.value: 11.51882","date: 2007-07-01<br />.value: 11.66467","date: 2007-08-01<br />.value: 11.59879","date: 2007-09-01<br />.value: 11.54306","date: 2007-10-01<br />.value: 11.62206","date: 2007-11-01<br />.value: 11.48651","date: 2007-12-01<br />.value: 11.49636","date: 2008-01-01<br />.value: 11.43256","date: 2008-02-01<br />.value: 11.34626","date: 2008-03-01<br />.value: 11.41436","date: 2008-04-01<br />.value: 11.42958","date: 2008-05-01<br />.value: 11.46927","date: 2008-06-01<br />.value: 11.55015","date: 2008-07-01<br />.value: 11.66644","date: 2008-08-01<br />.value: 11.62466","date: 2008-09-01<br />.value: 11.55926","date: 2008-10-01<br />.value: 11.60088","date: 2008-11-01<br />.value: 11.46725","date: 2008-12-01<br />.value: 11.50864","date: 2009-01-01<br />.value: 11.52625","date: 2009-02-01<br />.value: 11.25312","date: 2009-03-01<br />.value: 11.36026","date: 2009-04-01<br />.value: 11.43362","date: 2009-05-01<br />.value: 11.47454","date: 2009-06-01<br />.value: 11.47849","date: 2009-07-01<br />.value: 11.60492","date: 2009-08-01<br />.value: 11.54622","date: 2009-09-01<br />.value: 11.49035","date: 2009-10-01<br />.value: 11.54689","date: 2009-11-01<br />.value: 11.49655","date: 2009-12-01<br />.value: 11.43843","date: 2010-01-01<br />.value: 11.34183","date: 2010-02-01<br />.value: 11.32698","date: 2010-03-01<br />.value: 11.32936","date: 2010-04-01<br />.value: 11.37091","date: 2010-05-01<br />.value: 11.40600","date: 2010-06-01<br />.value: 11.49935","date: 2010-07-01<br />.value: 11.63383","date: 2010-08-01<br />.value: 11.61460","date: 2010-09-01<br />.value: 11.53681","date: 2010-10-01<br />.value: 11.55780","date: 2010-11-01<br />.value: 11.47484","date: 2010-12-01<br />.value: 11.52419","date: 2011-01-01<br />.value: 11.36072","date: 2011-02-01<br />.value: 11.30896","date: 2011-03-01<br />.value: 11.31697","date: 2011-04-01<br />.value: 11.35068","date: 2011-05-01<br />.value: 11.37690","date: 2011-06-01<br />.value: 11.46112","date: 2011-07-01<br />.value: 11.57063","date: 2011-08-01<br />.value: 11.51798","date: 2011-09-01<br />.value: 11.47871","date: 2011-10-01<br />.value: 11.47729","date: 2011-11-01<br />.value: 11.44713","date: 2011-12-01<br />.value: 11.49195","date: 2012-01-01<br />.value: 11.48980","date: 2012-02-01<br />.value: 11.27856","date: 2012-03-01<br />.value: 11.40865","date: 2012-04-01<br />.value: 11.42516","date: 2012-05-01<br />.value: 11.44577","date: 2012-06-01<br />.value: 11.51352","date: 2012-07-01<br />.value: 11.64082","date: 2012-08-01<br />.value: 11.60262","date: 2012-09-01<br />.value: 11.50627","date: 2012-10-01<br />.value: 11.59539","date: 2012-11-01<br />.value: 11.55692","date: 2012-12-01<br />.value: 11.50788","date: 2013-01-01<br />.value: 11.42084","date: 2013-02-01<br />.value: 11.41761","date: 2013-03-01<br />.value: 11.38557","date: 2013-04-01<br />.value: 11.43296","date: 2013-05-01<br />.value: 11.41397","date: 2013-06-01<br />.value: 11.55161","date: 2013-07-01<br />.value: 11.67515","date: 2013-08-01<br />.value: 11.60887","date: 2013-09-01<br />.value: 11.54839","date: 2013-10-01<br />.value: 11.58282","date: 2013-11-01<br />.value: 11.48425","date: 2013-12-01<br />.value: 11.57961","date: 2014-01-01<br />.value: 11.55529","date: 2014-02-01<br />.value: 11.43776","date: 2014-03-01<br />.value: 11.45514","date: 2014-04-01<br />.value: 11.51098","date: 2014-05-01<br />.value: 11.47146","date: 2014-06-01<br />.value: 11.49190","date: 2014-07-01<br />.value: 11.69979","date: 2014-08-01<br />.value: 11.62362","date: 2014-09-01<br />.value: 11.57370","date: 2014-10-01<br />.value: 11.62633","date: 2014-11-01<br />.value: 11.57112","date: 2014-12-01<br />.value: 11.64558","date: 2015-01-01<br />.value: 11.53140","date: 2015-02-01<br />.value: 11.51642","date: 2015-03-01<br />.value: 11.49648","date: 2015-04-01<br />.value: 11.56150","date: 2015-05-01<br />.value: 11.51945","date: 2015-06-01<br />.value: 11.56137","date: 2015-07-01<br />.value: 11.70328","date: 2015-08-01<br />.value: 11.65419","date: 2015-09-01<br />.value: 11.61429","date: 2015-10-01<br />.value: 11.65348","date: 2015-11-01<br />.value: 11.64069","date: 2015-12-01<br />.value: 11.69298","date: 2016-01-01<br />.value: 11.58609","date: 2016-02-01<br />.value: 11.55306","date: 2016-03-01<br />.value: 11.59919","date: 2016-04-01<br />.value: 11.55803","date: 2016-05-01<br />.value: 11.55310","date: 2016-06-01<br />.value: 11.60039","date: 2016-07-01<br />.value: 11.73996","date: 2016-08-01<br />.value: 11.67607","date: 2016-09-01<br />.value: 11.64614","date: 2016-10-01<br />.value: 11.67941","date: 2016-11-01<br />.value: 11.63378","date: 2016-12-01<br />.value: 11.69498","date: 2017-01-01<br />.value: 11.62738","date: 2017-02-01<br />.value: 11.44714","date: 2017-03-01<br />.value: 11.60529","date: 2017-04-01<br />.value: 11.67883","date: 2017-05-01<br />.value: 11.56693","date: 2017-06-01<br />.value: 11.62795","date: 2017-07-01<br />.value: 11.77464","date: 2017-08-01<br />.value: 11.69240","date: 2017-09-01<br />.value: 11.67530","date: 2017-10-01<br />.value: 11.72781","date: 2017-11-01<br />.value: 11.67752","date: 2017-12-01<br />.value: 11.67525","date: 2018-01-01<br />.value: 11.61452","date: 2018-02-01<br />.value: 11.53522","date: 2018-03-01<br />.value: 11.57757","date: 2018-04-01<br />.value: 11.57707","date: 2018-05-01<br />.value: 11.57273","date: 2018-06-01<br />.value: 11.54657","date: 2018-07-01<br />.value: 11.73362"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[12.2761489299134,11.9780861360023,12.0968770074047,12.0603009305938,11.9641157274402,11.9712676126792,12.145106402868,12.1090605182345,12.2088487884769,12.2506013616617,12.1160439938693,12.1353497069112,12.2009193902894,11.970748966713,12.1008232348111,12.1185029308809,12.0318263955032,12.0618095883193,12.2161120813243,12.192708745072,12.3094501964123,12.3011327940793,12.2280640521708,12.2463745048035,12.2967996111631,12.0708254961221,12.2030480761281,12.1512679301557,12.1926378008038,12.2818246227096,12.3448776084074,12.3266562005135,12.4040911907854,12.3899055596481,12.2610436687747,12.263482694374,12.2796018788183,12.0505760603785,12.2071121051048,12.2177146140641,12.1556473953359,12.2053573897958,12.3029270868941,12.2601061820226,12.3539925256068,12.3549882174901,12.2355052262139,12.2457355685866,12.28623688428,12.0638060691764,12.2084149003085,12.1734668057813,12.1543160859571,12.2291004584762,12.3214216101265,12.2782398069572,12.3411016661498,12.3775860036075,12.335977470099,12.3535870683187,12.4116182574368,12.1345068239871,12.2763074122126,12.2744833475894,12.2174130988242,12.2291639767536,12.3867637071223,12.3566799120197,12.363495110085,12.4413344730346,12.3778723748645,12.3696572569872,12.4039189014702,12.1926327331635,12.3178554937894,12.2351458930159,12.1848387945218,12.2072619380414,12.3542081274169,12.3030723064481,12.4040091519564,12.4697898405281,12.3450690775858,12.369861018943,12.3854022308381,12.1219135605219,12.2867489985619,12.3193745447641,12.2438114920304,12.2344851599669,12.3542986663175,12.3120079959388,12.4319404826058,12.4380133878397,12.3612328156506,12.3801057814,12.3704126658351,12.1946729148043,12.3434360615655,12.3855192402449,12.3289979923675,12.3833272201578,12.5059290590385,12.4945656390965,12.5580912655992,12.5594230693709,12.5098704098181,12.5282974390646,12.3958868951955,12.2537288336584,12.4029954172013,12.5017563692135,12.4361719494104,12.3969946125433,12.5051656153517,12.4700970696313,12.5024406359406,12.5662997729881,12.4976782608113,12.5391247544624,12.528460446221,12.307495920418,12.4702391311749,12.4827152567415,12.4383463894959,12.4122124490282,12.5396764865209,12.5142041948494,12.5146596786619,12.579661735391,12.5565182272176,12.5124611564473,12.4934971848231,12.3256451901709,12.4471071942182,12.4274225892916,12.4257863215412,12.4188627847649,12.5661114254235,12.5406108702984,12.5181277673223,12.5987462905887,12.5596126807734,12.5631420116742,12.5434801589294,12.3597074780454,12.4912703845797,12.5436870867302,12.4440259884979,12.454724086762,12.5960382545914,12.535372795544,12.5481221573402,12.6529036002442,12.5553130214291,12.5978984937119,12.5084856825819,12.3680894489838,12.5489954609325,12.5205913719355,12.4393011720979,12.4640194751757,12.6375433250591,12.5087923341524,12.5937471009631,12.6448242273034,12.5890876248007,12.6248915271285,12.5615453670891,12.4450501751469,12.5922054157388,12.527826380188,12.5114411371001,12.5314225433366,12.6561413887339,12.569513647983,12.6502775819543,12.6417112536459,12.6163229529549,12.6494114060664,12.5882452437799,12.3902923996072,12.5737805024354,12.5816866086688,12.5134213066135,12.5405822431491,12.6907247106463,12.6053788263228,12.6350035977958,12.7020942282261,12.6397655734282,12.6412001103885,12.5819544510967,12.4271580803749,12.5999711172669,12.5585799167736,12.5330211031692,12.5490167514955,12.7255388318862],"text":["date: 2002-01-01<br />.value: 12.27615","date: 2002-02-01<br />.value: 11.97809","date: 2002-03-01<br />.value: 12.09688","date: 2002-04-01<br />.value: 12.06030","date: 2002-05-01<br />.value: 11.96412","date: 2002-06-01<br />.value: 11.97127","date: 2002-07-01<br />.value: 12.14511","date: 2002-08-01<br />.value: 12.10906","date: 2002-09-01<br />.value: 12.20885","date: 2002-10-01<br />.value: 12.25060","date: 2002-11-01<br />.value: 12.11604","date: 2002-12-01<br />.value: 12.13535","date: 2003-01-01<br />.value: 12.20092","date: 2003-02-01<br />.value: 11.97075","date: 2003-03-01<br />.value: 12.10082","date: 2003-04-01<br />.value: 12.11850","date: 2003-05-01<br />.value: 12.03183","date: 2003-06-01<br />.value: 12.06181","date: 2003-07-01<br />.value: 12.21611","date: 2003-08-01<br />.value: 12.19271","date: 2003-09-01<br />.value: 12.30945","date: 2003-10-01<br />.value: 12.30113","date: 2003-11-01<br />.value: 12.22806","date: 2003-12-01<br />.value: 12.24637","date: 2004-01-01<br />.value: 12.29680","date: 2004-02-01<br />.value: 12.07083","date: 2004-03-01<br />.value: 12.20305","date: 2004-04-01<br />.value: 12.15127","date: 2004-05-01<br />.value: 12.19264","date: 2004-06-01<br />.value: 12.28182","date: 2004-07-01<br />.value: 12.34488","date: 2004-08-01<br />.value: 12.32666","date: 2004-09-01<br />.value: 12.40409","date: 2004-10-01<br />.value: 12.38991","date: 2004-11-01<br />.value: 12.26104","date: 2004-12-01<br />.value: 12.26348","date: 2005-01-01<br />.value: 12.27960","date: 2005-02-01<br />.value: 12.05058","date: 2005-03-01<br />.value: 12.20711","date: 2005-04-01<br />.value: 12.21771","date: 2005-05-01<br />.value: 12.15565","date: 2005-06-01<br />.value: 12.20536","date: 2005-07-01<br />.value: 12.30293","date: 2005-08-01<br />.value: 12.26011","date: 2005-09-01<br />.value: 12.35399","date: 2005-10-01<br />.value: 12.35499","date: 2005-11-01<br />.value: 12.23551","date: 2005-12-01<br />.value: 12.24574","date: 2006-01-01<br />.value: 12.28624","date: 2006-02-01<br />.value: 12.06381","date: 2006-03-01<br />.value: 12.20841","date: 2006-04-01<br />.value: 12.17347","date: 2006-05-01<br />.value: 12.15432","date: 2006-06-01<br />.value: 12.22910","date: 2006-07-01<br />.value: 12.32142","date: 2006-08-01<br />.value: 12.27824","date: 2006-09-01<br />.value: 12.34110","date: 2006-10-01<br />.value: 12.37759","date: 2006-11-01<br />.value: 12.33598","date: 2006-12-01<br />.value: 12.35359","date: 2007-01-01<br />.value: 12.41162","date: 2007-02-01<br />.value: 12.13451","date: 2007-03-01<br />.value: 12.27631","date: 2007-04-01<br />.value: 12.27448","date: 2007-05-01<br />.value: 12.21741","date: 2007-06-01<br />.value: 12.22916","date: 2007-07-01<br />.value: 12.38676","date: 2007-08-01<br />.value: 12.35668","date: 2007-09-01<br />.value: 12.36350","date: 2007-10-01<br />.value: 12.44133","date: 2007-11-01<br />.value: 12.37787","date: 2007-12-01<br />.value: 12.36966","date: 2008-01-01<br />.value: 12.40392","date: 2008-02-01<br />.value: 12.19263","date: 2008-03-01<br />.value: 12.31786","date: 2008-04-01<br />.value: 12.23515","date: 2008-05-01<br />.value: 12.18484","date: 2008-06-01<br />.value: 12.20726","date: 2008-07-01<br />.value: 12.35421","date: 2008-08-01<br />.value: 12.30307","date: 2008-09-01<br />.value: 12.40401","date: 2008-10-01<br />.value: 12.46979","date: 2008-11-01<br />.value: 12.34507","date: 2008-12-01<br />.value: 12.36986","date: 2009-01-01<br />.value: 12.38540","date: 2009-02-01<br />.value: 12.12191","date: 2009-03-01<br />.value: 12.28675","date: 2009-04-01<br />.value: 12.31937","date: 2009-05-01<br />.value: 12.24381","date: 2009-06-01<br />.value: 12.23449","date: 2009-07-01<br />.value: 12.35430","date: 2009-08-01<br />.value: 12.31201","date: 2009-09-01<br />.value: 12.43194","date: 2009-10-01<br />.value: 12.43801","date: 2009-11-01<br />.value: 12.36123","date: 2009-12-01<br />.value: 12.38011","date: 2010-01-01<br />.value: 12.37041","date: 2010-02-01<br />.value: 12.19467","date: 2010-03-01<br />.value: 12.34344","date: 2010-04-01<br />.value: 12.38552","date: 2010-05-01<br />.value: 12.32900","date: 2010-06-01<br />.value: 12.38333","date: 2010-07-01<br />.value: 12.50593","date: 2010-08-01<br />.value: 12.49457","date: 2010-09-01<br />.value: 12.55809","date: 2010-10-01<br />.value: 12.55942","date: 2010-11-01<br />.value: 12.50987","date: 2010-12-01<br />.value: 12.52830","date: 2011-01-01<br />.value: 12.39589","date: 2011-02-01<br />.value: 12.25373","date: 2011-03-01<br />.value: 12.40300","date: 2011-04-01<br />.value: 12.50176","date: 2011-05-01<br />.value: 12.43617","date: 2011-06-01<br />.value: 12.39699","date: 2011-07-01<br />.value: 12.50517","date: 2011-08-01<br />.value: 12.47010","date: 2011-09-01<br />.value: 12.50244","date: 2011-10-01<br />.value: 12.56630","date: 2011-11-01<br />.value: 12.49768","date: 2011-12-01<br />.value: 12.53912","date: 2012-01-01<br />.value: 12.52846","date: 2012-02-01<br />.value: 12.30750","date: 2012-03-01<br />.value: 12.47024","date: 2012-04-01<br />.value: 12.48272","date: 2012-05-01<br />.value: 12.43835","date: 2012-06-01<br />.value: 12.41221","date: 2012-07-01<br />.value: 12.53968","date: 2012-08-01<br />.value: 12.51420","date: 2012-09-01<br />.value: 12.51466","date: 2012-10-01<br />.value: 12.57966","date: 2012-11-01<br />.value: 12.55652","date: 2012-12-01<br />.value: 12.51246","date: 2013-01-01<br />.value: 12.49350","date: 2013-02-01<br />.value: 12.32565","date: 2013-03-01<br />.value: 12.44711","date: 2013-04-01<br />.value: 12.42742","date: 2013-05-01<br />.value: 12.42579","date: 2013-06-01<br />.value: 12.41886","date: 2013-07-01<br />.value: 12.56611","date: 2013-08-01<br />.value: 12.54061","date: 2013-09-01<br />.value: 12.51813","date: 2013-10-01<br />.value: 12.59875","date: 2013-11-01<br />.value: 12.55961","date: 2013-12-01<br />.value: 12.56314","date: 2014-01-01<br />.value: 12.54348","date: 2014-02-01<br />.value: 12.35971","date: 2014-03-01<br />.value: 12.49127","date: 2014-04-01<br />.value: 12.54369","date: 2014-05-01<br />.value: 12.44403","date: 2014-06-01<br />.value: 12.45472","date: 2014-07-01<br />.value: 12.59604","date: 2014-08-01<br />.value: 12.53537","date: 2014-09-01<br />.value: 12.54812","date: 2014-10-01<br />.value: 12.65290","date: 2014-11-01<br />.value: 12.55531","date: 2014-12-01<br />.value: 12.59790","date: 2015-01-01<br />.value: 12.50849","date: 2015-02-01<br />.value: 12.36809","date: 2015-03-01<br />.value: 12.54900","date: 2015-04-01<br />.value: 12.52059","date: 2015-05-01<br />.value: 12.43930","date: 2015-06-01<br />.value: 12.46402","date: 2015-07-01<br />.value: 12.63754","date: 2015-08-01<br />.value: 12.50879","date: 2015-09-01<br />.value: 12.59375","date: 2015-10-01<br />.value: 12.64482","date: 2015-11-01<br />.value: 12.58909","date: 2015-12-01<br />.value: 12.62489","date: 2016-01-01<br />.value: 12.56155","date: 2016-02-01<br />.value: 12.44505","date: 2016-03-01<br />.value: 12.59221","date: 2016-04-01<br />.value: 12.52783","date: 2016-05-01<br />.value: 12.51144","date: 2016-06-01<br />.value: 12.53142","date: 2016-07-01<br />.value: 12.65614","date: 2016-08-01<br />.value: 12.56951","date: 2016-09-01<br />.value: 12.65028","date: 2016-10-01<br />.value: 12.64171","date: 2016-11-01<br />.value: 12.61632","date: 2016-12-01<br />.value: 12.64941","date: 2017-01-01<br />.value: 12.58825","date: 2017-02-01<br />.value: 12.39029","date: 2017-03-01<br />.value: 12.57378","date: 2017-04-01<br />.value: 12.58169","date: 2017-05-01<br />.value: 12.51342","date: 2017-06-01<br />.value: 12.54058","date: 2017-07-01<br />.value: 12.69072","date: 2017-08-01<br />.value: 12.60538","date: 2017-09-01<br />.value: 12.63500","date: 2017-10-01<br />.value: 12.70209","date: 2017-11-01<br />.value: 12.63977","date: 2017-12-01<br />.value: 12.64120","date: 2018-01-01<br />.value: 12.58195","date: 2018-02-01<br />.value: 12.42716","date: 2018-03-01<br />.value: 12.59997","date: 2018-04-01<br />.value: 12.55858","date: 2018-05-01<br />.value: 12.53302","date: 2018-06-01<br />.value: 12.54902","date: 2018-07-01<br />.value: 12.72554"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y4","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[12.696531262768,12.5773775478249,12.6002644480399,12.5330319199243,12.5130608985394,12.4680406776618,12.6112743856267,12.5350130173074,12.5345343116033,12.6646171187183,12.6119276776081,12.6318794512963,12.6496681289996,12.5044572411151,12.5578556433885,12.6173508249526,12.5312275101803,12.5435764927153,12.7100518862091,12.6713997317748,12.6777966690487,12.793128487891,12.730369128484,12.7478706350926,12.730312889593,12.6128735277614,12.6740492216913,12.6942783571773,12.6316540572232,12.6535782055378,12.7333423217121,12.7283721913698,12.7395820362382,12.7774193563413,12.6915189209568,12.6948980290165,12.6481814311371,12.5694163040809,12.6561892064147,12.6383873877776,12.6077606292768,12.5866130307791,12.6871398471319,12.6629910352273,12.7047153580891,12.7264277195123,12.6739521454096,12.6916635347843,12.6552292272628,12.5348690697617,12.6325749127041,12.6620724270124,12.6043956427087,12.6034350149352,12.7313276630646,12.6601628248156,12.6898743914173,12.7844849525637,12.7274345670511,12.7454011744687,12.6848656597149,12.5876275015908,12.686122516871,12.7267248301139,12.6820241758895,12.6867967297994,12.7953609601695,12.7683449019268,12.7563304985399,12.8395441289023,12.7659255482088,12.8303090940868,12.7670931606599,12.7172811959704,12.8215204124241,12.7868151137886,12.7544512463966,12.7078565155618,12.8432180959747,12.7890254237824,12.7805657862197,12.9158655147108,12.7604404008868,12.8260360421275,12.8067892462553,12.6623924518566,12.7642845913974,12.7915900709882,12.7041230120932,12.6949930931926,12.8082141187374,12.7756217910488,12.8173289532777,12.9168116780891,12.8193537694795,12.8684848073771,12.7497071241961,12.7472509311051,12.7877546034576,12.7956604651566,12.7282535533343,12.7304727181624,12.8667482859432,12.8253095267055,12.8373284647979,12.9067538737442,12.8583769980195,12.8847024571769,12.7099673055629,12.7262523828432,12.8227247763631,12.8389681034881,12.8032704420383,12.7798899697232,12.8799044800531,12.8427156099809,12.8369587096966,12.8333070277327,12.8276889150754,12.8478449494275,12.7359888784617,12.7023651735988,12.81131168349,12.780861312378,12.7626810587011,12.7386930286261,12.8415059638996,12.8410105661872,12.8609284809406,12.8987772281581,12.8576267009918,12.8678813661969,12.7823910225095,12.7007353502186,12.7951501436152,12.7929950481764,12.7787146512725,12.7845410297933,12.8648793850131,12.843913225996,12.8154278068573,12.9015496100346,12.8513863291686,12.8859496656959,12.7776678217861,12.7056290090379,12.8245744018426,12.8213528747412,12.8022076987945,12.7835339648254,12.880314745878,12.8603828393045,12.8350465715679,12.9104144320168,12.8079293066156,12.8519893200214,12.7288495671759,12.6957931140787,12.8281963228367,12.8019817891629,12.7835760630575,12.7626781929487,12.914445820088,12.8488392729223,12.8751934914873,12.9038913972898,12.8768310576117,12.9028307986742,12.7993746286204,12.771167680651,12.8762965847388,12.8632506210503,12.8325724161422,12.8257481898933,12.9482599590148,12.8768668494159,12.9076244084339,12.9091553053479,12.8896718892656,12.9158728908742,12.8272349831171,12.7649653149355,12.8981492532314,12.8584368933069,12.864268585753,12.8541963091898,12.9588180389761,12.8958165414811,12.9089201256881,12.9456643843327,12.9335922668801,12.9286742539528,12.8065314563362,12.8083209023733,12.9366552927927,12.872732103253,12.8924796621332,12.8581712434007,12.9835563789251],"text":["date: 2002-01-01<br />.value: 12.69653","date: 2002-02-01<br />.value: 12.57738","date: 2002-03-01<br />.value: 12.60026","date: 2002-04-01<br />.value: 12.53303","date: 2002-05-01<br />.value: 12.51306","date: 2002-06-01<br />.value: 12.46804","date: 2002-07-01<br />.value: 12.61127","date: 2002-08-01<br />.value: 12.53501","date: 2002-09-01<br />.value: 12.53453","date: 2002-10-01<br />.value: 12.66462","date: 2002-11-01<br />.value: 12.61193","date: 2002-12-01<br />.value: 12.63188","date: 2003-01-01<br />.value: 12.64967","date: 2003-02-01<br />.value: 12.50446","date: 2003-03-01<br />.value: 12.55786","date: 2003-04-01<br />.value: 12.61735","date: 2003-05-01<br />.value: 12.53123","date: 2003-06-01<br />.value: 12.54358","date: 2003-07-01<br />.value: 12.71005","date: 2003-08-01<br />.value: 12.67140","date: 2003-09-01<br />.value: 12.67780","date: 2003-10-01<br />.value: 12.79313","date: 2003-11-01<br />.value: 12.73037","date: 2003-12-01<br />.value: 12.74787","date: 2004-01-01<br />.value: 12.73031","date: 2004-02-01<br />.value: 12.61287","date: 2004-03-01<br />.value: 12.67405","date: 2004-04-01<br />.value: 12.69428","date: 2004-05-01<br />.value: 12.63165","date: 2004-06-01<br />.value: 12.65358","date: 2004-07-01<br />.value: 12.73334","date: 2004-08-01<br />.value: 12.72837","date: 2004-09-01<br />.value: 12.73958","date: 2004-10-01<br />.value: 12.77742","date: 2004-11-01<br />.value: 12.69152","date: 2004-12-01<br />.value: 12.69490","date: 2005-01-01<br />.value: 12.64818","date: 2005-02-01<br />.value: 12.56942","date: 2005-03-01<br />.value: 12.65619","date: 2005-04-01<br />.value: 12.63839","date: 2005-05-01<br />.value: 12.60776","date: 2005-06-01<br />.value: 12.58661","date: 2005-07-01<br />.value: 12.68714","date: 2005-08-01<br />.value: 12.66299","date: 2005-09-01<br />.value: 12.70472","date: 2005-10-01<br />.value: 12.72643","date: 2005-11-01<br />.value: 12.67395","date: 2005-12-01<br />.value: 12.69166","date: 2006-01-01<br />.value: 12.65523","date: 2006-02-01<br />.value: 12.53487","date: 2006-03-01<br />.value: 12.63257","date: 2006-04-01<br />.value: 12.66207","date: 2006-05-01<br />.value: 12.60440","date: 2006-06-01<br />.value: 12.60344","date: 2006-07-01<br />.value: 12.73133","date: 2006-08-01<br />.value: 12.66016","date: 2006-09-01<br />.value: 12.68987","date: 2006-10-01<br />.value: 12.78448","date: 2006-11-01<br />.value: 12.72743","date: 2006-12-01<br />.value: 12.74540","date: 2007-01-01<br />.value: 12.68487","date: 2007-02-01<br />.value: 12.58763","date: 2007-03-01<br />.value: 12.68612","date: 2007-04-01<br />.value: 12.72672","date: 2007-05-01<br />.value: 12.68202","date: 2007-06-01<br />.value: 12.68680","date: 2007-07-01<br />.value: 12.79536","date: 2007-08-01<br />.value: 12.76834","date: 2007-09-01<br />.value: 12.75633","date: 2007-10-01<br />.value: 12.83954","date: 2007-11-01<br />.value: 12.76593","date: 2007-12-01<br />.value: 12.83031","date: 2008-01-01<br />.value: 12.76709","date: 2008-02-01<br />.value: 12.71728","date: 2008-03-01<br />.value: 12.82152","date: 2008-04-01<br />.value: 12.78682","date: 2008-05-01<br />.value: 12.75445","date: 2008-06-01<br />.value: 12.70786","date: 2008-07-01<br />.value: 12.84322","date: 2008-08-01<br />.value: 12.78903","date: 2008-09-01<br />.value: 12.78057","date: 2008-10-01<br />.value: 12.91587","date: 2008-11-01<br />.value: 12.76044","date: 2008-12-01<br />.value: 12.82604","date: 2009-01-01<br />.value: 12.80679","date: 2009-02-01<br />.value: 12.66239","date: 2009-03-01<br />.value: 12.76428","date: 2009-04-01<br />.value: 12.79159","date: 2009-05-01<br />.value: 12.70412","date: 2009-06-01<br />.value: 12.69499","date: 2009-07-01<br />.value: 12.80821","date: 2009-08-01<br />.value: 12.77562","date: 2009-09-01<br />.value: 12.81733","date: 2009-10-01<br />.value: 12.91681","date: 2009-11-01<br />.value: 12.81935","date: 2009-12-01<br />.value: 12.86848","date: 2010-01-01<br />.value: 12.74971","date: 2010-02-01<br />.value: 12.74725","date: 2010-03-01<br />.value: 12.78775","date: 2010-04-01<br />.value: 12.79566","date: 2010-05-01<br />.value: 12.72825","date: 2010-06-01<br />.value: 12.73047","date: 2010-07-01<br />.value: 12.86675","date: 2010-08-01<br />.value: 12.82531","date: 2010-09-01<br />.value: 12.83733","date: 2010-10-01<br />.value: 12.90675","date: 2010-11-01<br />.value: 12.85838","date: 2010-12-01<br />.value: 12.88470","date: 2011-01-01<br />.value: 12.70997","date: 2011-02-01<br />.value: 12.72625","date: 2011-03-01<br />.value: 12.82272","date: 2011-04-01<br />.value: 12.83897","date: 2011-05-01<br />.value: 12.80327","date: 2011-06-01<br />.value: 12.77989","date: 2011-07-01<br />.value: 12.87990","date: 2011-08-01<br />.value: 12.84272","date: 2011-09-01<br />.value: 12.83696","date: 2011-10-01<br />.value: 12.83331","date: 2011-11-01<br />.value: 12.82769","date: 2011-12-01<br />.value: 12.84784","date: 2012-01-01<br />.value: 12.73599","date: 2012-02-01<br />.value: 12.70237","date: 2012-03-01<br />.value: 12.81131","date: 2012-04-01<br />.value: 12.78086","date: 2012-05-01<br />.value: 12.76268","date: 2012-06-01<br />.value: 12.73869","date: 2012-07-01<br />.value: 12.84151","date: 2012-08-01<br />.value: 12.84101","date: 2012-09-01<br />.value: 12.86093","date: 2012-10-01<br />.value: 12.89878","date: 2012-11-01<br />.value: 12.85763","date: 2012-12-01<br />.value: 12.86788","date: 2013-01-01<br />.value: 12.78239","date: 2013-02-01<br />.value: 12.70074","date: 2013-03-01<br />.value: 12.79515","date: 2013-04-01<br />.value: 12.79300","date: 2013-05-01<br />.value: 12.77871","date: 2013-06-01<br />.value: 12.78454","date: 2013-07-01<br />.value: 12.86488","date: 2013-08-01<br />.value: 12.84391","date: 2013-09-01<br />.value: 12.81543","date: 2013-10-01<br />.value: 12.90155","date: 2013-11-01<br />.value: 12.85139","date: 2013-12-01<br />.value: 12.88595","date: 2014-01-01<br />.value: 12.77767","date: 2014-02-01<br />.value: 12.70563","date: 2014-03-01<br />.value: 12.82457","date: 2014-04-01<br />.value: 12.82135","date: 2014-05-01<br />.value: 12.80221","date: 2014-06-01<br />.value: 12.78353","date: 2014-07-01<br />.value: 12.88031","date: 2014-08-01<br />.value: 12.86038","date: 2014-09-01<br />.value: 12.83505","date: 2014-10-01<br />.value: 12.91041","date: 2014-11-01<br />.value: 12.80793","date: 2014-12-01<br />.value: 12.85199","date: 2015-01-01<br />.value: 12.72885","date: 2015-02-01<br />.value: 12.69579","date: 2015-03-01<br />.value: 12.82820","date: 2015-04-01<br />.value: 12.80198","date: 2015-05-01<br />.value: 12.78358","date: 2015-06-01<br />.value: 12.76268","date: 2015-07-01<br />.value: 12.91445","date: 2015-08-01<br />.value: 12.84884","date: 2015-09-01<br />.value: 12.87519","date: 2015-10-01<br />.value: 12.90389","date: 2015-11-01<br />.value: 12.87683","date: 2015-12-01<br />.value: 12.90283","date: 2016-01-01<br />.value: 12.79937","date: 2016-02-01<br />.value: 12.77117","date: 2016-03-01<br />.value: 12.87630","date: 2016-04-01<br />.value: 12.86325","date: 2016-05-01<br />.value: 12.83257","date: 2016-06-01<br />.value: 12.82575","date: 2016-07-01<br />.value: 12.94826","date: 2016-08-01<br />.value: 12.87687","date: 2016-09-01<br />.value: 12.90762","date: 2016-10-01<br />.value: 12.90916","date: 2016-11-01<br />.value: 12.88967","date: 2016-12-01<br />.value: 12.91587","date: 2017-01-01<br />.value: 12.82723","date: 2017-02-01<br />.value: 12.76497","date: 2017-03-01<br />.value: 12.89815","date: 2017-04-01<br />.value: 12.85844","date: 2017-05-01<br />.value: 12.86427","date: 2017-06-01<br />.value: 12.85420","date: 2017-07-01<br />.value: 12.95882","date: 2017-08-01<br />.value: 12.89582","date: 2017-09-01<br />.value: 12.90892","date: 2017-10-01<br />.value: 12.94566","date: 2017-11-01<br />.value: 12.93359","date: 2017-12-01<br />.value: 12.92867","date: 2018-01-01<br />.value: 12.80653","date: 2018-02-01<br />.value: 12.80832","date: 2018-03-01<br />.value: 12.93666","date: 2018-04-01<br />.value: 12.87273","date: 2018-05-01<br />.value: 12.89248","date: 2018-06-01<br />.value: 12.85817","date: 2018-07-01<br />.value: 12.98356"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[11.5586155908873,11.2686604170339,11.3554877219987,11.3925979448572,11.2856860369937,11.4052734369133,11.6315437073,11.5233410341179,11.5796023232345,11.6750443144467,11.4769355272371,11.6059512192786,11.6697497104907,11.407153753672,11.4839599866772,11.4865301536107,11.406074950927,11.4174602731522,11.5336296465285,11.3820533903659,11.5439589075504,11.7140933095605,11.6568093352988,11.753350821919,11.8495476903426,11.5833186888393,11.6151751469986,11.605285843841,11.6717224767172,11.7086238188058,11.8760535425816,11.8461854048292,11.8156414595548,11.8995406917756,11.820314571914,11.8532474247462,12.0437066455146,11.8296322164626,11.9216053999803,11.884551088442,11.8438178775729,11.8086277890482,12.0011066272517,11.8907658326663,11.954201633814,12.0245207924383,11.9211866603804,11.9946476627951,12.0940119559767,11.8249805867624,11.8911701014763,11.9596796584947,11.8247829431132,11.8323532669822,12.055772874759,11.9566813668111,12.0069324449297,12.1053734711433,12.0412923375129,12.0785858048806,12.2025113115016,12.0147123622455,12.0874523844984,12.0761063190701,11.9943511138809,11.9433368120395,12.078546045143,12.0825990744454,12.1071248576445,12.2087241272437,12.1420726460305,12.1201007281152,12.1916643426693,12.1175146185484,12.1656828492655,12.0387244267047,12.0696169813884,11.9838723991639,12.1491847833231,12.0547089118915,12.0414868757064,12.1353658060389,12.1279002710259,12.1384520463325,12.2518009842352,11.9930403032167,12.0840010521417,12.1026491415423,12.0132521674348,11.931379187959,12.0953868646724,12.0753088481498,12.122576899643,12.157060956826,12.112596782338,12.139195391688,12.2484470344625,12.2012108461133,12.2454231579515,12.2308920793467,12.1803855385942,12.112459524906,12.2415604384597,12.1593635644045,12.1934077836692,12.2207494129262,12.1921664003556,12.2617249257201,12.3792609542346,12.0756108226666,12.1496028180896,12.1348880883395,12.0542434356718,11.9849021464676,12.1418327464673,12.0645148415605,12.1150422941805,12.1592325786844,12.1334051738189,12.2232885969296,12.313782898392,12.1002120048307,12.1670355155245,12.1770762850886,12.040590506531,12.034655419832,12.2126459936616,12.179877529747,12.3099280290447,12.3488040876172,12.3204632667836,12.3900553219008,12.4029995234631,12.1881174107531,12.2544198544666,12.2708767563957,12.1049199313125,12.1249439316987,12.2954241988367,12.2142540860863,12.2891215991456,12.391476945784,12.2686530007116,12.3858158813093,12.4696131410435,12.192409731561,12.2735817501126,12.257278936133,12.1632329919041,12.117099345227,12.295849362108,12.217180721779,12.285983036758,12.4167872768253,12.2863291764957,12.3768317810846,12.4152835872342,12.1536524005828,12.2518439718763,12.289774803088,12.178567832408,12.1392328117361,12.3196557627523,12.2223346986588,12.3438761496774,12.4132819178319,12.334206371929,12.402547733546,12.5026413645116,12.2679388492059,12.3280557374775,12.3297449718868,12.2142987184274,12.1700205071377,12.3605518428182,12.2571506667481,12.320316090888,12.3902799232343,12.3142496910413,12.4062136552791,12.4779949323771,12.242211692146,12.3167728794835,12.3663360332049,12.244663352579,12.2113387552027,12.37708465649,12.2422792052991,12.3243400083257,12.4035742337634,12.3766547302452,12.4417177260673,12.5018828450754,12.2585844472361,12.3522962748629,12.3986786357746,12.2089634630878,12.1736992359951,12.339877750692],"text":["date: 2002-01-01<br />.value: 11.55862","date: 2002-02-01<br />.value: 11.26866","date: 2002-03-01<br />.value: 11.35549","date: 2002-04-01<br />.value: 11.39260","date: 2002-05-01<br />.value: 11.28569","date: 2002-06-01<br />.value: 11.40527","date: 2002-07-01<br />.value: 11.63154","date: 2002-08-01<br />.value: 11.52334","date: 2002-09-01<br />.value: 11.57960","date: 2002-10-01<br />.value: 11.67504","date: 2002-11-01<br />.value: 11.47694","date: 2002-12-01<br />.value: 11.60595","date: 2003-01-01<br />.value: 11.66975","date: 2003-02-01<br />.value: 11.40715","date: 2003-03-01<br />.value: 11.48396","date: 2003-04-01<br />.value: 11.48653","date: 2003-05-01<br />.value: 11.40607","date: 2003-06-01<br />.value: 11.41746","date: 2003-07-01<br />.value: 11.53363","date: 2003-08-01<br />.value: 11.38205","date: 2003-09-01<br />.value: 11.54396","date: 2003-10-01<br />.value: 11.71409","date: 2003-11-01<br />.value: 11.65681","date: 2003-12-01<br />.value: 11.75335","date: 2004-01-01<br />.value: 11.84955","date: 2004-02-01<br />.value: 11.58332","date: 2004-03-01<br />.value: 11.61518","date: 2004-04-01<br />.value: 11.60529","date: 2004-05-01<br />.value: 11.67172","date: 2004-06-01<br />.value: 11.70862","date: 2004-07-01<br />.value: 11.87605","date: 2004-08-01<br />.value: 11.84619","date: 2004-09-01<br />.value: 11.81564","date: 2004-10-01<br />.value: 11.89954","date: 2004-11-01<br />.value: 11.82031","date: 2004-12-01<br />.value: 11.85325","date: 2005-01-01<br />.value: 12.04371","date: 2005-02-01<br />.value: 11.82963","date: 2005-03-01<br />.value: 11.92161","date: 2005-04-01<br />.value: 11.88455","date: 2005-05-01<br />.value: 11.84382","date: 2005-06-01<br />.value: 11.80863","date: 2005-07-01<br />.value: 12.00111","date: 2005-08-01<br />.value: 11.89077","date: 2005-09-01<br />.value: 11.95420","date: 2005-10-01<br />.value: 12.02452","date: 2005-11-01<br />.value: 11.92119","date: 2005-12-01<br />.value: 11.99465","date: 2006-01-01<br />.value: 12.09401","date: 2006-02-01<br />.value: 11.82498","date: 2006-03-01<br />.value: 11.89117","date: 2006-04-01<br />.value: 11.95968","date: 2006-05-01<br />.value: 11.82478","date: 2006-06-01<br />.value: 11.83235","date: 2006-07-01<br />.value: 12.05577","date: 2006-08-01<br />.value: 11.95668","date: 2006-09-01<br />.value: 12.00693","date: 2006-10-01<br />.value: 12.10537","date: 2006-11-01<br />.value: 12.04129","date: 2006-12-01<br />.value: 12.07859","date: 2007-01-01<br />.value: 12.20251","date: 2007-02-01<br />.value: 12.01471","date: 2007-03-01<br />.value: 12.08745","date: 2007-04-01<br />.value: 12.07611","date: 2007-05-01<br />.value: 11.99435","date: 2007-06-01<br />.value: 11.94334","date: 2007-07-01<br />.value: 12.07855","date: 2007-08-01<br />.value: 12.08260","date: 2007-09-01<br />.value: 12.10712","date: 2007-10-01<br />.value: 12.20872","date: 2007-11-01<br />.value: 12.14207","date: 2007-12-01<br />.value: 12.12010","date: 2008-01-01<br />.value: 12.19166","date: 2008-02-01<br />.value: 12.11751","date: 2008-03-01<br />.value: 12.16568","date: 2008-04-01<br />.value: 12.03872","date: 2008-05-01<br />.value: 12.06962","date: 2008-06-01<br />.value: 11.98387","date: 2008-07-01<br />.value: 12.14918","date: 2008-08-01<br />.value: 12.05471","date: 2008-09-01<br />.value: 12.04149","date: 2008-10-01<br />.value: 12.13537","date: 2008-11-01<br />.value: 12.12790","date: 2008-12-01<br />.value: 12.13845","date: 2009-01-01<br />.value: 12.25180","date: 2009-02-01<br />.value: 11.99304","date: 2009-03-01<br />.value: 12.08400","date: 2009-04-01<br />.value: 12.10265","date: 2009-05-01<br />.value: 12.01325","date: 2009-06-01<br />.value: 11.93138","date: 2009-07-01<br />.value: 12.09539","date: 2009-08-01<br />.value: 12.07531","date: 2009-09-01<br />.value: 12.12258","date: 2009-10-01<br />.value: 12.15706","date: 2009-11-01<br />.value: 12.11260","date: 2009-12-01<br />.value: 12.13920","date: 2010-01-01<br />.value: 12.24845","date: 2010-02-01<br />.value: 12.20121","date: 2010-03-01<br />.value: 12.24542","date: 2010-04-01<br />.value: 12.23089","date: 2010-05-01<br />.value: 12.18039","date: 2010-06-01<br />.value: 12.11246","date: 2010-07-01<br />.value: 12.24156","date: 2010-08-01<br />.value: 12.15936","date: 2010-09-01<br />.value: 12.19341","date: 2010-10-01<br />.value: 12.22075","date: 2010-11-01<br />.value: 12.19217","date: 2010-12-01<br />.value: 12.26172","date: 2011-01-01<br />.value: 12.37926","date: 2011-02-01<br />.value: 12.07561","date: 2011-03-01<br />.value: 12.14960","date: 2011-04-01<br />.value: 12.13489","date: 2011-05-01<br />.value: 12.05424","date: 2011-06-01<br />.value: 11.98490","date: 2011-07-01<br />.value: 12.14183","date: 2011-08-01<br />.value: 12.06451","date: 2011-09-01<br />.value: 12.11504","date: 2011-10-01<br />.value: 12.15923","date: 2011-11-01<br />.value: 12.13341","date: 2011-12-01<br />.value: 12.22329","date: 2012-01-01<br />.value: 12.31378","date: 2012-02-01<br />.value: 12.10021","date: 2012-03-01<br />.value: 12.16704","date: 2012-04-01<br />.value: 12.17708","date: 2012-05-01<br />.value: 12.04059","date: 2012-06-01<br />.value: 12.03466","date: 2012-07-01<br />.value: 12.21265","date: 2012-08-01<br />.value: 12.17988","date: 2012-09-01<br />.value: 12.30993","date: 2012-10-01<br />.value: 12.34880","date: 2012-11-01<br />.value: 12.32046","date: 2012-12-01<br />.value: 12.39006","date: 2013-01-01<br />.value: 12.40300","date: 2013-02-01<br />.value: 12.18812","date: 2013-03-01<br />.value: 12.25442","date: 2013-04-01<br />.value: 12.27088","date: 2013-05-01<br />.value: 12.10492","date: 2013-06-01<br />.value: 12.12494","date: 2013-07-01<br />.value: 12.29542","date: 2013-08-01<br />.value: 12.21425","date: 2013-09-01<br />.value: 12.28912","date: 2013-10-01<br />.value: 12.39148","date: 2013-11-01<br />.value: 12.26865","date: 2013-12-01<br />.value: 12.38582","date: 2014-01-01<br />.value: 12.46961","date: 2014-02-01<br />.value: 12.19241","date: 2014-03-01<br />.value: 12.27358","date: 2014-04-01<br />.value: 12.25728","date: 2014-05-01<br />.value: 12.16323","date: 2014-06-01<br />.value: 12.11710","date: 2014-07-01<br />.value: 12.29585","date: 2014-08-01<br />.value: 12.21718","date: 2014-09-01<br />.value: 12.28598","date: 2014-10-01<br />.value: 12.41679","date: 2014-11-01<br />.value: 12.28633","date: 2014-12-01<br />.value: 12.37683","date: 2015-01-01<br />.value: 12.41528","date: 2015-02-01<br />.value: 12.15365","date: 2015-03-01<br />.value: 12.25184","date: 2015-04-01<br />.value: 12.28977","date: 2015-05-01<br />.value: 12.17857","date: 2015-06-01<br />.value: 12.13923","date: 2015-07-01<br />.value: 12.31966","date: 2015-08-01<br />.value: 12.22233","date: 2015-09-01<br />.value: 12.34388","date: 2015-10-01<br />.value: 12.41328","date: 2015-11-01<br />.value: 12.33421","date: 2015-12-01<br />.value: 12.40255","date: 2016-01-01<br />.value: 12.50264","date: 2016-02-01<br />.value: 12.26794","date: 2016-03-01<br />.value: 12.32806","date: 2016-04-01<br />.value: 12.32974","date: 2016-05-01<br />.value: 12.21430","date: 2016-06-01<br />.value: 12.17002","date: 2016-07-01<br />.value: 12.36055","date: 2016-08-01<br />.value: 12.25715","date: 2016-09-01<br />.value: 12.32032","date: 2016-10-01<br />.value: 12.39028","date: 2016-11-01<br />.value: 12.31425","date: 2016-12-01<br />.value: 12.40621","date: 2017-01-01<br />.value: 12.47799","date: 2017-02-01<br />.value: 12.24221","date: 2017-03-01<br />.value: 12.31677","date: 2017-04-01<br />.value: 12.36634","date: 2017-05-01<br />.value: 12.24466","date: 2017-06-01<br />.value: 12.21134","date: 2017-07-01<br />.value: 12.37708","date: 2017-08-01<br />.value: 12.24228","date: 2017-09-01<br />.value: 12.32434","date: 2017-10-01<br />.value: 12.40357","date: 2017-11-01<br />.value: 12.37665","date: 2017-12-01<br />.value: 12.44172","date: 2018-01-01<br />.value: 12.50188","date: 2018-02-01<br />.value: 12.25858","date: 2018-03-01<br />.value: 12.35230","date: 2018-04-01<br />.value: 12.39868","date: 2018-05-01<br />.value: 12.20896","date: 2018-06-01<br />.value: 12.17370","date: 2018-07-01<br />.value: 12.33988"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y6","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[10.838187784893,10.7342857533899,10.9000486584736,10.7156614395177,10.6652742088128,10.8121895627616,10.9342135001438,10.9757900884139,11.0168899266769,11.029277169209,10.8321415433937,10.9613646484722,11.1049421889369,10.8359665446068,10.9451766938046,10.9267834468948,10.8296296004607,10.8764988246198,11.0012661604557,10.9594880515113,11.1449439852337,11.1632403210767,11.2305758165076,11.2266557280363,11.3646226529846,11.0646207032359,11.1478870732702,11.0647616023289,11.1122986335023,11.264143541476,11.2901318524203,11.300734217614,11.3498416700837,11.3855692523292,11.2588071093566,11.2748586130606,11.4517413116452,11.2691326780882,11.4350828353491,11.4218074856014,11.3370113366929,11.2994970683426,11.4647745964078,11.4326585655009,11.4957793061353,11.5222023017504,11.4773915472269,11.5419404300388,11.677142451952,11.368130880067,11.4484189433207,11.4373071220113,11.3580245037523,11.4929370204111,11.5785071917795,11.5722881143637,11.651939301497,11.69121389965,11.5847064460648,11.5893215317236,11.6655006185934,11.4870639194439,11.6190137157646,11.5051956669083,11.4414616861617,11.4426639319296,11.5615822869166,11.5961814660209,11.6828876247733,11.708113887471,11.6842282036151,11.8652077754051,11.9630133355207,11.8364137740331,11.9600186426329,11.7761432112723,11.8247097318474,11.8039668884784,11.8907178577229,11.8484401003806,11.8242190780597,11.8402488351941,11.7617601545723,11.7919199090244,11.9689252464524,11.6732144098996,11.8121778425367,11.8028225823976,11.7331848611046,11.6817986632732,11.7826701195407,11.819718749275,11.8945554260926,11.9219575372245,11.8251123274968,11.7641587788503,11.8784778872339,11.7504372963844,11.8785542037811,11.8528132903926,11.7471197315915,11.8125410489865,11.9748780211304,11.9081112547815,12.0104226585249,11.9885010420428,11.9756778675018,11.9790779380245,12.1444631638985,11.6995129099112,11.8112358562112,11.8358636712369,11.6850367404602,11.6431990567194,11.8634273950031,11.7586129807193,11.8265822545942,11.9408237244385,11.8876495389427,11.9292909475467,12.0290669345585,11.776942209494,11.9096457819368,11.8727863284734,11.7198664609457,11.7722080629003,11.9707426401017,11.8974937473654,12.0103132034287,12.0485646696194,11.9410257861202,11.9486546281888,11.9667616018038,11.6744744241989,11.8433221398295,11.8401407017573,11.6447691842749,11.7007485273588,11.877401898001,11.826121763615,11.8904985143811,11.9896936628438,11.8616367832495,11.9715521211926,12.030581706857,11.6921422068107,11.8302512875117,11.8732118796907,11.7445053303052,11.7861079242582,11.9344082687716,11.8987591311292,11.9483699988196,12.0267366275766,11.8901831240144,11.991194838633,12.0654015399914,11.6983920709083,11.8447225041531,11.8555643628771,11.7330966030379,11.7926761670957,12.007139883431,11.9299765292632,12.0322429307689,12.0647164329814,11.9384350012038,12.0471062219338,12.1397351739177,11.8394050841299,11.9643831769289,11.931208076789,11.8305570400293,11.8872575991451,12.0634543777387,11.9978115490553,12.1041174363404,12.1380453791251,12.0219634919367,12.0949064204198,12.1822511534042,11.8117180860513,11.9380101770909,12.0431124422148,11.8676304698525,11.9051769902721,12.1156609485449,12.0035953190926,12.0927023593579,12.1708443520527,12.0384584040084,12.1126077621187,12.2269922957827,11.8382573057489,11.9973126530832,12.0476043247584,11.8867967014872,11.9330886912388,12.1496980420777],"text":["date: 2002-01-01<br />.value: 10.83819","date: 2002-02-01<br />.value: 10.73429","date: 2002-03-01<br />.value: 10.90005","date: 2002-04-01<br />.value: 10.71566","date: 2002-05-01<br />.value: 10.66527","date: 2002-06-01<br />.value: 10.81219","date: 2002-07-01<br />.value: 10.93421","date: 2002-08-01<br />.value: 10.97579","date: 2002-09-01<br />.value: 11.01689","date: 2002-10-01<br />.value: 11.02928","date: 2002-11-01<br />.value: 10.83214","date: 2002-12-01<br />.value: 10.96136","date: 2003-01-01<br />.value: 11.10494","date: 2003-02-01<br />.value: 10.83597","date: 2003-03-01<br />.value: 10.94518","date: 2003-04-01<br />.value: 10.92678","date: 2003-05-01<br />.value: 10.82963","date: 2003-06-01<br />.value: 10.87650","date: 2003-07-01<br />.value: 11.00127","date: 2003-08-01<br />.value: 10.95949","date: 2003-09-01<br />.value: 11.14494","date: 2003-10-01<br />.value: 11.16324","date: 2003-11-01<br />.value: 11.23058","date: 2003-12-01<br />.value: 11.22666","date: 2004-01-01<br />.value: 11.36462","date: 2004-02-01<br />.value: 11.06462","date: 2004-03-01<br />.value: 11.14789","date: 2004-04-01<br />.value: 11.06476","date: 2004-05-01<br />.value: 11.11230","date: 2004-06-01<br />.value: 11.26414","date: 2004-07-01<br />.value: 11.29013","date: 2004-08-01<br />.value: 11.30073","date: 2004-09-01<br />.value: 11.34984","date: 2004-10-01<br />.value: 11.38557","date: 2004-11-01<br />.value: 11.25881","date: 2004-12-01<br />.value: 11.27486","date: 2005-01-01<br />.value: 11.45174","date: 2005-02-01<br />.value: 11.26913","date: 2005-03-01<br />.value: 11.43508","date: 2005-04-01<br />.value: 11.42181","date: 2005-05-01<br />.value: 11.33701","date: 2005-06-01<br />.value: 11.29950","date: 2005-07-01<br />.value: 11.46477","date: 2005-08-01<br />.value: 11.43266","date: 2005-09-01<br />.value: 11.49578","date: 2005-10-01<br />.value: 11.52220","date: 2005-11-01<br />.value: 11.47739","date: 2005-12-01<br />.value: 11.54194","date: 2006-01-01<br />.value: 11.67714","date: 2006-02-01<br />.value: 11.36813","date: 2006-03-01<br />.value: 11.44842","date: 2006-04-01<br />.value: 11.43731","date: 2006-05-01<br />.value: 11.35802","date: 2006-06-01<br />.value: 11.49294","date: 2006-07-01<br />.value: 11.57851","date: 2006-08-01<br />.value: 11.57229","date: 2006-09-01<br />.value: 11.65194","date: 2006-10-01<br />.value: 11.69121","date: 2006-11-01<br />.value: 11.58471","date: 2006-12-01<br />.value: 11.58932","date: 2007-01-01<br />.value: 11.66550","date: 2007-02-01<br />.value: 11.48706","date: 2007-03-01<br />.value: 11.61901","date: 2007-04-01<br />.value: 11.50520","date: 2007-05-01<br />.value: 11.44146","date: 2007-06-01<br />.value: 11.44266","date: 2007-07-01<br />.value: 11.56158","date: 2007-08-01<br />.value: 11.59618","date: 2007-09-01<br />.value: 11.68289","date: 2007-10-01<br />.value: 11.70811","date: 2007-11-01<br />.value: 11.68423","date: 2007-12-01<br />.value: 11.86521","date: 2008-01-01<br />.value: 11.96301","date: 2008-02-01<br />.value: 11.83641","date: 2008-03-01<br />.value: 11.96002","date: 2008-04-01<br />.value: 11.77614","date: 2008-05-01<br />.value: 11.82471","date: 2008-06-01<br />.value: 11.80397","date: 2008-07-01<br />.value: 11.89072","date: 2008-08-01<br />.value: 11.84844","date: 2008-09-01<br />.value: 11.82422","date: 2008-10-01<br />.value: 11.84025","date: 2008-11-01<br />.value: 11.76176","date: 2008-12-01<br />.value: 11.79192","date: 2009-01-01<br />.value: 11.96893","date: 2009-02-01<br />.value: 11.67321","date: 2009-03-01<br />.value: 11.81218","date: 2009-04-01<br />.value: 11.80282","date: 2009-05-01<br />.value: 11.73318","date: 2009-06-01<br />.value: 11.68180","date: 2009-07-01<br />.value: 11.78267","date: 2009-08-01<br />.value: 11.81972","date: 2009-09-01<br />.value: 11.89456","date: 2009-10-01<br />.value: 11.92196","date: 2009-11-01<br />.value: 11.82511","date: 2009-12-01<br />.value: 11.76416","date: 2010-01-01<br />.value: 11.87848","date: 2010-02-01<br />.value: 11.75044","date: 2010-03-01<br />.value: 11.87855","date: 2010-04-01<br />.value: 11.85281","date: 2010-05-01<br />.value: 11.74712","date: 2010-06-01<br />.value: 11.81254","date: 2010-07-01<br />.value: 11.97488","date: 2010-08-01<br />.value: 11.90811","date: 2010-09-01<br />.value: 12.01042","date: 2010-10-01<br />.value: 11.98850","date: 2010-11-01<br />.value: 11.97568","date: 2010-12-01<br />.value: 11.97908","date: 2011-01-01<br />.value: 12.14446","date: 2011-02-01<br />.value: 11.69951","date: 2011-03-01<br />.value: 11.81124","date: 2011-04-01<br />.value: 11.83586","date: 2011-05-01<br />.value: 11.68504","date: 2011-06-01<br />.value: 11.64320","date: 2011-07-01<br />.value: 11.86343","date: 2011-08-01<br />.value: 11.75861","date: 2011-09-01<br />.value: 11.82658","date: 2011-10-01<br />.value: 11.94082","date: 2011-11-01<br />.value: 11.88765","date: 2011-12-01<br />.value: 11.92929","date: 2012-01-01<br />.value: 12.02907","date: 2012-02-01<br />.value: 11.77694","date: 2012-03-01<br />.value: 11.90965","date: 2012-04-01<br />.value: 11.87279","date: 2012-05-01<br />.value: 11.71987","date: 2012-06-01<br />.value: 11.77221","date: 2012-07-01<br />.value: 11.97074","date: 2012-08-01<br />.value: 11.89749","date: 2012-09-01<br />.value: 12.01031","date: 2012-10-01<br />.value: 12.04856","date: 2012-11-01<br />.value: 11.94103","date: 2012-12-01<br />.value: 11.94865","date: 2013-01-01<br />.value: 11.96676","date: 2013-02-01<br />.value: 11.67447","date: 2013-03-01<br />.value: 11.84332","date: 2013-04-01<br />.value: 11.84014","date: 2013-05-01<br />.value: 11.64477","date: 2013-06-01<br />.value: 11.70075","date: 2013-07-01<br />.value: 11.87740","date: 2013-08-01<br />.value: 11.82612","date: 2013-09-01<br />.value: 11.89050","date: 2013-10-01<br />.value: 11.98969","date: 2013-11-01<br />.value: 11.86164","date: 2013-12-01<br />.value: 11.97155","date: 2014-01-01<br />.value: 12.03058","date: 2014-02-01<br />.value: 11.69214","date: 2014-03-01<br />.value: 11.83025","date: 2014-04-01<br />.value: 11.87321","date: 2014-05-01<br />.value: 11.74451","date: 2014-06-01<br />.value: 11.78611","date: 2014-07-01<br />.value: 11.93441","date: 2014-08-01<br />.value: 11.89876","date: 2014-09-01<br />.value: 11.94837","date: 2014-10-01<br />.value: 12.02674","date: 2014-11-01<br />.value: 11.89018","date: 2014-12-01<br />.value: 11.99119","date: 2015-01-01<br />.value: 12.06540","date: 2015-02-01<br />.value: 11.69839","date: 2015-03-01<br />.value: 11.84472","date: 2015-04-01<br />.value: 11.85556","date: 2015-05-01<br />.value: 11.73310","date: 2015-06-01<br />.value: 11.79268","date: 2015-07-01<br />.value: 12.00714","date: 2015-08-01<br />.value: 11.92998","date: 2015-09-01<br />.value: 12.03224","date: 2015-10-01<br />.value: 12.06472","date: 2015-11-01<br />.value: 11.93844","date: 2015-12-01<br />.value: 12.04711","date: 2016-01-01<br />.value: 12.13974","date: 2016-02-01<br />.value: 11.83941","date: 2016-03-01<br />.value: 11.96438","date: 2016-04-01<br />.value: 11.93121","date: 2016-05-01<br />.value: 11.83056","date: 2016-06-01<br />.value: 11.88726","date: 2016-07-01<br />.value: 12.06345","date: 2016-08-01<br />.value: 11.99781","date: 2016-09-01<br />.value: 12.10412","date: 2016-10-01<br />.value: 12.13805","date: 2016-11-01<br />.value: 12.02196","date: 2016-12-01<br />.value: 12.09491","date: 2017-01-01<br />.value: 12.18225","date: 2017-02-01<br />.value: 11.81172","date: 2017-03-01<br />.value: 11.93801","date: 2017-04-01<br />.value: 12.04311","date: 2017-05-01<br />.value: 11.86763","date: 2017-06-01<br />.value: 11.90518","date: 2017-07-01<br />.value: 12.11566","date: 2017-08-01<br />.value: 12.00360","date: 2017-09-01<br />.value: 12.09270","date: 2017-10-01<br />.value: 12.17084","date: 2017-11-01<br />.value: 12.03846","date: 2017-12-01<br />.value: 12.11261","date: 2018-01-01<br />.value: 12.22699","date: 2018-02-01<br />.value: 11.83826","date: 2018-03-01<br />.value: 11.99731","date: 2018-04-01<br />.value: 12.04760","date: 2018-05-01<br />.value: 11.88680","date: 2018-06-01<br />.value: 11.93309","date: 2018-07-01<br />.value: 12.14970"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y7","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[11.5180622490754,11.3483573785602,11.3323264237941,11.2247365974529,11.185226629268,11.09174247562,11.3088980308482,11.250911139267,11.2939357744185,11.4084534433735,11.26059766626,11.3966388091788,11.4292285889484,11.2376198209198,11.3712582086367,11.3531087635163,11.3581996197671,11.2817875436636,11.3915371882352,11.324702529243,11.4046384490626,11.5045000708099,11.4484616077119,11.606333837485,11.6182669804476,11.4110366936057,11.5503753804171,11.4954842473503,11.3992863314792,11.3578960658489,11.5270847475281,11.4423313121163,11.4714574284765,11.5954358945427,11.5108332778723,11.5743591711543,11.5902845750146,11.4340012981632,11.5837193802703,11.5775983520803,11.4825074937487,11.4295655949253,11.5551033398691,11.5114944415444,11.7077024630315,11.6258433516253,11.5775421080562,11.7121696889601,11.7172775575849,11.5017836245514,11.6496654545377,11.6946885325048,11.620532455413,11.5290940461318,11.7261479650026,11.651773946789,11.7608318703103,11.8833159197949,11.8000198647763,11.8583786801719,11.8744177866892,11.6103243709574,11.8208512438991,11.8226282910913,11.6309395850357,11.6535826586622,11.8214904633384,11.7881224217144,11.7998097192497,11.9136527003975,11.8556708413845,11.9908662614004,12.0029645375456,11.8422507946137,11.9416447532467,11.9427319044646,11.8342115448358,11.8311173436266,11.9146435617915,11.828896115795,11.8359650287031,11.9527984409988,11.8850130220214,11.9973557773767,12.0134582992508,11.7591368950752,11.9422698468683,11.924856291862,11.8162914001229,11.7653403985841,11.9087980448729,11.8093640866945,11.8694593989675,11.9086701491279,11.8586971841966,11.901698702358,11.8829499065384,11.7380191136081,11.9073700697949,11.8704250687835,11.7708954734365,11.7835096988845,11.909591978722,11.8529414152148,11.8875326606919,11.9622989996632,11.9505479378774,12.0332240779572,12.0255754236249,11.7952507152353,11.9991161244841,11.9965545940477,11.9641093587233,11.8606696481175,11.9683102578294,11.9300490152356,11.9108488724784,11.9542209300792,11.9532814130248,12.0064014504011,12.0646761179482,11.8968740779494,12.042258760292,12.0479206377234,12.0011741365572,12.0286013073861,12.158089655508,12.0875931173792,12.1043886963448,12.1993702344705,12.1620319348296,12.2094170467806,12.203785030934,11.9730996935504,12.1672746430222,12.1528089902032,12.0428652437956,12.0258688447072,12.2117763484469,12.1024716920456,12.1196102087544,12.1778994828466,12.0865286853559,12.186058695907,12.1973194478271,11.9956231822748,12.1185083884578,12.1723710738572,12.0061938586479,11.9852576310685,12.1312952185724,12.0504884386939,12.048950889758,12.194232830726,12.100073036807,12.1779046257023,12.1598192610127,11.9569828837,12.1140066975103,12.1255727500289,12.0045193384587,11.9496501934805,12.1959869555164,12.0210614749657,12.0358298459514,12.2072819140702,12.0885833167377,12.1850532783061,12.1498302825757,11.9754637981047,12.1210756020443,12.0623523793177,11.9498892401378,11.9549731941401,12.0805604416615,11.9733142695743,12.0396756176852,12.1163667324457,12.056876339168,12.1980051909524,12.1664478507469,11.8849509836472,12.054418014646,12.0780688049458,11.9568481746232,11.9139808645897,12.0866413772844,11.9562064537626,11.9891658551274,12.1007899046256,12.0779039905463,12.16882238975,12.1587608879789,11.9091479917115,12.0962856809194,12.090459753408,12.0093580034486,11.9441622780359,12.1197682912683],"text":["date: 2002-01-01<br />.value: 11.51806","date: 2002-02-01<br />.value: 11.34836","date: 2002-03-01<br />.value: 11.33233","date: 2002-04-01<br />.value: 11.22474","date: 2002-05-01<br />.value: 11.18523","date: 2002-06-01<br />.value: 11.09174","date: 2002-07-01<br />.value: 11.30890","date: 2002-08-01<br />.value: 11.25091","date: 2002-09-01<br />.value: 11.29394","date: 2002-10-01<br />.value: 11.40845","date: 2002-11-01<br />.value: 11.26060","date: 2002-12-01<br />.value: 11.39664","date: 2003-01-01<br />.value: 11.42923","date: 2003-02-01<br />.value: 11.23762","date: 2003-03-01<br />.value: 11.37126","date: 2003-04-01<br />.value: 11.35311","date: 2003-05-01<br />.value: 11.35820","date: 2003-06-01<br />.value: 11.28179","date: 2003-07-01<br />.value: 11.39154","date: 2003-08-01<br />.value: 11.32470","date: 2003-09-01<br />.value: 11.40464","date: 2003-10-01<br />.value: 11.50450","date: 2003-11-01<br />.value: 11.44846","date: 2003-12-01<br />.value: 11.60633","date: 2004-01-01<br />.value: 11.61827","date: 2004-02-01<br />.value: 11.41104","date: 2004-03-01<br />.value: 11.55038","date: 2004-04-01<br />.value: 11.49548","date: 2004-05-01<br />.value: 11.39929","date: 2004-06-01<br />.value: 11.35790","date: 2004-07-01<br />.value: 11.52708","date: 2004-08-01<br />.value: 11.44233","date: 2004-09-01<br />.value: 11.47146","date: 2004-10-01<br />.value: 11.59544","date: 2004-11-01<br />.value: 11.51083","date: 2004-12-01<br />.value: 11.57436","date: 2005-01-01<br />.value: 11.59028","date: 2005-02-01<br />.value: 11.43400","date: 2005-03-01<br />.value: 11.58372","date: 2005-04-01<br />.value: 11.57760","date: 2005-05-01<br />.value: 11.48251","date: 2005-06-01<br />.value: 11.42957","date: 2005-07-01<br />.value: 11.55510","date: 2005-08-01<br />.value: 11.51149","date: 2005-09-01<br />.value: 11.70770","date: 2005-10-01<br />.value: 11.62584","date: 2005-11-01<br />.value: 11.57754","date: 2005-12-01<br />.value: 11.71217","date: 2006-01-01<br />.value: 11.71728","date: 2006-02-01<br />.value: 11.50178","date: 2006-03-01<br />.value: 11.64967","date: 2006-04-01<br />.value: 11.69469","date: 2006-05-01<br />.value: 11.62053","date: 2006-06-01<br />.value: 11.52909","date: 2006-07-01<br />.value: 11.72615","date: 2006-08-01<br />.value: 11.65177","date: 2006-09-01<br />.value: 11.76083","date: 2006-10-01<br />.value: 11.88332","date: 2006-11-01<br />.value: 11.80002","date: 2006-12-01<br />.value: 11.85838","date: 2007-01-01<br />.value: 11.87442","date: 2007-02-01<br />.value: 11.61032","date: 2007-03-01<br />.value: 11.82085","date: 2007-04-01<br />.value: 11.82263","date: 2007-05-01<br />.value: 11.63094","date: 2007-06-01<br />.value: 11.65358","date: 2007-07-01<br />.value: 11.82149","date: 2007-08-01<br />.value: 11.78812","date: 2007-09-01<br />.value: 11.79981","date: 2007-10-01<br />.value: 11.91365","date: 2007-11-01<br />.value: 11.85567","date: 2007-12-01<br />.value: 11.99087","date: 2008-01-01<br />.value: 12.00296","date: 2008-02-01<br />.value: 11.84225","date: 2008-03-01<br />.value: 11.94164","date: 2008-04-01<br />.value: 11.94273","date: 2008-05-01<br />.value: 11.83421","date: 2008-06-01<br />.value: 11.83112","date: 2008-07-01<br />.value: 11.91464","date: 2008-08-01<br />.value: 11.82890","date: 2008-09-01<br />.value: 11.83597","date: 2008-10-01<br />.value: 11.95280","date: 2008-11-01<br />.value: 11.88501","date: 2008-12-01<br />.value: 11.99736","date: 2009-01-01<br />.value: 12.01346","date: 2009-02-01<br />.value: 11.75914","date: 2009-03-01<br />.value: 11.94227","date: 2009-04-01<br />.value: 11.92486","date: 2009-05-01<br />.value: 11.81629","date: 2009-06-01<br />.value: 11.76534","date: 2009-07-01<br />.value: 11.90880","date: 2009-08-01<br />.value: 11.80936","date: 2009-09-01<br />.value: 11.86946","date: 2009-10-01<br />.value: 11.90867","date: 2009-11-01<br />.value: 11.85870","date: 2009-12-01<br />.value: 11.90170","date: 2010-01-01<br />.value: 11.88295","date: 2010-02-01<br />.value: 11.73802","date: 2010-03-01<br />.value: 11.90737","date: 2010-04-01<br />.value: 11.87043","date: 2010-05-01<br />.value: 11.77090","date: 2010-06-01<br />.value: 11.78351","date: 2010-07-01<br />.value: 11.90959","date: 2010-08-01<br />.value: 11.85294","date: 2010-09-01<br />.value: 11.88753","date: 2010-10-01<br />.value: 11.96230","date: 2010-11-01<br />.value: 11.95055","date: 2010-12-01<br />.value: 12.03322","date: 2011-01-01<br />.value: 12.02558","date: 2011-02-01<br />.value: 11.79525","date: 2011-03-01<br />.value: 11.99912","date: 2011-04-01<br />.value: 11.99655","date: 2011-05-01<br />.value: 11.96411","date: 2011-06-01<br />.value: 11.86067","date: 2011-07-01<br />.value: 11.96831","date: 2011-08-01<br />.value: 11.93005","date: 2011-09-01<br />.value: 11.91085","date: 2011-10-01<br />.value: 11.95422","date: 2011-11-01<br />.value: 11.95328","date: 2011-12-01<br />.value: 12.00640","date: 2012-01-01<br />.value: 12.06468","date: 2012-02-01<br />.value: 11.89687","date: 2012-03-01<br />.value: 12.04226","date: 2012-04-01<br />.value: 12.04792","date: 2012-05-01<br />.value: 12.00117","date: 2012-06-01<br />.value: 12.02860","date: 2012-07-01<br />.value: 12.15809","date: 2012-08-01<br />.value: 12.08759","date: 2012-09-01<br />.value: 12.10439","date: 2012-10-01<br />.value: 12.19937","date: 2012-11-01<br />.value: 12.16203","date: 2012-12-01<br />.value: 12.20942","date: 2013-01-01<br />.value: 12.20379","date: 2013-02-01<br />.value: 11.97310","date: 2013-03-01<br />.value: 12.16727","date: 2013-04-01<br />.value: 12.15281","date: 2013-05-01<br />.value: 12.04287","date: 2013-06-01<br />.value: 12.02587","date: 2013-07-01<br />.value: 12.21178","date: 2013-08-01<br />.value: 12.10247","date: 2013-09-01<br />.value: 12.11961","date: 2013-10-01<br />.value: 12.17790","date: 2013-11-01<br />.value: 12.08653","date: 2013-12-01<br />.value: 12.18606","date: 2014-01-01<br />.value: 12.19732","date: 2014-02-01<br />.value: 11.99562","date: 2014-03-01<br />.value: 12.11851","date: 2014-04-01<br />.value: 12.17237","date: 2014-05-01<br />.value: 12.00619","date: 2014-06-01<br />.value: 11.98526","date: 2014-07-01<br />.value: 12.13130","date: 2014-08-01<br />.value: 12.05049","date: 2014-09-01<br />.value: 12.04895","date: 2014-10-01<br />.value: 12.19423","date: 2014-11-01<br />.value: 12.10007","date: 2014-12-01<br />.value: 12.17790","date: 2015-01-01<br />.value: 12.15982","date: 2015-02-01<br />.value: 11.95698","date: 2015-03-01<br />.value: 12.11401","date: 2015-04-01<br />.value: 12.12557","date: 2015-05-01<br />.value: 12.00452","date: 2015-06-01<br />.value: 11.94965","date: 2015-07-01<br />.value: 12.19599","date: 2015-08-01<br />.value: 12.02106","date: 2015-09-01<br />.value: 12.03583","date: 2015-10-01<br />.value: 12.20728","date: 2015-11-01<br />.value: 12.08858","date: 2015-12-01<br />.value: 12.18505","date: 2016-01-01<br />.value: 12.14983","date: 2016-02-01<br />.value: 11.97546","date: 2016-03-01<br />.value: 12.12108","date: 2016-04-01<br />.value: 12.06235","date: 2016-05-01<br />.value: 11.94989","date: 2016-06-01<br />.value: 11.95497","date: 2016-07-01<br />.value: 12.08056","date: 2016-08-01<br />.value: 11.97331","date: 2016-09-01<br />.value: 12.03968","date: 2016-10-01<br />.value: 12.11637","date: 2016-11-01<br />.value: 12.05688","date: 2016-12-01<br />.value: 12.19801","date: 2017-01-01<br />.value: 12.16645","date: 2017-02-01<br />.value: 11.88495","date: 2017-03-01<br />.value: 12.05442","date: 2017-04-01<br />.value: 12.07807","date: 2017-05-01<br />.value: 11.95685","date: 2017-06-01<br />.value: 11.91398","date: 2017-07-01<br />.value: 12.08664","date: 2017-08-01<br />.value: 11.95621","date: 2017-09-01<br />.value: 11.98917","date: 2017-10-01<br />.value: 12.10079","date: 2017-11-01<br />.value: 12.07790","date: 2017-12-01<br />.value: 12.16882","date: 2018-01-01<br />.value: 12.15876","date: 2018-02-01<br />.value: 11.90915","date: 2018-03-01<br />.value: 12.09629","date: 2018-04-01<br />.value: 12.09046","date: 2018-05-01<br />.value: 12.00936","date: 2018-06-01<br />.value: 11.94416","date: 2018-07-01<br />.value: 12.11977"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y8","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[13.0288260252121,12.9836184177269,13.0424713250484,12.9610084760452,12.9797531826066,12.900878449813,12.9991941120213,13.0041449969992,12.9912382303048,13.0704109184471,13.0359707180604,13.0062744060105,12.9883998914409,12.9726422061364,13.055240185548,12.9659808755808,13.0137509132222,12.9996509622955,13.0878071287027,13.0848504850945,13.1024341020886,13.1532184265334,13.1605739651681,13.0933608404186,13.0544163873641,13.0976259138082,13.1867362598246,13.13799063329,13.1113711840008,13.117007057903,13.1977750707727,13.2004478613163,13.1989465693867,13.2142641152977,13.1957811113985,13.1544277758804,13.09194334441,13.1319076852472,13.2270854893258,13.1626604341689,13.1208682602735,13.093803396175,13.1664702109288,13.1552235203354,13.1855165644095,13.1920480095697,13.2162306986068,13.1433966197321,13.0927388730044,13.1119796526496,13.2091298910841,13.1458122900912,13.1659974144244,13.1410300656483,13.1812075917061,13.1922419898403,13.2198874683342,13.2401819679842,13.289444384782,13.2485060404718,13.1993651584513,13.1780818661607,13.2901109138819,13.2216619565955,13.2079096816989,13.1795977883564,13.2665225941039,13.2666437917445,13.2234549942656,13.31232897725,13.3335800858518,13.267659542895,13.2458315553045,13.2854953189718,13.3458220790535,13.2827000274615,13.2605066190858,13.2059708008454,13.3157369681847,13.2686207007838,13.2475253438871,13.3349441383503,13.2820882070381,13.2452728061807,13.2187675040851,13.2003590682909,13.2866092149377,13.2439223862038,13.1871768607363,13.1417737709242,13.2823864949529,13.3079961128573,13.3239907060561,13.4147613126748,13.4272181513388,13.3778703380596,13.3323989938769,13.3640255948343,13.4474351608244,13.3823417209016,13.3573358898798,13.337394108608,13.4091500491045,13.4138158330199,13.4004192664615,13.4560216585639,13.4458719476337,13.4151344787544,13.3514317422956,13.3521106759031,13.4493060660594,13.4108766043515,13.3763402582109,13.2872962908968,13.3817323913535,13.3754400298336,13.3523284094251,13.3969070174034,13.4060163438989,13.3570148577668,13.3335946585204,13.3493172601767,13.4508221633512,13.378636822743,13.3857609539748,13.3314518167667,13.4446236725383,13.4657459681493,13.4347141597218,13.4809367182468,13.5066334492647,13.4107477032185,13.4036324303339,13.3873902478345,13.4824670365752,13.4156775597077,13.4187782080853,13.355778792033,13.492456888332,13.4729103838276,13.4118278604182,13.5006025333922,13.4886981149449,13.4385643912414,13.4097113940657,13.395710189235,13.4842638444845,13.419114204116,13.4285531214118,13.3735204599737,13.4591327127445,13.4688043322627,13.4418812693755,13.5432030226187,13.5072202538042,13.4428325307399,13.4052675538679,13.4522051093036,13.5517077593024,13.4417577568835,13.4543182833766,13.4030374510953,13.5318125386228,13.4786606500342,13.4674030938484,13.5504650020455,13.5487690272299,13.5050619501772,13.4568393370757,13.5187245030721,13.5608105479208,13.4928463502166,13.4945446740305,13.4446917741198,13.5334380557458,13.5133982013036,13.5270241621311,13.561544331057,13.5894502570687,13.5030370347045,13.4722706723805,13.4778690379977,13.5980992956435,13.4967532807803,13.5285975230606,13.4890363738298,13.5565195975039,13.5330932688538,13.5173915429497,13.6057581931422,13.6344058604966,13.5379187405692,13.5181672995196,13.5246795327608,13.6263299314424,13.5486541187714,13.5409368607935,13.4948478889378,13.5604440996136],"text":["date: 2002-01-01<br />.value: 13.02883","date: 2002-02-01<br />.value: 12.98362","date: 2002-03-01<br />.value: 13.04247","date: 2002-04-01<br />.value: 12.96101","date: 2002-05-01<br />.value: 12.97975","date: 2002-06-01<br />.value: 12.90088","date: 2002-07-01<br />.value: 12.99919","date: 2002-08-01<br />.value: 13.00414","date: 2002-09-01<br />.value: 12.99124","date: 2002-10-01<br />.value: 13.07041","date: 2002-11-01<br />.value: 13.03597","date: 2002-12-01<br />.value: 13.00627","date: 2003-01-01<br />.value: 12.98840","date: 2003-02-01<br />.value: 12.97264","date: 2003-03-01<br />.value: 13.05524","date: 2003-04-01<br />.value: 12.96598","date: 2003-05-01<br />.value: 13.01375","date: 2003-06-01<br />.value: 12.99965","date: 2003-07-01<br />.value: 13.08781","date: 2003-08-01<br />.value: 13.08485","date: 2003-09-01<br />.value: 13.10243","date: 2003-10-01<br />.value: 13.15322","date: 2003-11-01<br />.value: 13.16057","date: 2003-12-01<br />.value: 13.09336","date: 2004-01-01<br />.value: 13.05442","date: 2004-02-01<br />.value: 13.09763","date: 2004-03-01<br />.value: 13.18674","date: 2004-04-01<br />.value: 13.13799","date: 2004-05-01<br />.value: 13.11137","date: 2004-06-01<br />.value: 13.11701","date: 2004-07-01<br />.value: 13.19778","date: 2004-08-01<br />.value: 13.20045","date: 2004-09-01<br />.value: 13.19895","date: 2004-10-01<br />.value: 13.21426","date: 2004-11-01<br />.value: 13.19578","date: 2004-12-01<br />.value: 13.15443","date: 2005-01-01<br />.value: 13.09194","date: 2005-02-01<br />.value: 13.13191","date: 2005-03-01<br />.value: 13.22709","date: 2005-04-01<br />.value: 13.16266","date: 2005-05-01<br />.value: 13.12087","date: 2005-06-01<br />.value: 13.09380","date: 2005-07-01<br />.value: 13.16647","date: 2005-08-01<br />.value: 13.15522","date: 2005-09-01<br />.value: 13.18552","date: 2005-10-01<br />.value: 13.19205","date: 2005-11-01<br />.value: 13.21623","date: 2005-12-01<br />.value: 13.14340","date: 2006-01-01<br />.value: 13.09274","date: 2006-02-01<br />.value: 13.11198","date: 2006-03-01<br />.value: 13.20913","date: 2006-04-01<br />.value: 13.14581","date: 2006-05-01<br />.value: 13.16600","date: 2006-06-01<br />.value: 13.14103","date: 2006-07-01<br />.value: 13.18121","date: 2006-08-01<br />.value: 13.19224","date: 2006-09-01<br />.value: 13.21989","date: 2006-10-01<br />.value: 13.24018","date: 2006-11-01<br />.value: 13.28944","date: 2006-12-01<br />.value: 13.24851","date: 2007-01-01<br />.value: 13.19937","date: 2007-02-01<br />.value: 13.17808","date: 2007-03-01<br />.value: 13.29011","date: 2007-04-01<br />.value: 13.22166","date: 2007-05-01<br />.value: 13.20791","date: 2007-06-01<br />.value: 13.17960","date: 2007-07-01<br />.value: 13.26652","date: 2007-08-01<br />.value: 13.26664","date: 2007-09-01<br />.value: 13.22345","date: 2007-10-01<br />.value: 13.31233","date: 2007-11-01<br />.value: 13.33358","date: 2007-12-01<br />.value: 13.26766","date: 2008-01-01<br />.value: 13.24583","date: 2008-02-01<br />.value: 13.28550","date: 2008-03-01<br />.value: 13.34582","date: 2008-04-01<br />.value: 13.28270","date: 2008-05-01<br />.value: 13.26051","date: 2008-06-01<br />.value: 13.20597","date: 2008-07-01<br />.value: 13.31574","date: 2008-08-01<br />.value: 13.26862","date: 2008-09-01<br />.value: 13.24753","date: 2008-10-01<br />.value: 13.33494","date: 2008-11-01<br />.value: 13.28209","date: 2008-12-01<br />.value: 13.24527","date: 2009-01-01<br />.value: 13.21877","date: 2009-02-01<br />.value: 13.20036","date: 2009-03-01<br />.value: 13.28661","date: 2009-04-01<br />.value: 13.24392","date: 2009-05-01<br />.value: 13.18718","date: 2009-06-01<br />.value: 13.14177","date: 2009-07-01<br />.value: 13.28239","date: 2009-08-01<br />.value: 13.30800","date: 2009-09-01<br />.value: 13.32399","date: 2009-10-01<br />.value: 13.41476","date: 2009-11-01<br />.value: 13.42722","date: 2009-12-01<br />.value: 13.37787","date: 2010-01-01<br />.value: 13.33240","date: 2010-02-01<br />.value: 13.36403","date: 2010-03-01<br />.value: 13.44744","date: 2010-04-01<br />.value: 13.38234","date: 2010-05-01<br />.value: 13.35734","date: 2010-06-01<br />.value: 13.33739","date: 2010-07-01<br />.value: 13.40915","date: 2010-08-01<br />.value: 13.41382","date: 2010-09-01<br />.value: 13.40042","date: 2010-10-01<br />.value: 13.45602","date: 2010-11-01<br />.value: 13.44587","date: 2010-12-01<br />.value: 13.41513","date: 2011-01-01<br />.value: 13.35143","date: 2011-02-01<br />.value: 13.35211","date: 2011-03-01<br />.value: 13.44931","date: 2011-04-01<br />.value: 13.41088","date: 2011-05-01<br />.value: 13.37634","date: 2011-06-01<br />.value: 13.28730","date: 2011-07-01<br />.value: 13.38173","date: 2011-08-01<br />.value: 13.37544","date: 2011-09-01<br />.value: 13.35233","date: 2011-10-01<br />.value: 13.39691","date: 2011-11-01<br />.value: 13.40602","date: 2011-12-01<br />.value: 13.35701","date: 2012-01-01<br />.value: 13.33359","date: 2012-02-01<br />.value: 13.34932","date: 2012-03-01<br />.value: 13.45082","date: 2012-04-01<br />.value: 13.37864","date: 2012-05-01<br />.value: 13.38576","date: 2012-06-01<br />.value: 13.33145","date: 2012-07-01<br />.value: 13.44462","date: 2012-08-01<br />.value: 13.46575","date: 2012-09-01<br />.value: 13.43471","date: 2012-10-01<br />.value: 13.48094","date: 2012-11-01<br />.value: 13.50663","date: 2012-12-01<br />.value: 13.41075","date: 2013-01-01<br />.value: 13.40363","date: 2013-02-01<br />.value: 13.38739","date: 2013-03-01<br />.value: 13.48247","date: 2013-04-01<br />.value: 13.41568","date: 2013-05-01<br />.value: 13.41878","date: 2013-06-01<br />.value: 13.35578","date: 2013-07-01<br />.value: 13.49246","date: 2013-08-01<br />.value: 13.47291","date: 2013-09-01<br />.value: 13.41183","date: 2013-10-01<br />.value: 13.50060","date: 2013-11-01<br />.value: 13.48870","date: 2013-12-01<br />.value: 13.43856","date: 2014-01-01<br />.value: 13.40971","date: 2014-02-01<br />.value: 13.39571","date: 2014-03-01<br />.value: 13.48426","date: 2014-04-01<br />.value: 13.41911","date: 2014-05-01<br />.value: 13.42855","date: 2014-06-01<br />.value: 13.37352","date: 2014-07-01<br />.value: 13.45913","date: 2014-08-01<br />.value: 13.46880","date: 2014-09-01<br />.value: 13.44188","date: 2014-10-01<br />.value: 13.54320","date: 2014-11-01<br />.value: 13.50722","date: 2014-12-01<br />.value: 13.44283","date: 2015-01-01<br />.value: 13.40527","date: 2015-02-01<br />.value: 13.45221","date: 2015-03-01<br />.value: 13.55171","date: 2015-04-01<br />.value: 13.44176","date: 2015-05-01<br />.value: 13.45432","date: 2015-06-01<br />.value: 13.40304","date: 2015-07-01<br />.value: 13.53181","date: 2015-08-01<br />.value: 13.47866","date: 2015-09-01<br />.value: 13.46740","date: 2015-10-01<br />.value: 13.55047","date: 2015-11-01<br />.value: 13.54877","date: 2015-12-01<br />.value: 13.50506","date: 2016-01-01<br />.value: 13.45684","date: 2016-02-01<br />.value: 13.51872","date: 2016-03-01<br />.value: 13.56081","date: 2016-04-01<br />.value: 13.49285","date: 2016-05-01<br />.value: 13.49454","date: 2016-06-01<br />.value: 13.44469","date: 2016-07-01<br />.value: 13.53344","date: 2016-08-01<br />.value: 13.51340","date: 2016-09-01<br />.value: 13.52702","date: 2016-10-01<br />.value: 13.56154","date: 2016-11-01<br />.value: 13.58945","date: 2016-12-01<br />.value: 13.50304","date: 2017-01-01<br />.value: 13.47227","date: 2017-02-01<br />.value: 13.47787","date: 2017-03-01<br />.value: 13.59810","date: 2017-04-01<br />.value: 13.49675","date: 2017-05-01<br />.value: 13.52860","date: 2017-06-01<br />.value: 13.48904","date: 2017-07-01<br />.value: 13.55652","date: 2017-08-01<br />.value: 13.53309","date: 2017-09-01<br />.value: 13.51739","date: 2017-10-01<br />.value: 13.60576","date: 2017-11-01<br />.value: 13.63441","date: 2017-12-01<br />.value: 13.53792","date: 2018-01-01<br />.value: 13.51817","date: 2018-02-01<br />.value: 13.52468","date: 2018-03-01<br />.value: 13.62633","date: 2018-04-01<br />.value: 13.54865","date: 2018-05-01<br />.value: 13.54094","date: 2018-06-01<br />.value: 13.49485","date: 2018-07-01<br />.value: 13.56044"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y9","hoverinfo":"text","frame":null},{"x":["2002-01-01","2002-02-01","2002-03-01","2002-04-01","2002-05-01","2002-06-01","2002-07-01","2002-08-01","2002-09-01","2002-10-01","2002-11-01","2002-12-01","2003-01-01","2003-02-01","2003-03-01","2003-04-01","2003-05-01","2003-06-01","2003-07-01","2003-08-01","2003-09-01","2003-10-01","2003-11-01","2003-12-01","2004-01-01","2004-02-01","2004-03-01","2004-04-01","2004-05-01","2004-06-01","2004-07-01","2004-08-01","2004-09-01","2004-10-01","2004-11-01","2004-12-01","2005-01-01","2005-02-01","2005-03-01","2005-04-01","2005-05-01","2005-06-01","2005-07-01","2005-08-01","2005-09-01","2005-10-01","2005-11-01","2005-12-01","2006-01-01","2006-02-01","2006-03-01","2006-04-01","2006-05-01","2006-06-01","2006-07-01","2006-08-01","2006-09-01","2006-10-01","2006-11-01","2006-12-01","2007-01-01","2007-02-01","2007-03-01","2007-04-01","2007-05-01","2007-06-01","2007-07-01","2007-08-01","2007-09-01","2007-10-01","2007-11-01","2007-12-01","2008-01-01","2008-02-01","2008-03-01","2008-04-01","2008-05-01","2008-06-01","2008-07-01","2008-08-01","2008-09-01","2008-10-01","2008-11-01","2008-12-01","2009-01-01","2009-02-01","2009-03-01","2009-04-01","2009-05-01","2009-06-01","2009-07-01","2009-08-01","2009-09-01","2009-10-01","2009-11-01","2009-12-01","2010-01-01","2010-02-01","2010-03-01","2010-04-01","2010-05-01","2010-06-01","2010-07-01","2010-08-01","2010-09-01","2010-10-01","2010-11-01","2010-12-01","2011-01-01","2011-02-01","2011-03-01","2011-04-01","2011-05-01","2011-06-01","2011-07-01","2011-08-01","2011-09-01","2011-10-01","2011-11-01","2011-12-01","2012-01-01","2012-02-01","2012-03-01","2012-04-01","2012-05-01","2012-06-01","2012-07-01","2012-08-01","2012-09-01","2012-10-01","2012-11-01","2012-12-01","2013-01-01","2013-02-01","2013-03-01","2013-04-01","2013-05-01","2013-06-01","2013-07-01","2013-08-01","2013-09-01","2013-10-01","2013-11-01","2013-12-01","2014-01-01","2014-02-01","2014-03-01","2014-04-01","2014-05-01","2014-06-01","2014-07-01","2014-08-01","2014-09-01","2014-10-01","2014-11-01","2014-12-01","2015-01-01","2015-02-01","2015-03-01","2015-04-01","2015-05-01","2015-06-01","2015-07-01","2015-08-01","2015-09-01","2015-10-01","2015-11-01","2015-12-01","2016-01-01","2016-02-01","2016-03-01","2016-04-01","2016-05-01","2016-06-01","2016-07-01","2016-08-01","2016-09-01","2016-10-01","2016-11-01","2016-12-01","2017-01-01","2017-02-01","2017-03-01","2017-04-01","2017-05-01","2017-06-01","2017-07-01","2017-08-01","2017-09-01","2017-10-01","2017-11-01","2017-12-01","2018-01-01","2018-02-01","2018-03-01","2018-04-01","2018-05-01","2018-06-01","2018-07-01"],"y":[11.4297829578788,11.2936867797332,11.2135081363,11.1807758722477,11.0271338589239,10.9673013356615,11.2189972593131,11.154019462642,11.2534031583123,11.4180871738089,11.3014263532507,11.520258512337,11.5527229348443,11.2961242583996,11.4218732073356,11.39623433297,11.3736404088667,11.2925406049656,11.4455562745994,11.3206141765469,11.4420093166,11.5742933399174,11.4663473524096,11.5660585658754,11.607207844041,11.36497055168,11.490720754982,11.4889093734878,11.3603685144814,11.2712359963689,11.4603892932674,11.4036238600791,11.4520920713625,11.5597613398073,11.459809457819,11.4823837798575,11.5021273748707,11.3614162932864,11.4739871119496,11.4555187850207,11.3621258307792,11.2825180958928,11.4336441340425,11.3974809428584,11.4867765424752,11.5527517639502,11.4813419143083,11.5606769947075,11.593444982029,11.4012450205676,11.5365540970999,11.5899790944125,11.5225391054862,11.3943671288461,11.565252225148,11.481909401439,11.5730699715498,11.6940379578075,11.6509903159261,11.6670447157322,11.6836550942282,11.5367494076932,11.6848515084987,11.6786602181598,11.5761631403748,11.481909401439,11.6592398064582,11.5725613628661,11.607307941864,11.7547023327521,11.6742191441553,11.7471513794145,11.7316914487015,11.6311795007997,11.7300267987982,11.7185647058336,11.6433131713873,11.5516652932862,11.7314664406645,11.6200384441664,11.6902261046962,11.7835631028128,11.6916237991467,11.7865643924199,11.7935073909317,11.615111948714,11.7694264199384,11.7293424435347,11.6194273290421,11.5305590749816,11.7072826356485,11.6396638371871,11.6725923311994,11.8192477246406,11.7593635788875,11.8458413853887,11.8163726130004,11.7040746103669,11.8463716992896,11.8226209544149,11.7098728739595,11.6568872712095,11.821270088995,11.7410883980846,11.8465722852879,11.9379644160355,11.8690532592499,11.9574446056746,11.9299040380363,11.7410008348499,11.8799199785158,11.8782766611418,11.8271666996073,11.7476892392201,11.9251874220787,11.8691302984243,11.8964857376903,11.9159943711449,11.9381213023651,11.9787704590671,11.9687541020347,11.8201307139107,11.9562899007658,11.9272115535842,11.8818648917289,11.8306371026237,11.9513029690342,11.8919918392238,11.9200625079493,12.0065113344735,11.9262859887583,11.9967950164526,11.977250501484,11.7982698070584,11.9464466286385,11.9443506747479,11.8805502400952,11.7860089953538,11.9523474565566,11.868240484631,11.9018342707627,12.0019041733062,11.9145565659906,12.0220836994149,12.0261382372287,11.8340157174099,11.9312014950054,11.97133716668,11.837527529021,11.7570552565598,11.9132038117244,11.8680231657146,11.8897372940602,12.0083531465561,11.9238357213143,12.0154991348241,11.9773133554303,11.7781701923031,11.9313002172111,11.9270661644035,11.8112210146816,11.7699988342273,11.9374151199707,11.8516950606401,11.8749540525507,11.9434733534459,11.9184972340566,12.0050452197807,11.9664376040499,11.8071163093348,11.9317279008501,11.9079495885411,11.8134521905321,11.7653248600173,11.9159141760034,11.8284221009166,11.9145498736925,11.9314713126169,11.8978000354624,12.0004619907583,11.9681580373123,11.7611595984549,11.8827288525243,11.9001043953911,11.8148949840301,11.7500429248498,11.8962608401711,11.8077420263226,11.8452892735469,11.919283507627,11.8921013532554,11.982604041392,11.9398323790626,11.7610971823265,11.9143089211255,11.9064057072953,11.8255952284237,11.756734016728,11.9008916901243],"text":["date: 2002-01-01<br />.value: 11.42978","date: 2002-02-01<br />.value: 11.29369","date: 2002-03-01<br />.value: 11.21351","date: 2002-04-01<br />.value: 11.18078","date: 2002-05-01<br />.value: 11.02713","date: 2002-06-01<br />.value: 10.96730","date: 2002-07-01<br />.value: 11.21900","date: 2002-08-01<br />.value: 11.15402","date: 2002-09-01<br />.value: 11.25340","date: 2002-10-01<br />.value: 11.41809","date: 2002-11-01<br />.value: 11.30143","date: 2002-12-01<br />.value: 11.52026","date: 2003-01-01<br />.value: 11.55272","date: 2003-02-01<br />.value: 11.29612","date: 2003-03-01<br />.value: 11.42187","date: 2003-04-01<br />.value: 11.39623","date: 2003-05-01<br />.value: 11.37364","date: 2003-06-01<br />.value: 11.29254","date: 2003-07-01<br />.value: 11.44556","date: 2003-08-01<br />.value: 11.32061","date: 2003-09-01<br />.value: 11.44201","date: 2003-10-01<br />.value: 11.57429","date: 2003-11-01<br />.value: 11.46635","date: 2003-12-01<br />.value: 11.56606","date: 2004-01-01<br />.value: 11.60721","date: 2004-02-01<br />.value: 11.36497","date: 2004-03-01<br />.value: 11.49072","date: 2004-04-01<br />.value: 11.48891","date: 2004-05-01<br />.value: 11.36037","date: 2004-06-01<br />.value: 11.27124","date: 2004-07-01<br />.value: 11.46039","date: 2004-08-01<br />.value: 11.40362","date: 2004-09-01<br />.value: 11.45209","date: 2004-10-01<br />.value: 11.55976","date: 2004-11-01<br />.value: 11.45981","date: 2004-12-01<br />.value: 11.48238","date: 2005-01-01<br />.value: 11.50213","date: 2005-02-01<br />.value: 11.36142","date: 2005-03-01<br />.value: 11.47399","date: 2005-04-01<br />.value: 11.45552","date: 2005-05-01<br />.value: 11.36213","date: 2005-06-01<br />.value: 11.28252","date: 2005-07-01<br />.value: 11.43364","date: 2005-08-01<br />.value: 11.39748","date: 2005-09-01<br />.value: 11.48678","date: 2005-10-01<br />.value: 11.55275","date: 2005-11-01<br />.value: 11.48134","date: 2005-12-01<br />.value: 11.56068","date: 2006-01-01<br />.value: 11.59344","date: 2006-02-01<br />.value: 11.40125","date: 2006-03-01<br />.value: 11.53655","date: 2006-04-01<br />.value: 11.58998","date: 2006-05-01<br />.value: 11.52254","date: 2006-06-01<br />.value: 11.39437","date: 2006-07-01<br />.value: 11.56525","date: 2006-08-01<br />.value: 11.48191","date: 2006-09-01<br />.value: 11.57307","date: 2006-10-01<br />.value: 11.69404","date: 2006-11-01<br />.value: 11.65099","date: 2006-12-01<br />.value: 11.66704","date: 2007-01-01<br />.value: 11.68366","date: 2007-02-01<br />.value: 11.53675","date: 2007-03-01<br />.value: 11.68485","date: 2007-04-01<br />.value: 11.67866","date: 2007-05-01<br />.value: 11.57616","date: 2007-06-01<br />.value: 11.48191","date: 2007-07-01<br />.value: 11.65924","date: 2007-08-01<br />.value: 11.57256","date: 2007-09-01<br />.value: 11.60731","date: 2007-10-01<br />.value: 11.75470","date: 2007-11-01<br />.value: 11.67422","date: 2007-12-01<br />.value: 11.74715","date: 2008-01-01<br />.value: 11.73169","date: 2008-02-01<br />.value: 11.63118","date: 2008-03-01<br />.value: 11.73003","date: 2008-04-01<br />.value: 11.71856","date: 2008-05-01<br />.value: 11.64331","date: 2008-06-01<br />.value: 11.55167","date: 2008-07-01<br />.value: 11.73147","date: 2008-08-01<br />.value: 11.62004","date: 2008-09-01<br />.value: 11.69023","date: 2008-10-01<br />.value: 11.78356","date: 2008-11-01<br />.value: 11.69162","date: 2008-12-01<br />.value: 11.78656","date: 2009-01-01<br />.value: 11.79351","date: 2009-02-01<br />.value: 11.61511","date: 2009-03-01<br />.value: 11.76943","date: 2009-04-01<br />.value: 11.72934","date: 2009-05-01<br />.value: 11.61943","date: 2009-06-01<br />.value: 11.53056","date: 2009-07-01<br />.value: 11.70728","date: 2009-08-01<br />.value: 11.63966","date: 2009-09-01<br />.value: 11.67259","date: 2009-10-01<br />.value: 11.81925","date: 2009-11-01<br />.value: 11.75936","date: 2009-12-01<br />.value: 11.84584","date: 2010-01-01<br />.value: 11.81637","date: 2010-02-01<br />.value: 11.70407","date: 2010-03-01<br />.value: 11.84637","date: 2010-04-01<br />.value: 11.82262","date: 2010-05-01<br />.value: 11.70987","date: 2010-06-01<br />.value: 11.65689","date: 2010-07-01<br />.value: 11.82127","date: 2010-08-01<br />.value: 11.74109","date: 2010-09-01<br />.value: 11.84657","date: 2010-10-01<br />.value: 11.93796","date: 2010-11-01<br />.value: 11.86905","date: 2010-12-01<br />.value: 11.95744","date: 2011-01-01<br />.value: 11.92990","date: 2011-02-01<br />.value: 11.74100","date: 2011-03-01<br />.value: 11.87992","date: 2011-04-01<br />.value: 11.87828","date: 2011-05-01<br />.value: 11.82717","date: 2011-06-01<br />.value: 11.74769","date: 2011-07-01<br />.value: 11.92519","date: 2011-08-01<br />.value: 11.86913","date: 2011-09-01<br />.value: 11.89649","date: 2011-10-01<br />.value: 11.91599","date: 2011-11-01<br />.value: 11.93812","date: 2011-12-01<br />.value: 11.97877","date: 2012-01-01<br />.value: 11.96875","date: 2012-02-01<br />.value: 11.82013","date: 2012-03-01<br />.value: 11.95629","date: 2012-04-01<br />.value: 11.92721","date: 2012-05-01<br />.value: 11.88186","date: 2012-06-01<br />.value: 11.83064","date: 2012-07-01<br />.value: 11.95130","date: 2012-08-01<br />.value: 11.89199","date: 2012-09-01<br />.value: 11.92006","date: 2012-10-01<br />.value: 12.00651","date: 2012-11-01<br />.value: 11.92629","date: 2012-12-01<br />.value: 11.99680","date: 2013-01-01<br />.value: 11.97725","date: 2013-02-01<br />.value: 11.79827","date: 2013-03-01<br />.value: 11.94645","date: 2013-04-01<br />.value: 11.94435","date: 2013-05-01<br />.value: 11.88055","date: 2013-06-01<br />.value: 11.78601","date: 2013-07-01<br />.value: 11.95235","date: 2013-08-01<br />.value: 11.86824","date: 2013-09-01<br />.value: 11.90183","date: 2013-10-01<br />.value: 12.00190","date: 2013-11-01<br />.value: 11.91456","date: 2013-12-01<br />.value: 12.02208","date: 2014-01-01<br />.value: 12.02614","date: 2014-02-01<br />.value: 11.83402","date: 2014-03-01<br />.value: 11.93120","date: 2014-04-01<br />.value: 11.97134","date: 2014-05-01<br />.value: 11.83753","date: 2014-06-01<br />.value: 11.75706","date: 2014-07-01<br />.value: 11.91320","date: 2014-08-01<br />.value: 11.86802","date: 2014-09-01<br />.value: 11.88974","date: 2014-10-01<br />.value: 12.00835","date: 2014-11-01<br />.value: 11.92384","date: 2014-12-01<br />.value: 12.01550","date: 2015-01-01<br />.value: 11.97731","date: 2015-02-01<br />.value: 11.77817","date: 2015-03-01<br />.value: 11.93130","date: 2015-04-01<br />.value: 11.92707","date: 2015-05-01<br />.value: 11.81122","date: 2015-06-01<br />.value: 11.77000","date: 2015-07-01<br />.value: 11.93742","date: 2015-08-01<br />.value: 11.85170","date: 2015-09-01<br />.value: 11.87495","date: 2015-10-01<br />.value: 11.94347","date: 2015-11-01<br />.value: 11.91850","date: 2015-12-01<br />.value: 12.00505","date: 2016-01-01<br />.value: 11.96644","date: 2016-02-01<br />.value: 11.80712","date: 2016-03-01<br />.value: 11.93173","date: 2016-04-01<br />.value: 11.90795","date: 2016-05-01<br />.value: 11.81345","date: 2016-06-01<br />.value: 11.76532","date: 2016-07-01<br />.value: 11.91591","date: 2016-08-01<br />.value: 11.82842","date: 2016-09-01<br />.value: 11.91455","date: 2016-10-01<br />.value: 11.93147","date: 2016-11-01<br />.value: 11.89780","date: 2016-12-01<br />.value: 12.00046","date: 2017-01-01<br />.value: 11.96816","date: 2017-02-01<br />.value: 11.76116","date: 2017-03-01<br />.value: 11.88273","date: 2017-04-01<br />.value: 11.90010","date: 2017-05-01<br />.value: 11.81489","date: 2017-06-01<br />.value: 11.75004","date: 2017-07-01<br />.value: 11.89626","date: 2017-08-01<br />.value: 11.80774","date: 2017-09-01<br />.value: 11.84529","date: 2017-10-01<br />.value: 11.91928","date: 2017-11-01<br />.value: 11.89210","date: 2017-12-01<br />.value: 11.98260","date: 2018-01-01<br />.value: 11.93983","date: 2018-02-01<br />.value: 11.76110","date: 2018-03-01<br />.value: 11.91431","date: 2018-04-01<br />.value: 11.90641","date: 2018-05-01<br />.value: 11.82560","date: 2018-06-01<br />.value: 11.75673","date: 2018-07-01<br />.value: 11.90089"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y10","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":50.0943683409437,"r":7.30593607305936,"b":20.2130898021309,"l":34.337899543379},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187},"title":{"text":"Training Splits","font":{"color":"rgba(44,62,80,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.477425158989311],"automargin":true,"type":"date","autorange":true,"range":["2001-03-05","2019-04-28"],"tickmode":"auto","ticktext":["2005","2010","2015"],"tickvals":[12784,14610,16436],"categoryorder":"array","categoryarray":["2005","2010","2015"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"y9","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.810426029794221,1],"automargin":true,"type":"linear","autorange":true,"range":[11.5039250794333,12.3488094693683],"tickmode":"auto","ticktext":["11.7","11.9","12.1","12.3"],"tickvals":[11.7,11.9,12.1,12.3],"categoryorder":"array","categoryarray":["11.7","11.9","12.1","12.3"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.810426029794221,"y1":1},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.810426029794221,"y1":1},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.610426029794221,"y1":0.789573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.789573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.610426029794221,"y1":0.789573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.789573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.410426029794221,"y1":0.589573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.589573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.410426029794221,"y1":0.589573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.589573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.210426029794221,"y1":0.389573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.389573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.210426029794221,"y1":0.389573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.389573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":0.189573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.189573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":0.189573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.189573970205779,"ysizemode":"pixel"}],"annotations":[{"text":"ADELAIDE-MELBOURNE","x":0.238712579494655,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"ADELAIDE-SYDNEY","x":0.761287420505345,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"BRISBANE-CAIRNS","x":0.238712579494655,"y":0.789573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"BRISBANE-MELBOURNE","x":0.761287420505345,"y":0.789573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"BRISBANE-SYDNEY","x":0.238712579494655,"y":0.589573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"GOLD COAST-SYDNEY","x":0.761287420505345,"y":0.589573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"MELBOURNE-GOLD COAST","x":0.238712579494655,"y":0.389573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"MELBOURNE-PERTH","x":0.761287420505345,"y":0.389573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"MELBOURNE-SYDNEY","x":0.238712579494655,"y":0.189573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"PERTH-SYDNEY","x":0.761287420505345,"y":0.189573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"date","autorange":true,"range":["2001-03-05","2019-04-28"],"tickmode":"auto","ticktext":["2005","2010","2015"],"tickvals":[12784,14610,16436],"categoryorder":"array","categoryarray":["2005","2010","2015"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.522574841010689,1],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"y10","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":true,"range":[11.2599940146468,12.0990832412133],"tickmode":"auto","ticktext":["11.3","11.5","11.7","11.9"],"tickvals":[11.3,11.5,11.7,11.9],"categoryorder":"array","categoryarray":["11.3","11.5","11.7","11.9"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.810426029794221,1],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":true,"range":[10.9870757706412,11.8121385217567],"tickmode":"auto","ticktext":["11.0","11.2","11.4","11.6","11.8"],"tickvals":[11,11.2,11.4,11.6,11.8],"categoryorder":"array","categoryarray":["11.0","11.2","11.4","11.6","11.8"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.610426029794221,0.789573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":true,"range":[11.9260445722179,12.7636099871085],"tickmode":"auto","ticktext":["12.0","12.2","12.4","12.6"],"tickvals":[12,12.2,12.4,12.6],"categoryorder":"array","categoryarray":["12.0","12.2","12.4","12.6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.610426029794221,0.789573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":true,"range":[12.4422648925987,13.0093321639882],"tickmode":"auto","ticktext":["12.6","12.8","13.0"],"tickvals":[12.6,12.8,13],"categoryorder":"array","categoryarray":["12.6","12.8","13.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.410426029794221,0.589573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":true,"range":[11.20696136966,12.5643404118855],"tickmode":"auto","ticktext":["11.25","11.50","11.75","12.00","12.25","12.50"],"tickvals":[11.25,11.5,11.75,12,12.25,12.5],"categoryorder":"array","categoryarray":["11.25","11.50","11.75","12.00","12.25","12.50"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.410426029794221,0.589573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis7":{"type":"linear","autorange":true,"range":[10.5871883044643,12.3050782001312],"tickmode":"auto","ticktext":["11.0","11.5","12.0"],"tickvals":[11,11.5,12],"categoryorder":"array","categoryarray":["11.0","11.5","12.0"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.210426029794221,0.389573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis8":{"type":"linear","autorange":true,"range":[11.0357407819787,12.2677780420882],"tickmode":"auto","ticktext":["11.25","11.50","11.75","12.00","12.25"],"tickvals":[11.25,11.5,11.75,12,12.25],"categoryorder":"array","categoryarray":["11.25","11.50","11.75","12.00","12.25"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.210426029794221,0.389573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis9":{"type":"linear","autorange":true,"range":[12.8642020792788,13.6710822310308],"tickmode":"auto","ticktext":["13.0","13.2","13.4","13.6"],"tickvals":[13,13.2,13.4,13.6],"categoryorder":"array","categoryarray":["13.0","13.2","13.4","13.6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.189573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis10":{"type":"linear","autorange":true,"range":[10.9143594905832,12.0790800823071],"tickmode":"auto","ticktext":["11.00","11.25","11.50","11.75","12.00"],"tickvals":[11,11.25,11.5,11.75,12],"categoryorder":"array","categoryarray":["11.00","11.25","11.50","11.75","12.00"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.189573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"9bc44b4f41f4":{"x":{},"y":{},"type":"scatter"}},"cur_data":"9bc44b4f41f4","visdat":{"9bc44b4f41f4":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="testing-set-top-10-routes" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="testing-set-top-10-routes"><span class="header-section-number">5.2</span> Testing Set (top 10 routes)</h3>
<div class="cell" data-hash="index_cache/html/testing_3ee23c3868a27ab2250789afbfd29208">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">testing</span>(splits) <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    passenger_trips,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.facet_ncol =</span> <span class="dv">2</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">.smooth =</span> <span class="cn">FALSE</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Testing Splits"</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-863ba53f7a7ef7b93581" style="width:100%;height:975px;"></div>
<script type="application/json" data-for="htmlwidget-863ba53f7a7ef7b93581">{"x":{"data":[{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[12.236233208425,12.2149332739624,12.3074868848721,12.2982597718576,12.2544484381453,12.2012661126361,12.2083899584853,12.3345538071787,12.2785235311884,12.201557467438,12.1522498388327,12.3142317415064],"text":["date: 2018-08-01<br />.value: 12.23623","date: 2018-09-01<br />.value: 12.21493","date: 2018-10-01<br />.value: 12.30749","date: 2018-11-01<br />.value: 12.29826","date: 2018-12-01<br />.value: 12.25445","date: 2019-01-01<br />.value: 12.20127","date: 2019-02-01<br />.value: 12.20839","date: 2019-03-01<br />.value: 12.33455","date: 2019-04-01<br />.value: 12.27852","date: 2019-05-01<br />.value: 12.20156","date: 2019-06-01<br />.value: 12.15225","date: 2019-07-01<br />.value: 12.31423"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[11.9092825540477,11.9268480409911,12.052134443128,12.0208448697699,12.0013889085776,11.9711284901626,11.8656014236152,12.0233089910254,12.005326391658,11.8967718977648,11.8319026954027,11.975986298691],"text":["date: 2018-08-01<br />.value: 11.90928","date: 2018-09-01<br />.value: 11.92685","date: 2018-10-01<br />.value: 12.05213","date: 2018-11-01<br />.value: 12.02084","date: 2018-12-01<br />.value: 12.00139","date: 2019-01-01<br />.value: 11.97113","date: 2019-02-01<br />.value: 11.86560","date: 2019-03-01<br />.value: 12.02331","date: 2019-04-01<br />.value: 12.00533","date: 2019-05-01<br />.value: 11.89677","date: 2019-06-01<br />.value: 11.83190","date: 2019-07-01<br />.value: 11.97599"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[11.7031986568851,11.5803597892198,11.6603104518833,11.5823115924552,11.5955740052801,11.5244982413228,11.44206298972,11.5090780732413,11.5622297826544,11.5584627251318,11.5515402253404,11.6924598077561],"text":["date: 2018-08-01<br />.value: 11.70320","date: 2018-09-01<br />.value: 11.58036","date: 2018-10-01<br />.value: 11.66031","date: 2018-11-01<br />.value: 11.58231","date: 2018-12-01<br />.value: 11.59557","date: 2019-01-01<br />.value: 11.52450","date: 2019-02-01<br />.value: 11.44206","date: 2019-03-01<br />.value: 11.50908","date: 2019-04-01<br />.value: 11.56223","date: 2019-05-01<br />.value: 11.55846","date: 2019-06-01<br />.value: 11.55154","date: 2019-07-01<br />.value: 11.69246"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[12.6109709263554,12.6221776156871,12.7099673055629,12.66169840683,12.6203785583038,12.6001093643281,12.4528624084897,12.5958012484518,12.6346258276123,12.5294270758545,12.5253006222977,12.7093629499538],"text":["date: 2018-08-01<br />.value: 12.61097","date: 2018-09-01<br />.value: 12.62218","date: 2018-10-01<br />.value: 12.70997","date: 2018-11-01<br />.value: 12.66170","date: 2018-12-01<br />.value: 12.62038","date: 2019-01-01<br />.value: 12.60011","date: 2019-02-01<br />.value: 12.45286","date: 2019-03-01<br />.value: 12.59580","date: 2019-04-01<br />.value: 12.63463","date: 2019-05-01<br />.value: 12.52943","date: 2019-06-01<br />.value: 12.52530","date: 2019-07-01<br />.value: 12.70936"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y4","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[12.9396345376819,12.8922959110173,12.9716637358883,12.9560679140062,12.9171604267726,12.830748247278,12.7750784942426,12.9102908158991,12.89169659744,12.8904817601468,12.8481370358608,12.9740141697799],"text":["date: 2018-08-01<br />.value: 12.93963","date: 2018-09-01<br />.value: 12.89230","date: 2018-10-01<br />.value: 12.97166","date: 2018-11-01<br />.value: 12.95607","date: 2018-12-01<br />.value: 12.91716","date: 2019-01-01<br />.value: 12.83075","date: 2019-02-01<br />.value: 12.77508","date: 2019-03-01<br />.value: 12.91029","date: 2019-04-01<br />.value: 12.89170","date: 2019-05-01<br />.value: 12.89048","date: 2019-06-01<br />.value: 12.84814","date: 2019-07-01<br />.value: 12.97401"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[12.3055287644937,12.3143304599615,12.3918382647267,12.3104596875162,12.3873645057018,12.4873681169935,12.2162457238505,12.2900598710465,12.3354416373714,12.2375422423996,12.1976371667091,12.3691264319665],"text":["date: 2018-08-01<br />.value: 12.30553","date: 2018-09-01<br />.value: 12.31433","date: 2018-10-01<br />.value: 12.39184","date: 2018-11-01<br />.value: 12.31046","date: 2018-12-01<br />.value: 12.38736","date: 2019-01-01<br />.value: 12.48737","date: 2019-02-01<br />.value: 12.21625","date: 2019-03-01<br />.value: 12.29006","date: 2019-04-01<br />.value: 12.33544","date: 2019-05-01<br />.value: 12.23754","date: 2019-06-01<br />.value: 12.19764","date: 2019-07-01<br />.value: 12.36913"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y6","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[12.0712890406436,12.0963972787211,12.1396443398741,12.061705615999,12.1239293999374,12.2378571244546,11.8613686205154,11.9732006762383,12.1326736527604,11.9085893644393,11.9505931267184,12.1705698124875],"text":["date: 2018-08-01<br />.value: 12.07129","date: 2018-09-01<br />.value: 12.09640","date: 2018-10-01<br />.value: 12.13964","date: 2018-11-01<br />.value: 12.06171","date: 2018-12-01<br />.value: 12.12393","date: 2019-01-01<br />.value: 12.23786","date: 2019-02-01<br />.value: 11.86137","date: 2019-03-01<br />.value: 11.97320","date: 2019-04-01<br />.value: 12.13267","date: 2019-05-01<br />.value: 11.90859","date: 2019-06-01<br />.value: 11.95059","date: 2019-07-01<br />.value: 12.17057"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y7","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[12.0088770161368,12.1344638555099,12.1490630441465,12.1045713401981,12.1799134580444,12.165214192012,11.9498892401378,12.075040983118,12.1056112208161,11.9844279703397,11.9451623235758,12.1256540338803],"text":["date: 2018-08-01<br />.value: 12.00888","date: 2018-09-01<br />.value: 12.13446","date: 2018-10-01<br />.value: 12.14906","date: 2018-11-01<br />.value: 12.10457","date: 2018-12-01<br />.value: 12.17991","date: 2019-01-01<br />.value: 12.16521","date: 2019-02-01<br />.value: 11.94989","date: 2019-03-01<br />.value: 12.07504","date: 2019-04-01<br />.value: 12.10561","date: 2019-05-01<br />.value: 11.98443","date: 2019-06-01<br />.value: 11.94516","date: 2019-07-01<br />.value: 12.12565"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y8","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[13.5698977019281,13.513937788269,13.6186266834366,13.5995424514616,13.5235741151658,13.5319864956612,13.5203015624997,13.6126817576905,13.5170007431798,13.5516882310402,13.4611885579663,13.5388501894352],"text":["date: 2018-08-01<br />.value: 13.56990","date: 2018-09-01<br />.value: 13.51394","date: 2018-10-01<br />.value: 13.61863","date: 2018-11-01<br />.value: 13.59954","date: 2018-12-01<br />.value: 13.52357","date: 2019-01-01<br />.value: 13.53199","date: 2019-02-01<br />.value: 13.52030","date: 2019-03-01<br />.value: 13.61268","date: 2019-04-01<br />.value: 13.51700","date: 2019-05-01<br />.value: 13.55169","date: 2019-06-01<br />.value: 13.46119","date: 2019-07-01<br />.value: 13.53885"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y9","hoverinfo":"text","frame":null},{"x":["2018-08-01","2018-09-01","2018-10-01","2018-11-01","2018-12-01","2019-01-01","2019-02-01","2019-03-01","2019-04-01","2019-05-01","2019-06-01","2019-07-01"],"y":[11.7985178555569,11.8581379653895,11.9268215985562,11.9075857439122,11.9332463443104,11.9284993072267,11.7311609916119,11.8555785606665,11.8661213640445,11.7984126303749,11.7329361138666,11.8989698728388],"text":["date: 2018-08-01<br />.value: 11.79852","date: 2018-09-01<br />.value: 11.85814","date: 2018-10-01<br />.value: 11.92682","date: 2018-11-01<br />.value: 11.90759","date: 2018-12-01<br />.value: 11.93325","date: 2019-01-01<br />.value: 11.92850","date: 2019-02-01<br />.value: 11.73116","date: 2019-03-01<br />.value: 11.85558","date: 2019-04-01<br />.value: 11.86612","date: 2019-05-01<br />.value: 11.79841","date: 2019-06-01<br />.value: 11.73294","date: 2019-07-01<br />.value: 11.89897"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y10","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":50.0943683409437,"r":7.30593607305936,"b":20.2130898021309,"l":40.1826484018265},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187},"title":{"text":"Testing Splits","font":{"color":"rgba(44,62,80,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,0.477425158989311],"automargin":true,"type":"date","autorange":true,"range":["2018-07-15","2019-07-17"],"tickmode":"auto","ticktext":["Oct 2018","Jan 2019","Apr 2019","Jul 2019"],"tickvals":[17805,17897,17987,18078],"categoryorder":"array","categoryarray":["Oct 2018","Jan 2019","Apr 2019","Jul 2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"y9","title":"","hoverformat":".2f"},"yaxis":{"domain":[0.810426029794221,1],"automargin":true,"type":"linear","autorange":true,"range":[12.1431346404154,12.343669005596],"tickmode":"auto","ticktext":["12.15","12.20","12.25","12.30"],"tickvals":[12.15,12.2,12.25,12.3],"categoryorder":"array","categoryarray":["12.15","12.20","12.25","12.30"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.810426029794221,"y1":1},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.810426029794221,"y1":1},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.610426029794221,"y1":0.789573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.789573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.610426029794221,"y1":0.789573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.789573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.410426029794221,"y1":0.589573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.589573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.410426029794221,"y1":0.589573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.589573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0.210426029794221,"y1":0.389573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.389573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0.210426029794221,"y1":0.389573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.389573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":0.189573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.477425158989311,"y0":0,"y1":24.9730178497302,"yanchor":0.189573970205779,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":0.189573970205779},{"type":"rect","fillcolor":"rgba(44,62,80,1)","line":{"color":"rgba(44,62,80,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.522574841010689,"x1":1,"y0":0,"y1":24.9730178497302,"yanchor":0.189573970205779,"ysizemode":"pixel"}],"annotations":[{"text":"ADELAIDE-MELBOURNE","x":0.238712579494655,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"ADELAIDE-SYDNEY","x":0.761287420505345,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"BRISBANE-CAIRNS","x":0.238712579494655,"y":0.789573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"BRISBANE-MELBOURNE","x":0.761287420505345,"y":0.789573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"BRISBANE-SYDNEY","x":0.238712579494655,"y":0.589573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"GOLD COAST-SYDNEY","x":0.761287420505345,"y":0.589573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"MELBOURNE-GOLD COAST","x":0.238712579494655,"y":0.389573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"MELBOURNE-PERTH","x":0.761287420505345,"y":0.389573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"MELBOURNE-SYDNEY","x":0.238712579494655,"y":0.189573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"PERTH-SYDNEY","x":0.761287420505345,"y":0.189573970205779,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(255,255,255,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"xaxis2":{"type":"date","autorange":true,"range":["2018-07-15","2019-07-17"],"tickmode":"auto","ticktext":["Oct 2018","Jan 2019","Apr 2019","Jul 2019"],"tickvals":[17805,17897,17987,18078],"categoryorder":"array","categoryarray":["Oct 2018","Jan 2019","Apr 2019","Jul 2019"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.522574841010689,1],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"y10","title":"","hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":true,"range":[11.8208911080165,12.0631460305143],"tickmode":"auto","ticktext":["11.85","11.90","11.95","12.00","12.05"],"tickvals":[11.85,11.9,11.95,12,12.05],"categoryorder":"array","categoryarray":["11.85","11.90","11.95","12.00","12.05"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.810426029794221,1],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":true,"range":[11.4290062063617,11.7162554402434],"tickmode":"auto","ticktext":["11.5","11.6","11.7"],"tickvals":[11.5,11.6,11.7],"categoryorder":"array","categoryarray":["11.5","11.6","11.7"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.610426029794221,0.789573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":true,"range":[12.440007163636,12.7228225504166],"tickmode":"auto","ticktext":["12.45","12.50","12.55","12.60","12.65","12.70"],"tickvals":[12.45,12.5,12.55,12.6,12.65,12.7],"categoryorder":"array","categoryarray":["12.45","12.50","12.55","12.60","12.65","12.70"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.610426029794221,0.789573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":true,"range":[12.7651317104658,12.9839609535567],"tickmode":"auto","ticktext":["12.80","12.85","12.90","12.95"],"tickvals":[12.8,12.85,12.9,12.95],"categoryorder":"array","categoryarray":["12.80","12.85","12.90","12.95"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.410426029794221,0.589573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":true,"range":[12.1831506191949,12.5018546645077],"tickmode":"auto","ticktext":["12.2","12.3","12.4","12.5"],"tickvals":[12.2,12.3,12.4,12.5],"categoryorder":"array","categoryarray":["12.2","12.3","12.4","12.5"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.410426029794221,0.589573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis7":{"type":"linear","autorange":true,"range":[11.8425441953185,12.2566815496516],"tickmode":"auto","ticktext":["11.85","11.95","12.05","12.15","12.25"],"tickvals":[11.85,11.95,12.05,12.15,12.25],"categoryorder":"array","categoryarray":["11.85","11.95","12.05","12.15","12.25"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.210426029794221,0.389573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis8":{"type":"linear","autorange":true,"range":[11.9334247668524,12.1916510147678],"tickmode":"auto","ticktext":["11.95","12.00","12.05","12.10","12.15"],"tickvals":[11.95,12,12.05,12.1,12.15],"categoryorder":"array","categoryarray":["11.95","12.00","12.05","12.10","12.15"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.210426029794221,0.389573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"yaxis9":{"type":"linear","autorange":true,"range":[13.4533166516927,13.6264985897102],"tickmode":"auto","ticktext":["13.50","13.55","13.60"],"tickvals":[13.5,13.55,13.6],"categoryorder":"array","categoryarray":["13.50","13.55","13.60"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.189573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis10":{"type":"linear","autorange":true,"range":[11.7210567239769,11.9433506119453],"tickmode":"auto","ticktext":["11.75","11.80","11.85","11.90"],"tickvals":[11.75,11.8,11.85,11.9],"categoryorder":"array","categoryarray":["11.75","11.80","11.85","11.90"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.189573970205779],"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x2","title":"","hoverformat":".2f"},"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"9bc467821dee":{"x":{},"y":{},"type":"scatter"}},"cur_data":"9bc467821dee","visdat":{"9bc467821dee":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="gluonts" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="gluonts"><span class="header-section-number">6</span> GLUONTS</h2>
<p><a href="https://ts.gluon.ai/stable/">GluonTS</a> is a Python package for probabilistic time series modeling, focusing on deep learning based models, based on <a href="https://pytorch.org/">PyTorch</a> and <a href="https://mxnet.apache.org/">MXNet</a>. It was developed by Amazon.</p>
<p>Some quotes from the GluonTS website are useful:</p>
<p>” In forecasting, there is the implicit assumption that observable behaviours of the past that impact time series values continue into the future. ”</p>
<p>” Naturally, it’s impossible to forecast the unpredictable. For instance, in 2019 it was virtually impossible to account for the possibility of travel restrictions due to the Covid-19 pandemic when trying to forecacst travel demand for 2020.</p>
<p>Thus, forecasting operates on the caveat that the underlying factors that generate the time series values don’t fundamentally change in the future. It is a tool to predict the ordinary and not the surprising.”</p>
<p>In this analysis we get around this ’problem, by only predicting passenger numbers up to the beginning of covid effect, and maybe soon post covid impact.</p>
<p>Another key aspect of GluonTS is that it is probabilistic - predicting distributions of outcomes not just one value per time point. This is very useful.</p>
<p>Another useful feature of GluonTS is that it includes the concept of Global models which enables many time series to be trained together and then used to make probabilistic predictions for each time series. In this analysis we have 70 or so time series - one for each route.</p>
<p>GluonTS makes <a href="https://ts.gluon.ai/stable/getting_started/models.html">many models</a> available in Python. A number of the models and concepts (eg hierarchical forecasting are based/wrapped on the Forecast package in R and the related textbook <a href="https://otexts.com/fpp3/hts.html">Forecasting: Principles and Practice</a>.</p>
<p>This analysis uses the modeltime.gluonts package in R to interface to GluonTS. This R library enables an R interface to some of the GluonTS models. The following analysis uses:</p>
<ul>
<li><p>DeepAR</p></li>
<li><p>N-Beats</p></li>
</ul>
<div class="cell" data-hash="index_cache/html/gluon_recipe_71cb424906ab3e8f23427bb5e7c65edd">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.0 GLUONTS MODELS ----</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># * GLUON Recipe Specification ----</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Gluon only needs Target,ID(groups) and date</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>recipe_spec_gluon <span class="ot">&lt;-</span> <span class="fu">recipe</span>(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  passenger_trips <span class="sc">~</span> route <span class="sc">+</span> date <span class="sc">+</span> rowid,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">training</span>(splits)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(rowid,<span class="at">new_role =</span> <span class="st">"indicator"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co">#recipe_spec_gluon %&gt;% prep() %&gt;% juice()</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>recipe_spec_gluon <span class="sc">%&gt;%</span> <span class="fu">prep</span>() <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  variable        type      role      source  
  &lt;chr&gt;           &lt;list&gt;    &lt;chr&gt;     &lt;chr&gt;   
1 route           &lt;chr [3]&gt; predictor original
2 date            &lt;chr [1]&gt; predictor original
3 rowid           &lt;chr [2]&gt; indicator original
4 passenger_trips &lt;chr [2]&gt; outcome   original</code></pre>
</div>
</div>
<section id="deepar" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="deepar"><span class="header-section-number">6.1</span> DeepAR</h3>
<p>DeepAR was also developed by Amazon (as part of Sagemaker) which is particularly suited to cross-sectional analysis (eg routes), in that the time series are trained jointly across all routes (in our case).</p>
<p>A few different combinations of epoch numbers and batch sizes per epoch have been tried</p>
<section id="deepar-model-1---epochs-5-batch-size-epoch50" class="level4">
<h4 class="anchored" data-anchor-id="deepar-model-1---epochs-5-batch-size-epoch50">DeepAR Model 1 - epochs 5; batch size/ epoch:50</h4>
<div class="cell" data-hash="index_cache/html/deepar_1_bfecfe6aaf20e37f3899765203dc325e">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>model_spec_1_deepar <span class="ot">&lt;-</span> <span class="fu">deep_ar</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Required params</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                =</span> <span class="st">"route"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq              =</span> <span class="st">"M"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length =</span> FORECAST_HORIZON,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#trainer</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs            =</span> <span class="dv">5</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">#DeepAR specific</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_type         =</span><span class="st">"lstm"</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_deepar"</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">#wflow</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>wflw_fit_deepar_1 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_1_deepar) <span class="sc">%&gt;%</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>model_spec_1_deepar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>DeepAR Model Specification (regression)

Main Arguments:
  id = route
  freq = M
  prediction_length = FORECAST_HORIZON
  cell_type = lstm
  epochs = 5

Computational engine: gluonts_deepar </code></pre>
</div>
</div>
</section>
<section id="deepar-model-2---epochs-10-batch-size-epoch-35" class="level4">
<h4 class="anchored" data-anchor-id="deepar-model-2---epochs-10-batch-size-epoch-35">DeepAR Model 2 - epochs 10; batch size/ epoch: 35&nbsp;</h4>
<div class="cell" data-hash="index_cache/html/deepar_2_477b20e999b7f8246fb67c1cfdcf0b9f">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 2: Increase Epochs, Adjust Num Batches per Epoch</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#model spec</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>model_spec_2_deepar <span class="ot">&lt;-</span> <span class="fu">deep_ar</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                    =</span> <span class="st">"route"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq                  =</span> <span class="st">"M"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length     =</span> FORECAST_HORIZON,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs                =</span> <span class="dv">10</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_batches_per_epoch =</span> <span class="dv">35</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">#DeepAR specific</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_type             =</span> <span class="st">"lstm"</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_deepar"</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co">#wflow</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>wflw_fit_deepar_2 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_2_deepar) <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>model_spec_2_deepar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>DeepAR Model Specification (regression)

Main Arguments:
  id = route
  freq = M
  prediction_length = FORECAST_HORIZON
  cell_type = lstm
  epochs = 10
  num_batches_per_epoch = 35

Computational engine: gluonts_deepar </code></pre>
</div>
</div>
</section>
<section id="deepar-model-3---epochs-10-batch-size-epoch-50" class="level4">
<h4 class="anchored" data-anchor-id="deepar-model-3---epochs-10-batch-size-epoch-50">DeepAR Model 3 - epochs 10; batch size/ epoch: 50&nbsp;</h4>
<div class="cell" data-hash="index_cache/html/deepar_3_bcefc22e1be0d8ed3830f4c342abdb76">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 3: Increase Epochs, Adjust Num Batches Per Epoch, &amp; Add Scaling</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>model_spec_3_deepar <span class="ot">&lt;-</span> <span class="fu">deep_ar</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                    =</span> <span class="st">"route"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq                  =</span> <span class="st">"M"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length     =</span> FORECAST_HORIZON,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs                =</span> <span class="dv">10</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_batches_per_epoch =</span> <span class="dv">50</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale                 =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">#DeepAR specific</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_type             =</span> <span class="st">"lstm"</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_deepar"</span>)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co">#wflow</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>wflw_fit_deepar_3 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_3_deepar) <span class="sc">%&gt;%</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>model_spec_3_deepar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>DeepAR Model Specification (regression)

Main Arguments:
  id = route
  freq = M
  prediction_length = FORECAST_HORIZON
  cell_type = lstm
  epochs = 10
  num_batches_per_epoch = 50
  scale = TRUE

Computational engine: gluonts_deepar </code></pre>
</div>
</div>
</section>
</section>
<section id="n-beats-neural-basis-expansion-analysis-for-time-series" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="n-beats-neural-basis-expansion-analysis-for-time-series"><span class="header-section-number">6.2</span> N-Beats (Neural Basis Expansion Analysis for Time Series)</h3>
<p>N-BEATS is <a href="https://arxiv.org/abs/1905.10437">a type of neural network that was first described in a 2019 article by Oreshkin et al</a></p>
<p>Modeltime.gluonts package allows for 2 types of implementations: Standard or Ensemble. The following models include a mix of both, also with varying hyper-parameters.</p>
<section id="n-beats-model-4---default-epochs5" class="level4">
<h4 class="anchored" data-anchor-id="n-beats-model-4---default-epochs5">N-Beats Model 4 - Default (epochs:5)</h4>
<div class="cell" data-hash="index_cache/html/nbeats_4_a1c53bbf38548d10acff868fe3dc53b8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># * N-BEATS Estimator ----</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 4: N-BEATS default</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_4 <span class="ot">&lt;-</span> <span class="fu">nbeats</span>(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                =</span> <span class="st">"route"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq              =</span> <span class="st">"M"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length =</span> FORECAST_HORIZON,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">lookback_length   =</span> <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_nbeats"</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>wflw_fit_nbeats_4 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_nbeats_4) <span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>N-BEATS Model Specification (regression)

Main Arguments:
  id = route
  freq = M
  prediction_length = FORECAST_HORIZON
  lookback_length = 2 * FORECAST_HORIZON

Computational engine: gluonts_nbeats </code></pre>
</div>
</div>
</section>
<section id="n-beats-model-5---default-epochs5loss-fnmase" class="level4">
<h4 class="anchored" data-anchor-id="n-beats-model-5---default-epochs5loss-fnmase">N-Beats Model 5 - Default (epochs:5;loss fn:MASE)</h4>
<div class="cell" data-hash="index_cache/html/nbeats_5_3e60b1c4516f1f2c093c8204760bd7d7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 5: N-BEATS, loss function:MASE, Reduce Epochs 2</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_5 <span class="ot">&lt;-</span> <span class="fu">nbeats</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                =</span> <span class="st">"route"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq              =</span> <span class="st">"M"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length =</span> FORECAST_HORIZON,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">lookback_length   =</span> <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs            =</span> <span class="dv">5</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">loss_function     =</span> <span class="st">"MASE"</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_nbeats"</span>)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>wflw_fit_nbeats_5 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_nbeats_5) <span class="sc">%&gt;%</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>N-BEATS Model Specification (regression)

Main Arguments:
  id = route
  freq = M
  prediction_length = FORECAST_HORIZON
  lookback_length = 2 * FORECAST_HORIZON
  loss_function = MASE
  epochs = 5

Computational engine: gluonts_nbeats </code></pre>
</div>
</div>
</section>
<section id="n-beats-model-6---default-ensemble-epochs5-loss-fnmase" class="level4">
<h4 class="anchored" data-anchor-id="n-beats-model-6---default-ensemble-epochs5-loss-fnmase">N-Beats Model 6 - Default (ensemble; epochs:5; loss fn:MASE)</h4>
<div class="cell" data-hash="index_cache/html/nbeats_6_3f6c5f4d577b6056d15c65734fdcddd6">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 6: N-BEATS, Model 5 ensemble</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_6 <span class="ot">&lt;-</span> <span class="fu">nbeats</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                    =</span> <span class="st">"route"</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq                  =</span> <span class="st">"M"</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length     =</span> FORECAST_HORIZON,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">lookback_length       =</span> <span class="fu">c</span>(FORECAST_HORIZON, <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs                =</span> <span class="dv">5</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_batches_per_epoch =</span> <span class="dv">35</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">loss_function         =</span> <span class="st">"MASE"</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">bagging_size          =</span> <span class="dv">2</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_nbeats_ensemble"</span>)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>wflw_fit_nbeats_6 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_nbeats_6) <span class="sc">%&gt;%</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>N-BEATS Model Specification (regression)

Main Arguments:
  id = route
  freq = M
  prediction_length = FORECAST_HORIZON
  lookback_length = c(FORECAST_HORIZON, 2 * FORECAST_HORIZON)
  loss_function = MASE
  bagging_size = 2
  epochs = 5
  num_batches_per_epoch = 35

Computational engine: gluonts_nbeats_ensemble </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="modeltime-comparison" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="modeltime-comparison"><span class="header-section-number">7</span> Modeltime Comparison</h2>
<p>The following code puts all models in the one table, renames them and produces an accuracy report, sorted by ‘MAAPE’, best at top. Unfortunately it does not want to render in quarto.</p>
<div class="cell" data-hash="index_cache/html/accuracy_1d365c65d60566abb8a30e0633ace866">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#modeltime_calibrate()</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Modeltime Comparison ----</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>model_tbl_submodels <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_1,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_2,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_3,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_4,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_5,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_6</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>model_tbl_submodels <span class="ot">&lt;-</span> model_tbl_submodels <span class="sc">%&gt;%</span> </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">1</span>,<span class="st">"DEEPAR - unscaled, 5ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">2</span>,<span class="st">"DEEPAR - unscaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">3</span>,<span class="st">"DEEPAR - scaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">4</span>,<span class="st">"N-BEATS - 5ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">5</span>,<span class="st">"N-BEATS - 5ep,MASE"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">6</span>,<span class="st">"N-BEATS - ens, 5ep,MASE"</span>) </span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_submodels_calibrate &lt;- model_tbl_submodels %&gt;% </span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co">#   modeltime_calibrate(new_data = testing(splits))</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="co"># # Forecast Accuracy</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_submodels_calibrate %&gt;%</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="co">#   modeltime_accuracy(</span></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     #testing(splits),</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="co">#     metric_set = extended_forecast_accuracy_metric_set()) %&gt;% </span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(maape) %&gt;% </span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a><span class="co">#    gt::gt() %&gt;% </span></span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a><span class="co">#     gt::fmt_number(</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a><span class="co">#      columns = 4:10,</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a><span class="co">#       decimals = 3)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="refit-models" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="refit-models"><span class="header-section-number">8</span> Refit Models</h2>
<p>Models are then refit to full train/test data.</p>
<div class="cell" data-hash="index_cache/html/refit_35d30fa8a71770b2237b045252d8b88b">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>submodels_refitted_tbl <span class="ot">&lt;-</span> model_tbl_submodels <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_refit</span>(data_prepared_tbl)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>submodels_refitted_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># Modeltime Table
# A tibble: 6 × 3
  .model_id .model     .model_desc            
      &lt;int&gt; &lt;list&gt;     &lt;chr&gt;                  
1         1 &lt;workflow&gt; DEEPAR - unscaled, 5ep 
2         2 &lt;workflow&gt; DEEPAR - unscaled, 10ep
3         3 &lt;workflow&gt; DEEPAR - scaled, 10ep  
4         4 &lt;workflow&gt; N-BEATS - 5ep          
5         5 &lt;workflow&gt; N-BEATS - 5ep,MASE     
6         6 &lt;workflow&gt; N-BEATS - ens, 5ep,MASE</code></pre>
</div>
</div>
</section>
<section id="make-predictions" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="make-predictions"><span class="header-section-number">9</span> Make Predictions</h2>
<div class="cell" data-hash="index_cache/html/prediction_all_029aa4adb3d8a7b8f2ddd862da0d8a3e">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>submodels_pred_ <span class="ot">&lt;-</span> submodels_refitted_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">new_data =</span> future_tbl,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">actual_data =</span> data_prepared_tbl,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">keep_data =</span> <span class="cn">TRUE</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(submodels_pred_)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 24
  .mode…¹ .mode…² .key  .index     .value rowid route date       passe…³ index…⁴
    &lt;int&gt; &lt;chr&gt;   &lt;fct&gt; &lt;date&gt;      &lt;dbl&gt; &lt;int&gt; &lt;chr&gt; &lt;date&gt;       &lt;dbl&gt;   &lt;dbl&gt;
1      NA ACTUAL  actu… 2002-01-01   8.74    13 ADEL… 2002-01-01    8.74    20.7
2      NA ACTUAL  actu… 2002-02-01   8.68    14 ADEL… 2002-02-01    8.68    20.7
3      NA ACTUAL  actu… 2002-03-01   8.87    15 ADEL… 2002-03-01    8.87    20.7
4      NA ACTUAL  actu… 2002-04-01   8.88    16 ADEL… 2002-04-01    8.88    20.7
5      NA ACTUAL  actu… 2002-05-01   8.76    17 ADEL… 2002-05-01    8.76    20.7
6      NA ACTUAL  actu… 2002-06-01   8.75    18 ADEL… 2002-06-01    8.75    20.7
# … with 14 more variables: diff &lt;dbl&gt;, year &lt;dbl&gt;, half &lt;int&gt;, quarter &lt;int&gt;,
#   month &lt;int&gt;, month.lbl &lt;ord&gt;, date_sin6_K1 &lt;dbl&gt;, date_cos6_K1 &lt;dbl&gt;,
#   date_sin12_K1 &lt;dbl&gt;, date_cos12_K1 &lt;dbl&gt;, passenger_trips_lag12 &lt;dbl&gt;,
#   passenger_trips_lag12_roll_6 &lt;dbl&gt;, passenger_trips_lag12_roll_12 &lt;dbl&gt;,
#   passenger_trips_lag12_roll_24 &lt;dbl&gt;, and abbreviated variable names
#   ¹​.model_id, ²​.model_desc, ³​passenger_trips, ⁴​index.num</code></pre>
</div>
</div>
<div class="cell" data-hash="index_cache/html/calibrate_57a91cd44e4fc0207b7c4e651f5d08e7">

</div>
<div class="cell" data-hash="index_cache/html/pred_graph_90efa646dfb9736ebabe4c6cc3e242f7">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>submodels_pred_ <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value,<span class="at">colour =</span> .model_desc))<span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"pax pm(000)"</span>) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> route,  <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/pred_graph-1.png" class="img-fluid" width="960"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot_modeltime_forecast(</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   .trelliscope = F,</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   .facet_ncol = 2,</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   .title = "Predictions - Top10 Routes"</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The accuracy stats and graph suggest that some of these are not so good. ..</p>
</section>
<section id="ensemble-model" class="level2" data-number="10">
<h2 data-number="10" class="anchored" data-anchor-id="ensemble-model"><span class="header-section-number">10</span> Ensemble Model</h2>
<p>Ensemble the top deep learning models:</p>
<ul>
<li><p>Model 6 - N-Beats ensuite</p></li>
<li><p>Model 3 - DeepAR scaled, 10 epochs</p></li>
<li><p>Model 2 - DeepAR unscaled 10 epochs</p></li>
</ul>
<p>There is no reason not to also include some ML models in the ensemble - we will do that in a separate post.</p>
<div class="cell" data-hash="index_cache/html/ensemble_8dbeeac80344318714fd2eb4c31f7bdf">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modeltime Comparison ----</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#wflw_fit_deepar_1,</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_2,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_3,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#wflw_fit_nbeats_4,</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#wflw_fit_nbeats_5,</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_6</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble <span class="ot">&lt;-</span> model_tbl_ensemble <span class="sc">%&gt;%</span> </span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#update_model_description(1,"DEEPAR - unscaled, 5ep") %&gt;% </span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">1</span>,<span class="st">"DEEPAR - unscaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">2</span>,<span class="st">"DEEPAR - scaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#update_model_description(4,"N-BEATS - 5ep") %&gt;% </span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">#update_model_description(5,"N-BEATS - 5ep,MASE") %&gt;% </span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">3</span>,<span class="st">"N-BEATS - ens, 5ep,MASE"</span>) </span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_wtd <span class="ot">&lt;-</span> model_tbl_ensemble <span class="sc">%&gt;%</span> </span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ensemble_weighted</span>(<span class="at">loadings =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_table</span>()</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_ensemble_calibrate &lt;- model_tbl_ensemble %&gt;% </span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   modeltime_calibrate(new_data = testing(splits))</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_ensemble_calibrate %&gt;% </span></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     modeltime_accuracy(</span></span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a><span class="co">#       #testing(splits),</span></span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a><span class="co">#       metric_set = extended_forecast_accuracy_metric_set()</span></span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a><span class="co">#     arrange(rmse) %&gt;%</span></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="co">#    gt::gt() %&gt;% </span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a><span class="co">#     gt::fmt_number(</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a><span class="co">#      columns = 4:10,</span></span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a><span class="co">#       decimals = 3)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="refit-ensemble-to-full-traintest-data-set-and-graph" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="refit-ensemble-to-full-traintest-data-set-and-graph"><span class="header-section-number">11</span> Refit Ensemble to Full Train/Test Data Set and Graph</h2>
<div class="cell" data-hash="index_cache/html/refit_ensemble_caedfd2c7a31816a1b285576e6601d7d">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_refit <span class="ot">&lt;-</span> model_tbl_ensemble_wtd <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_refit</span>(data_prepared_tbl)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_pred <span class="ot">&lt;-</span> model_tbl_ensemble_refit <span class="sc">%&gt;%</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_data =</span> future_tbl,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">actual_data =</span> data_prepared_tbl,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_data =</span> <span class="cn">TRUE</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">.value1 =</span> <span class="fu">expm1</span>(.value))</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_pred <span class="sc">%&gt;%</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>         .index<span class="sc">&gt;</span>lubridate<span class="sc">::</span><span class="fu">ymd</span>(<span class="st">"2015-01,01"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value1<span class="sc">/</span><span class="dv">1000</span>,<span class="at">colour =</span> .model_desc))<span class="sc">+</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"pax pm(000)"</span>) <span class="sc">+</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> route,  <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/refit_ensemble-1.png" class="img-fluid" width="960"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>    <span class="co"># group_by(route) %&gt;% </span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># plot_modeltime_forecast(</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     .facet_ncol = 4</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb30" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Flight Forecasting with Deep Learning - Incomplete"</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Stephen J Parton"</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2022-12-27"</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [code, analytics, flights, maps]</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="an">website:</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co">  sidebar:</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co">    style: "docked"</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co">    search: true</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co">  html: </span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: litera</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="an">toc-title:</span><span class="co"> Contents</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="an">number-depth:</span><span class="co"> 3</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="an">code-summary:</span><span class="co"> "Code"</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="co">  error: false</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a><span class="an">freeze:</span><span class="co"> true</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a><span class="an">cache:</span><span class="co"> true</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>This analysis is one section of a multi-part set of posts looking at forecasting on domestic Australian flight volumes by route in the period prior to when covid largely shut the industry down. Its intention is just to provide me with examples over the main models to save time on future projects.It is split into:</span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>1<span class="sc">\.</span> Some pre analysis (basic EDA analysis is not covered as already included in previous posts)</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>2<span class="sc">\.</span> 'Sequence' style models - ARIMA etc</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>3<span class="sc">\.</span> ML style models - XGBoost etc including nesting and ensembling</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>4<span class="sc">\.</span> Deep learning models (GLuonTS etc)</span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>5<span class="sc">\.</span> Summary of conclusions</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>This post is in relation to the part 4. Approaches used are:</span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>GluonTS</span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>DeepAR</span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>N-BEATS</span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a><span class="fu">## Load Libraries</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, libraries}</span></span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a><span class="co"># Time Series ML</span></span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime)</span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime.gluonts)</span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltime.ensemble)</span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-62"><a href="#cb30-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Core</span></span>
<span id="cb30-63"><a href="#cb30-63" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb30-64"><a href="#cb30-64" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb30-65"><a href="#cb30-65" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timetk)</span>
<span id="cb30-66"><a href="#cb30-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-67"><a href="#cb30-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Timing &amp; Parallel Processing</span></span>
<span id="cb30-68"><a href="#cb30-68" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb30-69"><a href="#cb30-69" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future)</span>
<span id="cb30-70"><a href="#cb30-70" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doFuture)</span>
<span id="cb30-71"><a href="#cb30-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-72"><a href="#cb30-72" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb30-73"><a href="#cb30-73" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb30-74"><a href="#cb30-74" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb30-75"><a href="#cb30-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-76"><a href="#cb30-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-77"><a href="#cb30-77" aria-hidden="true" tabindex="-1"></a><span class="fu">## Load Data</span></span>
<span id="cb30-78"><a href="#cb30-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-79"><a href="#cb30-79" aria-hidden="true" tabindex="-1"></a>Loading pre-prepared data as well as some parameters. Also setting up parallel processing.</span>
<span id="cb30-80"><a href="#cb30-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-81"><a href="#cb30-81" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, data}</span></span>
<span id="cb30-82"><a href="#cb30-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-83"><a href="#cb30-83" aria-hidden="true" tabindex="-1"></a>top_routes_prep_df <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="fu">here</span>(<span class="st">"./posts/aust_domestic_flights/artifacts/top_routes_prep_df.rds"</span>))</span>
<span id="cb30-84"><a href="#cb30-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-85"><a href="#cb30-85" aria-hidden="true" tabindex="-1"></a>start          <span class="ot">&lt;-</span> <span class="st">"2001-01-01"</span></span>
<span id="cb30-86"><a href="#cb30-86" aria-hidden="true" tabindex="-1"></a>end            <span class="ot">&lt;-</span> <span class="st">"2019-07-01"</span></span>
<span id="cb30-87"><a href="#cb30-87" aria-hidden="true" tabindex="-1"></a>horizon_nested <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb30-88"><a href="#cb30-88" aria-hidden="true" tabindex="-1"></a>end_precovid   <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"01-02-2020"</span>)</span>
<span id="cb30-89"><a href="#cb30-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-90"><a href="#cb30-90" aria-hidden="true" tabindex="-1"></a>top_x          <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb30-91"><a href="#cb30-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-92"><a href="#cb30-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-93"><a href="#cb30-93" aria-hidden="true" tabindex="-1"></a><span class="co">#d2 &lt;- dmy("01-07-2022")</span></span>
<span id="cb30-94"><a href="#cb30-94" aria-hidden="true" tabindex="-1"></a>max_act   <span class="ot">&lt;-</span> <span class="fu">max</span>(top_routes_prep_df<span class="sc">$</span>date)</span>
<span id="cb30-95"><a href="#cb30-95" aria-hidden="true" tabindex="-1"></a>max_test  <span class="ot">&lt;-</span> <span class="fu">ymd</span>(end)</span>
<span id="cb30-96"><a href="#cb30-96" aria-hidden="true" tabindex="-1"></a>max_pred  <span class="ot">&lt;-</span> max_test <span class="sc">%m+%</span> <span class="fu">months</span>(horizon_nested)</span>
<span id="cb30-97"><a href="#cb30-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-98"><a href="#cb30-98" aria-hidden="true" tabindex="-1"></a>FORECAST_HORIZON <span class="ot">&lt;-</span>  <span class="dv">1</span><span class="sc">*</span><span class="dv">12</span></span>
<span id="cb30-99"><a href="#cb30-99" aria-hidden="true" tabindex="-1"></a>lag_period       <span class="ot">&lt;-</span>  <span class="dv">1</span><span class="sc">*</span><span class="dv">12</span></span>
<span id="cb30-100"><a href="#cb30-100" aria-hidden="true" tabindex="-1"></a>rolling_periods  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">12</span>)</span>
<span id="cb30-101"><a href="#cb30-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-102"><a href="#cb30-102" aria-hidden="true" tabindex="-1"></a><span class="co"># * Parallel Processing ----</span></span>
<span id="cb30-103"><a href="#cb30-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-104"><a href="#cb30-104" aria-hidden="true" tabindex="-1"></a><span class="fu">registerDoFuture</span>()</span>
<span id="cb30-105"><a href="#cb30-105" aria-hidden="true" tabindex="-1"></a>n_cores <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">detectCores</span>()</span>
<span id="cb30-106"><a href="#cb30-106" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(</span>
<span id="cb30-107"><a href="#cb30-107" aria-hidden="true" tabindex="-1"></a>  <span class="at">strategy =</span> cluster,</span>
<span id="cb30-108"><a href="#cb30-108" aria-hidden="true" tabindex="-1"></a>  <span class="at">workers  =</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(n_cores)</span>
<span id="cb30-109"><a href="#cb30-109" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-110"><a href="#cb30-110" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-111"><a href="#cb30-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-112"><a href="#cb30-112" aria-hidden="true" tabindex="-1"></a><span class="fu">## Preprocessing</span></span>
<span id="cb30-113"><a href="#cb30-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-114"><a href="#cb30-114" aria-hidden="true" tabindex="-1"></a>Some additional wrangling.</span>
<span id="cb30-115"><a href="#cb30-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-116"><a href="#cb30-116" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, wrangle}</span></span>
<span id="cb30-117"><a href="#cb30-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-118"><a href="#cb30-118" aria-hidden="true" tabindex="-1"></a><span class="co"># topx list</span></span>
<span id="cb30-119"><a href="#cb30-119" aria-hidden="true" tabindex="-1"></a>topx <span class="ot">&lt;-</span> top_routes_prep_df <span class="sc">%&gt;%</span> </span>
<span id="cb30-120"><a href="#cb30-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span> </span>
<span id="cb30-121"><a href="#cb30-121" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">passenger_trips =</span> <span class="fu">sum</span>(passenger_trips)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-122"><a href="#cb30-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-123"><a href="#cb30-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(passenger_trips, <span class="at">n=</span>top_x) <span class="sc">%&gt;%</span> </span>
<span id="cb30-124"><a href="#cb30-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(passenger_trips)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-125"><a href="#cb30-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(route) <span class="sc">%&gt;%</span> </span>
<span id="cb30-126"><a href="#cb30-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-127"><a href="#cb30-127" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.character</span>()</span>
<span id="cb30-128"><a href="#cb30-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-129"><a href="#cb30-129" aria-hidden="true" tabindex="-1"></a>full_data_tbl <span class="ot">&lt;-</span> top_routes_prep_df <span class="sc">%&gt;%</span></span>
<span id="cb30-130"><a href="#cb30-130" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb30-131"><a href="#cb30-131" aria-hidden="true" tabindex="-1"></a>  <span class="co">#initial wrangle</span></span>
<span id="cb30-132"><a href="#cb30-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(route,date,passenger_trips) <span class="sc">%&gt;%</span></span>
<span id="cb30-133"><a href="#cb30-133" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">route =</span> <span class="fu">as.character</span>(route)) <span class="sc">%&gt;%</span></span>
<span id="cb30-134"><a href="#cb30-134" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb30-135"><a href="#cb30-135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_by_time</span>(date, <span class="at">.by =</span> <span class="st">"month"</span>, <span class="at">passenger_trips =</span> <span class="fu">sum</span>(passenger_trips)) <span class="sc">%&gt;%</span></span>
<span id="cb30-136"><a href="#cb30-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pad_by_time</span>(</span>
<span id="cb30-137"><a href="#cb30-137" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb30-138"><a href="#cb30-138" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by       =</span> <span class="st">"month"</span>,</span>
<span id="cb30-139"><a href="#cb30-139" aria-hidden="true" tabindex="-1"></a>    <span class="at">.pad_value  =</span> <span class="dv">0</span>,</span>
<span id="cb30-140"><a href="#cb30-140" aria-hidden="true" tabindex="-1"></a>    <span class="at">.start_date =</span> <span class="fu">min</span>(top_routes_prep_df<span class="sc">$</span>date)) <span class="sc">%&gt;%</span></span>
<span id="cb30-141"><a href="#cb30-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_by_time</span>(<span class="at">.date_var    =</span> date,<span class="at">.start_date =</span> start, <span class="at">.end_date =</span> end ) <span class="sc">%&gt;%</span></span>
<span id="cb30-142"><a href="#cb30-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb30-143"><a href="#cb30-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-144"><a href="#cb30-144" aria-hidden="true" tabindex="-1"></a>full_data_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb30-145"><a href="#cb30-145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_timeseries_signature</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-146"><a href="#cb30-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(day<span class="sc">:</span>mday7)) <span class="sc">%&gt;%</span></span>
<span id="cb30-147"><a href="#cb30-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">".iso"</span>),<span class="sc">-</span><span class="fu">contains</span>(<span class="st">".xts"</span>))</span>
<span id="cb30-148"><a href="#cb30-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-149"><a href="#cb30-149" aria-hidden="true" tabindex="-1"></a>full_data_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb30-150"><a href="#cb30-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-151"><a href="#cb30-151" aria-hidden="true" tabindex="-1"></a>  <span class="co">#log transform target</span></span>
<span id="cb30-152"><a href="#cb30-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">passenger_trips      =</span> <span class="fu">log1p</span>(passenger_trips),</span>
<span id="cb30-153"><a href="#cb30-153" aria-hidden="true" tabindex="-1"></a>         <span class="at">index.num            =</span> <span class="fu">log1p</span>(index.num),</span>
<span id="cb30-154"><a href="#cb30-154" aria-hidden="true" tabindex="-1"></a>         <span class="at">diff                 =</span> <span class="fu">log1p</span>(diff),</span>
<span id="cb30-155"><a href="#cb30-155" aria-hidden="true" tabindex="-1"></a>         <span class="at">year                 =</span> <span class="fu">log1p</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb30-156"><a href="#cb30-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-157"><a href="#cb30-157" aria-hidden="true" tabindex="-1"></a>  <span class="co">#groupwise manipulation</span></span>
<span id="cb30-158"><a href="#cb30-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb30-159"><a href="#cb30-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-160"><a href="#cb30-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">future_frame</span>(</span>
<span id="cb30-161"><a href="#cb30-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var   =</span> date,</span>
<span id="cb30-162"><a href="#cb30-162" aria-hidden="true" tabindex="-1"></a>    <span class="at">.length_out =</span> FORECAST_HORIZON,</span>
<span id="cb30-163"><a href="#cb30-163" aria-hidden="true" tabindex="-1"></a>    <span class="at">.bind_data  =</span> <span class="cn">TRUE</span></span>
<span id="cb30-164"><a href="#cb30-164" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-165"><a href="#cb30-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-166"><a href="#cb30-166" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fourier</span></span>
<span id="cb30-167"><a href="#cb30-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_fourier</span>(</span>
<span id="cb30-168"><a href="#cb30-168" aria-hidden="true" tabindex="-1"></a>    <span class="at">.date_var =</span> date,</span>
<span id="cb30-169"><a href="#cb30-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">.periods  =</span> <span class="fu">c</span>(<span class="fl">0.5</span> <span class="sc">*</span> FORECAST_HORIZON, FORECAST_HORIZON),</span>
<span id="cb30-170"><a href="#cb30-170" aria-hidden="true" tabindex="-1"></a>    <span class="at">.K        =</span> <span class="dv">1</span></span>
<span id="cb30-171"><a href="#cb30-171" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-172"><a href="#cb30-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-173"><a href="#cb30-173" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Lags</span></span>
<span id="cb30-174"><a href="#cb30-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-175"><a href="#cb30-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_lags</span>(</span>
<span id="cb30-176"><a href="#cb30-176" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value =</span> passenger_trips,</span>
<span id="cb30-177"><a href="#cb30-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">.lags =</span>  FORECAST_HORIZON</span>
<span id="cb30-178"><a href="#cb30-178" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-179"><a href="#cb30-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-180"><a href="#cb30-180" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rolling Features</span></span>
<span id="cb30-181"><a href="#cb30-181" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tk_augment_slidify</span>(</span>
<span id="cb30-182"><a href="#cb30-182" aria-hidden="true" tabindex="-1"></a>    <span class="at">.value   =</span> passenger_trips_lag12,</span>
<span id="cb30-183"><a href="#cb30-183" aria-hidden="true" tabindex="-1"></a>    <span class="at">.f       =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x,<span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb30-184"><a href="#cb30-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">.period  =</span> <span class="fu">c</span>(<span class="dv">6</span>, FORECAST_HORIZON, <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON),</span>
<span id="cb30-185"><a href="#cb30-185" aria-hidden="true" tabindex="-1"></a>    <span class="at">.partial =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-186"><a href="#cb30-186" aria-hidden="true" tabindex="-1"></a>    <span class="at">.align   =</span> <span class="st">'center'</span></span>
<span id="cb30-187"><a href="#cb30-187" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-188"><a href="#cb30-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-189"><a href="#cb30-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-190"><a href="#cb30-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowid_to_column</span>(<span class="at">var =</span> <span class="st">"rowid"</span>)</span>
<span id="cb30-191"><a href="#cb30-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-192"><a href="#cb30-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-193"><a href="#cb30-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-194"><a href="#cb30-194" aria-hidden="true" tabindex="-1"></a>data_prepared_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb30-195"><a href="#cb30-195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(passenger_trips)) <span class="sc">%&gt;%</span></span>
<span id="cb30-196"><a href="#cb30-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb30-197"><a href="#cb30-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-198"><a href="#cb30-198" aria-hidden="true" tabindex="-1"></a>future_tbl <span class="ot">&lt;-</span> full_data_tbl <span class="sc">%&gt;%</span></span>
<span id="cb30-199"><a href="#cb30-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(passenger_trips))</span>
<span id="cb30-200"><a href="#cb30-200" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-201"><a href="#cb30-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-202"><a href="#cb30-202" aria-hidden="true" tabindex="-1"></a><span class="fu">## Split Data</span></span>
<span id="cb30-203"><a href="#cb30-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-204"><a href="#cb30-204" aria-hidden="true" tabindex="-1"></a>Split into training and testing sets.</span>
<span id="cb30-205"><a href="#cb30-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-206"><a href="#cb30-206" aria-hidden="true" tabindex="-1"></a><span class="fu">### Training Set (top 10 routes)</span></span>
<span id="cb30-207"><a href="#cb30-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-208"><a href="#cb30-208" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, split,fig.width=10,fig.height=15}</span></span>
<span id="cb30-209"><a href="#cb30-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-210"><a href="#cb30-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-211"><a href="#cb30-211" aria-hidden="true" tabindex="-1"></a>splits <span class="ot">&lt;-</span> data_prepared_tbl <span class="sc">%&gt;%</span></span>
<span id="cb30-212"><a href="#cb30-212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">time_series_split</span>(</span>
<span id="cb30-213"><a href="#cb30-213" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_var =</span> date,</span>
<span id="cb30-214"><a href="#cb30-214" aria-hidden="true" tabindex="-1"></a>    <span class="at">assess =</span> FORECAST_HORIZON,</span>
<span id="cb30-215"><a href="#cb30-215" aria-hidden="true" tabindex="-1"></a>    <span class="at">cumulative =</span> <span class="cn">TRUE</span></span>
<span id="cb30-216"><a href="#cb30-216" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-217"><a href="#cb30-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-218"><a href="#cb30-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-219"><a href="#cb30-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-220"><a href="#cb30-220" aria-hidden="true" tabindex="-1"></a><span class="fu">training</span>(splits) <span class="sc">%&gt;%</span></span>
<span id="cb30-221"><a href="#cb30-221" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb30-222"><a href="#cb30-222" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx) <span class="sc">%&gt;%</span></span>
<span id="cb30-223"><a href="#cb30-223" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb30-224"><a href="#cb30-224" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb30-225"><a href="#cb30-225" aria-hidden="true" tabindex="-1"></a>    passenger_trips,</span>
<span id="cb30-226"><a href="#cb30-226" aria-hidden="true" tabindex="-1"></a>    <span class="at">.facet_ncol =</span> <span class="dv">2</span>,</span>
<span id="cb30-227"><a href="#cb30-227" aria-hidden="true" tabindex="-1"></a>    <span class="at">.smooth =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-228"><a href="#cb30-228" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Training Splits"</span></span>
<span id="cb30-229"><a href="#cb30-229" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-230"><a href="#cb30-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-231"><a href="#cb30-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-232"><a href="#cb30-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-233"><a href="#cb30-233" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-234"><a href="#cb30-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-235"><a href="#cb30-235" aria-hidden="true" tabindex="-1"></a><span class="fu">### Testing Set (top 10 routes)</span></span>
<span id="cb30-236"><a href="#cb30-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-237"><a href="#cb30-237" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, testing,fig.width=10,fig.height=15}</span></span>
<span id="cb30-238"><a href="#cb30-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-239"><a href="#cb30-239" aria-hidden="true" tabindex="-1"></a><span class="fu">testing</span>(splits) <span class="sc">%&gt;%</span></span>
<span id="cb30-240"><a href="#cb30-240" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb30-241"><a href="#cb30-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx) <span class="sc">%&gt;%</span></span>
<span id="cb30-242"><a href="#cb30-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(</span>
<span id="cb30-243"><a href="#cb30-243" aria-hidden="true" tabindex="-1"></a>    date,</span>
<span id="cb30-244"><a href="#cb30-244" aria-hidden="true" tabindex="-1"></a>    passenger_trips,</span>
<span id="cb30-245"><a href="#cb30-245" aria-hidden="true" tabindex="-1"></a>    <span class="at">.facet_ncol =</span> <span class="dv">2</span>,</span>
<span id="cb30-246"><a href="#cb30-246" aria-hidden="true" tabindex="-1"></a>     <span class="at">.smooth =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-247"><a href="#cb30-247" aria-hidden="true" tabindex="-1"></a>    <span class="at">.title =</span> <span class="st">"Testing Splits"</span></span>
<span id="cb30-248"><a href="#cb30-248" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-249"><a href="#cb30-249" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-250"><a href="#cb30-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-251"><a href="#cb30-251" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-252"><a href="#cb30-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-253"><a href="#cb30-253" aria-hidden="true" tabindex="-1"></a><span class="fu">## GLUONTS</span></span>
<span id="cb30-254"><a href="#cb30-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-255"><a href="#cb30-255" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">GluonTS</span><span class="co">](https://ts.gluon.ai/stable/)</span> is a Python package for probabilistic time series modeling, focusing on deep learning based models, based on <span class="co">[</span><span class="ot">PyTorch</span><span class="co">](https://pytorch.org/)</span> and <span class="co">[</span><span class="ot">MXNet</span><span class="co">](https://mxnet.apache.org/)</span>. It was developed by Amazon.</span>
<span id="cb30-256"><a href="#cb30-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-257"><a href="#cb30-257" aria-hidden="true" tabindex="-1"></a>Some quotes from the GluonTS website are useful:</span>
<span id="cb30-258"><a href="#cb30-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-259"><a href="#cb30-259" aria-hidden="true" tabindex="-1"></a>" In forecasting, there is the implicit assumption that observable behaviours of the past that impact time series values continue into the future. "</span>
<span id="cb30-260"><a href="#cb30-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-261"><a href="#cb30-261" aria-hidden="true" tabindex="-1"></a>" Naturally, it's impossible to forecast the unpredictable. For instance, in 2019 it was virtually impossible to account for the possibility of travel restrictions due to the Covid-19 pandemic when trying to forecacst travel demand for 2020.</span>
<span id="cb30-262"><a href="#cb30-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-263"><a href="#cb30-263" aria-hidden="true" tabindex="-1"></a>Thus, forecasting operates on the caveat that the underlying factors that generate the time series values don't fundamentally change in the future. It is a tool to predict the ordinary and not the surprising."</span>
<span id="cb30-264"><a href="#cb30-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-265"><a href="#cb30-265" aria-hidden="true" tabindex="-1"></a>In this analysis we get around this 'problem, by only predicting passenger numbers up to the beginning of covid effect, and maybe soon post covid impact.</span>
<span id="cb30-266"><a href="#cb30-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-267"><a href="#cb30-267" aria-hidden="true" tabindex="-1"></a>Another key aspect of GluonTS is that it is probabilistic - predicting distributions of outcomes not just one value per time point. This is very useful.</span>
<span id="cb30-268"><a href="#cb30-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-269"><a href="#cb30-269" aria-hidden="true" tabindex="-1"></a>Another useful feature of GluonTS is that it includes the concept of Global models which enables many time series to be trained together and then used to make probabilistic predictions for each time series. In this analysis we have 70 or so time series - one for each route.</span>
<span id="cb30-270"><a href="#cb30-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-271"><a href="#cb30-271" aria-hidden="true" tabindex="-1"></a>GluonTS makes <span class="co">[</span><span class="ot">many models</span><span class="co">](https://ts.gluon.ai/stable/getting_started/models.html)</span> available in Python. A number of the models and concepts (eg hierarchical forecasting are based/wrapped on the Forecast package in R and the related textbook <span class="co">[</span><span class="ot">Forecasting: Principles and Practice</span><span class="co">](https://otexts.com/fpp3/hts.html)</span>.</span>
<span id="cb30-272"><a href="#cb30-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-273"><a href="#cb30-273" aria-hidden="true" tabindex="-1"></a>This analysis uses the modeltime.gluonts package in R to interface to GluonTS. This R library enables an R interface to some of the GluonTS models. The following analysis uses:</span>
<span id="cb30-274"><a href="#cb30-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-275"><a href="#cb30-275" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>DeepAR</span>
<span id="cb30-276"><a href="#cb30-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-277"><a href="#cb30-277" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>N-Beats</span>
<span id="cb30-278"><a href="#cb30-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-279"><a href="#cb30-279" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,gluon_recipe}</span></span>
<span id="cb30-280"><a href="#cb30-280" aria-hidden="true" tabindex="-1"></a><span class="co"># 3.0 GLUONTS MODELS ----</span></span>
<span id="cb30-281"><a href="#cb30-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-282"><a href="#cb30-282" aria-hidden="true" tabindex="-1"></a><span class="co"># * GLUON Recipe Specification ----</span></span>
<span id="cb30-283"><a href="#cb30-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-284"><a href="#cb30-284" aria-hidden="true" tabindex="-1"></a><span class="co">#Gluon only needs Target,ID(groups) and date</span></span>
<span id="cb30-285"><a href="#cb30-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-286"><a href="#cb30-286" aria-hidden="true" tabindex="-1"></a>recipe_spec_gluon <span class="ot">&lt;-</span> <span class="fu">recipe</span>(</span>
<span id="cb30-287"><a href="#cb30-287" aria-hidden="true" tabindex="-1"></a>  passenger_trips <span class="sc">~</span> route <span class="sc">+</span> date <span class="sc">+</span> rowid,</span>
<span id="cb30-288"><a href="#cb30-288" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> <span class="fu">training</span>(splits)</span>
<span id="cb30-289"><a href="#cb30-289" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-290"><a href="#cb30-290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_role</span>(rowid,<span class="at">new_role =</span> <span class="st">"indicator"</span>)</span>
<span id="cb30-291"><a href="#cb30-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-292"><a href="#cb30-292" aria-hidden="true" tabindex="-1"></a><span class="co">#recipe_spec_gluon %&gt;% prep() %&gt;% juice()</span></span>
<span id="cb30-293"><a href="#cb30-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-294"><a href="#cb30-294" aria-hidden="true" tabindex="-1"></a>recipe_spec_gluon <span class="sc">%&gt;%</span> <span class="fu">prep</span>() <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span>
<span id="cb30-295"><a href="#cb30-295" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-296"><a href="#cb30-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-297"><a href="#cb30-297" aria-hidden="true" tabindex="-1"></a><span class="fu">### DeepAR</span></span>
<span id="cb30-298"><a href="#cb30-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-299"><a href="#cb30-299" aria-hidden="true" tabindex="-1"></a>DeepAR was also developed by Amazon (as part of Sagemaker) which is particularly suited to cross-sectional analysis (eg routes), in that the time series are trained jointly across all routes (in our case).</span>
<span id="cb30-300"><a href="#cb30-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-301"><a href="#cb30-301" aria-hidden="true" tabindex="-1"></a>A few different combinations of epoch numbers and batch sizes per epoch have been tried</span>
<span id="cb30-302"><a href="#cb30-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-303"><a href="#cb30-303" aria-hidden="true" tabindex="-1"></a><span class="fu">#### DeepAR Model 1 - epochs 5; batch size/ epoch:50</span></span>
<span id="cb30-304"><a href="#cb30-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-305"><a href="#cb30-305" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,deepar_1}</span></span>
<span id="cb30-306"><a href="#cb30-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-307"><a href="#cb30-307" aria-hidden="true" tabindex="-1"></a>model_spec_1_deepar <span class="ot">&lt;-</span> <span class="fu">deep_ar</span>(</span>
<span id="cb30-308"><a href="#cb30-308" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Required params</span></span>
<span id="cb30-309"><a href="#cb30-309" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                =</span> <span class="st">"route"</span>,</span>
<span id="cb30-310"><a href="#cb30-310" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq              =</span> <span class="st">"M"</span>,</span>
<span id="cb30-311"><a href="#cb30-311" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length =</span> FORECAST_HORIZON,</span>
<span id="cb30-312"><a href="#cb30-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-313"><a href="#cb30-313" aria-hidden="true" tabindex="-1"></a>  <span class="co">#trainer</span></span>
<span id="cb30-314"><a href="#cb30-314" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs            =</span> <span class="dv">5</span>,</span>
<span id="cb30-315"><a href="#cb30-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-316"><a href="#cb30-316" aria-hidden="true" tabindex="-1"></a>  <span class="co">#DeepAR specific</span></span>
<span id="cb30-317"><a href="#cb30-317" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_type         =</span><span class="st">"lstm"</span></span>
<span id="cb30-318"><a href="#cb30-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-319"><a href="#cb30-319" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-320"><a href="#cb30-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_deepar"</span>)</span>
<span id="cb30-321"><a href="#cb30-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-322"><a href="#cb30-322" aria-hidden="true" tabindex="-1"></a><span class="co">#wflow</span></span>
<span id="cb30-323"><a href="#cb30-323" aria-hidden="true" tabindex="-1"></a>wflw_fit_deepar_1 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-324"><a href="#cb30-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_1_deepar) <span class="sc">%&gt;%</span></span>
<span id="cb30-325"><a href="#cb30-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb30-326"><a href="#cb30-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb30-327"><a href="#cb30-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-328"><a href="#cb30-328" aria-hidden="true" tabindex="-1"></a>model_spec_1_deepar</span>
<span id="cb30-329"><a href="#cb30-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-330"><a href="#cb30-330" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-331"><a href="#cb30-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-332"><a href="#cb30-332" aria-hidden="true" tabindex="-1"></a><span class="fu">#### DeepAR Model 2 - epochs 10; batch size/ epoch: 35&nbsp;</span></span>
<span id="cb30-333"><a href="#cb30-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-334"><a href="#cb30-334" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,deepar_2}</span></span>
<span id="cb30-335"><a href="#cb30-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-336"><a href="#cb30-336" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 2: Increase Epochs, Adjust Num Batches per Epoch</span></span>
<span id="cb30-337"><a href="#cb30-337" aria-hidden="true" tabindex="-1"></a><span class="co">#model spec</span></span>
<span id="cb30-338"><a href="#cb30-338" aria-hidden="true" tabindex="-1"></a>model_spec_2_deepar <span class="ot">&lt;-</span> <span class="fu">deep_ar</span>(</span>
<span id="cb30-339"><a href="#cb30-339" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                    =</span> <span class="st">"route"</span>,</span>
<span id="cb30-340"><a href="#cb30-340" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq                  =</span> <span class="st">"M"</span>,</span>
<span id="cb30-341"><a href="#cb30-341" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length     =</span> FORECAST_HORIZON,</span>
<span id="cb30-342"><a href="#cb30-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-343"><a href="#cb30-343" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs                =</span> <span class="dv">10</span>,</span>
<span id="cb30-344"><a href="#cb30-344" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_batches_per_epoch =</span> <span class="dv">35</span>,</span>
<span id="cb30-345"><a href="#cb30-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-346"><a href="#cb30-346" aria-hidden="true" tabindex="-1"></a>  <span class="co">#DeepAR specific</span></span>
<span id="cb30-347"><a href="#cb30-347" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_type             =</span> <span class="st">"lstm"</span></span>
<span id="cb30-348"><a href="#cb30-348" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-349"><a href="#cb30-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_deepar"</span>)</span>
<span id="cb30-350"><a href="#cb30-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-351"><a href="#cb30-351" aria-hidden="true" tabindex="-1"></a><span class="co">#wflow</span></span>
<span id="cb30-352"><a href="#cb30-352" aria-hidden="true" tabindex="-1"></a>wflw_fit_deepar_2 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-353"><a href="#cb30-353" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_2_deepar) <span class="sc">%&gt;%</span></span>
<span id="cb30-354"><a href="#cb30-354" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb30-355"><a href="#cb30-355" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb30-356"><a href="#cb30-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-357"><a href="#cb30-357" aria-hidden="true" tabindex="-1"></a>model_spec_2_deepar</span>
<span id="cb30-358"><a href="#cb30-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-359"><a href="#cb30-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-360"><a href="#cb30-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-361"><a href="#cb30-361" aria-hidden="true" tabindex="-1"></a><span class="fu">#### DeepAR Model 3 - epochs 10; batch size/ epoch: 50&nbsp;</span></span>
<span id="cb30-362"><a href="#cb30-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-363"><a href="#cb30-363" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,deepar_3}</span></span>
<span id="cb30-364"><a href="#cb30-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-365"><a href="#cb30-365" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 3: Increase Epochs, Adjust Num Batches Per Epoch, &amp; Add Scaling</span></span>
<span id="cb30-366"><a href="#cb30-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-367"><a href="#cb30-367" aria-hidden="true" tabindex="-1"></a>model_spec_3_deepar <span class="ot">&lt;-</span> <span class="fu">deep_ar</span>(</span>
<span id="cb30-368"><a href="#cb30-368" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                    =</span> <span class="st">"route"</span>,</span>
<span id="cb30-369"><a href="#cb30-369" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq                  =</span> <span class="st">"M"</span>,</span>
<span id="cb30-370"><a href="#cb30-370" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length     =</span> FORECAST_HORIZON,</span>
<span id="cb30-371"><a href="#cb30-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-372"><a href="#cb30-372" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs                =</span> <span class="dv">10</span>,</span>
<span id="cb30-373"><a href="#cb30-373" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_batches_per_epoch =</span> <span class="dv">50</span>,</span>
<span id="cb30-374"><a href="#cb30-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-375"><a href="#cb30-375" aria-hidden="true" tabindex="-1"></a>  <span class="at">scale                 =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-376"><a href="#cb30-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-377"><a href="#cb30-377" aria-hidden="true" tabindex="-1"></a>  <span class="co">#DeepAR specific</span></span>
<span id="cb30-378"><a href="#cb30-378" aria-hidden="true" tabindex="-1"></a>  <span class="at">cell_type             =</span> <span class="st">"lstm"</span></span>
<span id="cb30-379"><a href="#cb30-379" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-380"><a href="#cb30-380" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_deepar"</span>)</span>
<span id="cb30-381"><a href="#cb30-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-382"><a href="#cb30-382" aria-hidden="true" tabindex="-1"></a><span class="co">#wflow</span></span>
<span id="cb30-383"><a href="#cb30-383" aria-hidden="true" tabindex="-1"></a>wflw_fit_deepar_3 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-384"><a href="#cb30-384" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_3_deepar) <span class="sc">%&gt;%</span></span>
<span id="cb30-385"><a href="#cb30-385" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb30-386"><a href="#cb30-386" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb30-387"><a href="#cb30-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-388"><a href="#cb30-388" aria-hidden="true" tabindex="-1"></a>model_spec_3_deepar</span>
<span id="cb30-389"><a href="#cb30-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-390"><a href="#cb30-390" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-391"><a href="#cb30-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-392"><a href="#cb30-392" aria-hidden="true" tabindex="-1"></a><span class="fu">### N-Beats (Neural Basis Expansion Analysis for Time Series)</span></span>
<span id="cb30-393"><a href="#cb30-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-394"><a href="#cb30-394" aria-hidden="true" tabindex="-1"></a>N-BEATS is <span class="co">[</span><span class="ot">a type of neural network that was first described in a 2019 article by Oreshkin et al</span><span class="co">](https://arxiv.org/abs/1905.10437)</span></span>
<span id="cb30-395"><a href="#cb30-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-396"><a href="#cb30-396" aria-hidden="true" tabindex="-1"></a>Modeltime.gluonts package allows for 2 types of implementations: Standard or Ensemble. The following models include a mix of both, also with varying hyper-parameters.</span>
<span id="cb30-397"><a href="#cb30-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-398"><a href="#cb30-398" aria-hidden="true" tabindex="-1"></a><span class="fu">#### N-Beats Model 4 - Default (epochs:5)</span></span>
<span id="cb30-399"><a href="#cb30-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-400"><a href="#cb30-400" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,nbeats_4}</span></span>
<span id="cb30-401"><a href="#cb30-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-402"><a href="#cb30-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-403"><a href="#cb30-403" aria-hidden="true" tabindex="-1"></a><span class="co"># * N-BEATS Estimator ----</span></span>
<span id="cb30-404"><a href="#cb30-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-405"><a href="#cb30-405" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 4: N-BEATS default</span></span>
<span id="cb30-406"><a href="#cb30-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-407"><a href="#cb30-407" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_4 <span class="ot">&lt;-</span> <span class="fu">nbeats</span>(</span>
<span id="cb30-408"><a href="#cb30-408" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                =</span> <span class="st">"route"</span>,</span>
<span id="cb30-409"><a href="#cb30-409" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq              =</span> <span class="st">"M"</span>,</span>
<span id="cb30-410"><a href="#cb30-410" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length =</span> FORECAST_HORIZON,</span>
<span id="cb30-411"><a href="#cb30-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-412"><a href="#cb30-412" aria-hidden="true" tabindex="-1"></a>  <span class="at">lookback_length   =</span> <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON</span>
<span id="cb30-413"><a href="#cb30-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-414"><a href="#cb30-414" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-415"><a href="#cb30-415" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_nbeats"</span>)</span>
<span id="cb30-416"><a href="#cb30-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-417"><a href="#cb30-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-418"><a href="#cb30-418" aria-hidden="true" tabindex="-1"></a>wflw_fit_nbeats_4 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-419"><a href="#cb30-419" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_nbeats_4) <span class="sc">%&gt;%</span></span>
<span id="cb30-420"><a href="#cb30-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb30-421"><a href="#cb30-421" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb30-422"><a href="#cb30-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-423"><a href="#cb30-423" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_4</span>
<span id="cb30-424"><a href="#cb30-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-425"><a href="#cb30-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-426"><a href="#cb30-426" aria-hidden="true" tabindex="-1"></a><span class="fu">#### N-Beats Model 5 - Default (epochs:5;loss fn:MASE)</span></span>
<span id="cb30-427"><a href="#cb30-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-428"><a href="#cb30-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, nbeats_5}</span></span>
<span id="cb30-429"><a href="#cb30-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-430"><a href="#cb30-430" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 5: N-BEATS, loss function:MASE, Reduce Epochs 2</span></span>
<span id="cb30-431"><a href="#cb30-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-432"><a href="#cb30-432" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_5 <span class="ot">&lt;-</span> <span class="fu">nbeats</span>(</span>
<span id="cb30-433"><a href="#cb30-433" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                =</span> <span class="st">"route"</span>,</span>
<span id="cb30-434"><a href="#cb30-434" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq              =</span> <span class="st">"M"</span>,</span>
<span id="cb30-435"><a href="#cb30-435" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length =</span> FORECAST_HORIZON,</span>
<span id="cb30-436"><a href="#cb30-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-437"><a href="#cb30-437" aria-hidden="true" tabindex="-1"></a>  <span class="at">lookback_length   =</span> <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON,</span>
<span id="cb30-438"><a href="#cb30-438" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs            =</span> <span class="dv">5</span>,</span>
<span id="cb30-439"><a href="#cb30-439" aria-hidden="true" tabindex="-1"></a>  <span class="at">loss_function     =</span> <span class="st">"MASE"</span></span>
<span id="cb30-440"><a href="#cb30-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-441"><a href="#cb30-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-442"><a href="#cb30-442" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-443"><a href="#cb30-443" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_nbeats"</span>)</span>
<span id="cb30-444"><a href="#cb30-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-445"><a href="#cb30-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-446"><a href="#cb30-446" aria-hidden="true" tabindex="-1"></a>wflw_fit_nbeats_5 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-447"><a href="#cb30-447" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_nbeats_5) <span class="sc">%&gt;%</span></span>
<span id="cb30-448"><a href="#cb30-448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb30-449"><a href="#cb30-449" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb30-450"><a href="#cb30-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-451"><a href="#cb30-451" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_5</span>
<span id="cb30-452"><a href="#cb30-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-453"><a href="#cb30-453" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-454"><a href="#cb30-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-455"><a href="#cb30-455" aria-hidden="true" tabindex="-1"></a><span class="fu">#### N-Beats Model 6 - Default (ensemble; epochs:5; loss fn:MASE)</span></span>
<span id="cb30-456"><a href="#cb30-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-457"><a href="#cb30-457" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, nbeats_6}</span></span>
<span id="cb30-458"><a href="#cb30-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-459"><a href="#cb30-459" aria-hidden="true" tabindex="-1"></a><span class="co"># Model 6: N-BEATS, Model 5 ensemble</span></span>
<span id="cb30-460"><a href="#cb30-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-461"><a href="#cb30-461" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_6 <span class="ot">&lt;-</span> <span class="fu">nbeats</span>(</span>
<span id="cb30-462"><a href="#cb30-462" aria-hidden="true" tabindex="-1"></a>  <span class="at">id                    =</span> <span class="st">"route"</span>,</span>
<span id="cb30-463"><a href="#cb30-463" aria-hidden="true" tabindex="-1"></a>  <span class="at">freq                  =</span> <span class="st">"M"</span>,</span>
<span id="cb30-464"><a href="#cb30-464" aria-hidden="true" tabindex="-1"></a>  <span class="at">prediction_length     =</span> FORECAST_HORIZON,</span>
<span id="cb30-465"><a href="#cb30-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-466"><a href="#cb30-466" aria-hidden="true" tabindex="-1"></a>  <span class="at">lookback_length       =</span> <span class="fu">c</span>(FORECAST_HORIZON, <span class="dv">2</span> <span class="sc">*</span> FORECAST_HORIZON),</span>
<span id="cb30-467"><a href="#cb30-467" aria-hidden="true" tabindex="-1"></a>  <span class="at">epochs                =</span> <span class="dv">5</span>,</span>
<span id="cb30-468"><a href="#cb30-468" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_batches_per_epoch =</span> <span class="dv">35</span>,</span>
<span id="cb30-469"><a href="#cb30-469" aria-hidden="true" tabindex="-1"></a>  <span class="at">loss_function         =</span> <span class="st">"MASE"</span>,</span>
<span id="cb30-470"><a href="#cb30-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-471"><a href="#cb30-471" aria-hidden="true" tabindex="-1"></a>  <span class="at">bagging_size          =</span> <span class="dv">2</span></span>
<span id="cb30-472"><a href="#cb30-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-473"><a href="#cb30-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-474"><a href="#cb30-474" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb30-475"><a href="#cb30-475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"gluonts_nbeats_ensemble"</span>)</span>
<span id="cb30-476"><a href="#cb30-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-477"><a href="#cb30-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-478"><a href="#cb30-478" aria-hidden="true" tabindex="-1"></a>wflw_fit_nbeats_6 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-479"><a href="#cb30-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(model_spec_nbeats_6) <span class="sc">%&gt;%</span></span>
<span id="cb30-480"><a href="#cb30-480" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_spec_gluon) <span class="sc">%&gt;%</span></span>
<span id="cb30-481"><a href="#cb30-481" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="fu">training</span>(splits))</span>
<span id="cb30-482"><a href="#cb30-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-483"><a href="#cb30-483" aria-hidden="true" tabindex="-1"></a>model_spec_nbeats_6</span>
<span id="cb30-484"><a href="#cb30-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-485"><a href="#cb30-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-486"><a href="#cb30-486" aria-hidden="true" tabindex="-1"></a><span class="fu">## Modeltime Comparison</span></span>
<span id="cb30-487"><a href="#cb30-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-488"><a href="#cb30-488" aria-hidden="true" tabindex="-1"></a>The following code puts all models in the one table, renames them and produces an accuracy report, sorted by 'MAAPE', best at top. Unfortunately it does not want to render in quarto.</span>
<span id="cb30-489"><a href="#cb30-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-490"><a href="#cb30-490" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,accuracy}</span></span>
<span id="cb30-491"><a href="#cb30-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-492"><a href="#cb30-492" aria-hidden="true" tabindex="-1"></a><span class="co">#modeltime_calibrate()</span></span>
<span id="cb30-493"><a href="#cb30-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-494"><a href="#cb30-494" aria-hidden="true" tabindex="-1"></a><span class="co"># Modeltime Comparison ----</span></span>
<span id="cb30-495"><a href="#cb30-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-496"><a href="#cb30-496" aria-hidden="true" tabindex="-1"></a>model_tbl_submodels <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb30-497"><a href="#cb30-497" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_1,</span>
<span id="cb30-498"><a href="#cb30-498" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_2,</span>
<span id="cb30-499"><a href="#cb30-499" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_3,</span>
<span id="cb30-500"><a href="#cb30-500" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb30-501"><a href="#cb30-501" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_4,</span>
<span id="cb30-502"><a href="#cb30-502" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_5,</span>
<span id="cb30-503"><a href="#cb30-503" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_6</span>
<span id="cb30-504"><a href="#cb30-504" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-505"><a href="#cb30-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-506"><a href="#cb30-506" aria-hidden="true" tabindex="-1"></a>model_tbl_submodels <span class="ot">&lt;-</span> model_tbl_submodels <span class="sc">%&gt;%</span> </span>
<span id="cb30-507"><a href="#cb30-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">1</span>,<span class="st">"DEEPAR - unscaled, 5ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-508"><a href="#cb30-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">2</span>,<span class="st">"DEEPAR - unscaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-509"><a href="#cb30-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">3</span>,<span class="st">"DEEPAR - scaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-510"><a href="#cb30-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">4</span>,<span class="st">"N-BEATS - 5ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-511"><a href="#cb30-511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">5</span>,<span class="st">"N-BEATS - 5ep,MASE"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-512"><a href="#cb30-512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">6</span>,<span class="st">"N-BEATS - ens, 5ep,MASE"</span>) </span>
<span id="cb30-513"><a href="#cb30-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-514"><a href="#cb30-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-515"><a href="#cb30-515" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_submodels_calibrate &lt;- model_tbl_submodels %&gt;% </span></span>
<span id="cb30-516"><a href="#cb30-516" aria-hidden="true" tabindex="-1"></a><span class="co">#   modeltime_calibrate(new_data = testing(splits))</span></span>
<span id="cb30-517"><a href="#cb30-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-518"><a href="#cb30-518" aria-hidden="true" tabindex="-1"></a><span class="co"># # Forecast Accuracy</span></span>
<span id="cb30-519"><a href="#cb30-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-520"><a href="#cb30-520" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_submodels_calibrate %&gt;%</span></span>
<span id="cb30-521"><a href="#cb30-521" aria-hidden="true" tabindex="-1"></a><span class="co">#   modeltime_accuracy(</span></span>
<span id="cb30-522"><a href="#cb30-522" aria-hidden="true" tabindex="-1"></a><span class="co">#     #testing(splits),</span></span>
<span id="cb30-523"><a href="#cb30-523" aria-hidden="true" tabindex="-1"></a><span class="co">#     metric_set = extended_forecast_accuracy_metric_set()) %&gt;% </span></span>
<span id="cb30-524"><a href="#cb30-524" aria-hidden="true" tabindex="-1"></a><span class="co">#   arrange(maape) %&gt;% </span></span>
<span id="cb30-525"><a href="#cb30-525" aria-hidden="true" tabindex="-1"></a><span class="co">#    gt::gt() %&gt;% </span></span>
<span id="cb30-526"><a href="#cb30-526" aria-hidden="true" tabindex="-1"></a><span class="co">#     gt::fmt_number(</span></span>
<span id="cb30-527"><a href="#cb30-527" aria-hidden="true" tabindex="-1"></a><span class="co">#      columns = 4:10,</span></span>
<span id="cb30-528"><a href="#cb30-528" aria-hidden="true" tabindex="-1"></a><span class="co">#       decimals = 3)</span></span>
<span id="cb30-529"><a href="#cb30-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-530"><a href="#cb30-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-531"><a href="#cb30-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-532"><a href="#cb30-532" aria-hidden="true" tabindex="-1"></a><span class="fu">## Refit Models</span></span>
<span id="cb30-533"><a href="#cb30-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-534"><a href="#cb30-534" aria-hidden="true" tabindex="-1"></a>Models are then refit to full train/test data.</span>
<span id="cb30-535"><a href="#cb30-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-536"><a href="#cb30-536" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, refit}</span></span>
<span id="cb30-537"><a href="#cb30-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-538"><a href="#cb30-538" aria-hidden="true" tabindex="-1"></a>submodels_refitted_tbl <span class="ot">&lt;-</span> model_tbl_submodels <span class="sc">%&gt;%</span> </span>
<span id="cb30-539"><a href="#cb30-539" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_refit</span>(data_prepared_tbl)</span>
<span id="cb30-540"><a href="#cb30-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-541"><a href="#cb30-541" aria-hidden="true" tabindex="-1"></a>submodels_refitted_tbl</span>
<span id="cb30-542"><a href="#cb30-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-543"><a href="#cb30-543" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-544"><a href="#cb30-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-545"><a href="#cb30-545" aria-hidden="true" tabindex="-1"></a><span class="fu">## Make Predictions</span></span>
<span id="cb30-546"><a href="#cb30-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-547"><a href="#cb30-547" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, prediction_all}</span></span>
<span id="cb30-548"><a href="#cb30-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-549"><a href="#cb30-549" aria-hidden="true" tabindex="-1"></a>submodels_pred_ <span class="ot">&lt;-</span> submodels_refitted_tbl <span class="sc">%&gt;%</span> </span>
<span id="cb30-550"><a href="#cb30-550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb30-551"><a href="#cb30-551" aria-hidden="true" tabindex="-1"></a>  <span class="at">new_data =</span> future_tbl,</span>
<span id="cb30-552"><a href="#cb30-552" aria-hidden="true" tabindex="-1"></a>  <span class="at">actual_data =</span> data_prepared_tbl,</span>
<span id="cb30-553"><a href="#cb30-553" aria-hidden="true" tabindex="-1"></a>  <span class="at">keep_data =</span> <span class="cn">TRUE</span></span>
<span id="cb30-554"><a href="#cb30-554" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-555"><a href="#cb30-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-556"><a href="#cb30-556" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(submodels_pred_)</span>
<span id="cb30-557"><a href="#cb30-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-558"><a href="#cb30-558" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-559"><a href="#cb30-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-560"><a href="#cb30-560" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, calibrate}</span></span>
<span id="cb30-561"><a href="#cb30-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-562"><a href="#cb30-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-563"><a href="#cb30-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-564"><a href="#cb30-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-565"><a href="#cb30-565" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-566"><a href="#cb30-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-567"><a href="#cb30-567" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, pred_graph,fig.width=10,fig.height=15}</span></span>
<span id="cb30-568"><a href="#cb30-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-569"><a href="#cb30-569" aria-hidden="true" tabindex="-1"></a>submodels_pred_ <span class="sc">%&gt;%</span></span>
<span id="cb30-570"><a href="#cb30-570" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx) <span class="sc">%&gt;%</span> </span>
<span id="cb30-571"><a href="#cb30-571" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb30-572"><a href="#cb30-572" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value,<span class="at">colour =</span> .model_desc))<span class="sc">+</span></span>
<span id="cb30-573"><a href="#cb30-573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb30-574"><a href="#cb30-574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb30-575"><a href="#cb30-575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"pax pm(000)"</span>) <span class="sc">+</span></span>
<span id="cb30-576"><a href="#cb30-576" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> route,  <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb30-577"><a href="#cb30-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb30-578"><a href="#cb30-578" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">5</span>))</span>
<span id="cb30-579"><a href="#cb30-579" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-580"><a href="#cb30-580" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-581"><a href="#cb30-581" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plot_modeltime_forecast(</span></span>
<span id="cb30-582"><a href="#cb30-582" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   .trelliscope = F,</span></span>
<span id="cb30-583"><a href="#cb30-583" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   .facet_ncol = 2,</span></span>
<span id="cb30-584"><a href="#cb30-584" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   .title = "Predictions - Top10 Routes"</span></span>
<span id="cb30-585"><a href="#cb30-585" aria-hidden="true" tabindex="-1"></a>  <span class="co"># )</span></span>
<span id="cb30-586"><a href="#cb30-586" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-587"><a href="#cb30-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-588"><a href="#cb30-588" aria-hidden="true" tabindex="-1"></a>The accuracy stats and graph suggest that some of these are not so good. ..</span>
<span id="cb30-589"><a href="#cb30-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-590"><a href="#cb30-590" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ensemble Model</span></span>
<span id="cb30-591"><a href="#cb30-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-592"><a href="#cb30-592" aria-hidden="true" tabindex="-1"></a>Ensemble the top deep learning models:</span>
<span id="cb30-593"><a href="#cb30-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-594"><a href="#cb30-594" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Model 6 - N-Beats ensuite</span>
<span id="cb30-595"><a href="#cb30-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-596"><a href="#cb30-596" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Model 3 - DeepAR scaled, 10 epochs</span>
<span id="cb30-597"><a href="#cb30-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-598"><a href="#cb30-598" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Model 2 - DeepAR unscaled 10 epochs</span>
<span id="cb30-599"><a href="#cb30-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-600"><a href="#cb30-600" aria-hidden="true" tabindex="-1"></a>There is no reason not to also include some ML models in the ensemble - we will do that in a separate post.</span>
<span id="cb30-601"><a href="#cb30-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-602"><a href="#cb30-602" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, ensemble}</span></span>
<span id="cb30-603"><a href="#cb30-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-604"><a href="#cb30-604" aria-hidden="true" tabindex="-1"></a><span class="co"># Modeltime Comparison ----</span></span>
<span id="cb30-605"><a href="#cb30-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-606"><a href="#cb30-606" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble <span class="ot">&lt;-</span> <span class="fu">modeltime_table</span>(</span>
<span id="cb30-607"><a href="#cb30-607" aria-hidden="true" tabindex="-1"></a>  <span class="co">#wflw_fit_deepar_1,</span></span>
<span id="cb30-608"><a href="#cb30-608" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_2,</span>
<span id="cb30-609"><a href="#cb30-609" aria-hidden="true" tabindex="-1"></a>  wflw_fit_deepar_3,</span>
<span id="cb30-610"><a href="#cb30-610" aria-hidden="true" tabindex="-1"></a>  <span class="co">#</span></span>
<span id="cb30-611"><a href="#cb30-611" aria-hidden="true" tabindex="-1"></a>  <span class="co">#wflw_fit_nbeats_4,</span></span>
<span id="cb30-612"><a href="#cb30-612" aria-hidden="true" tabindex="-1"></a>  <span class="co">#wflw_fit_nbeats_5,</span></span>
<span id="cb30-613"><a href="#cb30-613" aria-hidden="true" tabindex="-1"></a>  wflw_fit_nbeats_6</span>
<span id="cb30-614"><a href="#cb30-614" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-615"><a href="#cb30-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-616"><a href="#cb30-616" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble <span class="ot">&lt;-</span> model_tbl_ensemble <span class="sc">%&gt;%</span> </span>
<span id="cb30-617"><a href="#cb30-617" aria-hidden="true" tabindex="-1"></a>  <span class="co">#update_model_description(1,"DEEPAR - unscaled, 5ep") %&gt;% </span></span>
<span id="cb30-618"><a href="#cb30-618" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">1</span>,<span class="st">"DEEPAR - unscaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-619"><a href="#cb30-619" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">2</span>,<span class="st">"DEEPAR - scaled, 10ep"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-620"><a href="#cb30-620" aria-hidden="true" tabindex="-1"></a>  <span class="co">#update_model_description(4,"N-BEATS - 5ep") %&gt;% </span></span>
<span id="cb30-621"><a href="#cb30-621" aria-hidden="true" tabindex="-1"></a>  <span class="co">#update_model_description(5,"N-BEATS - 5ep,MASE") %&gt;% </span></span>
<span id="cb30-622"><a href="#cb30-622" aria-hidden="true" tabindex="-1"></a>  <span class="fu">update_model_description</span>(<span class="dv">3</span>,<span class="st">"N-BEATS - ens, 5ep,MASE"</span>) </span>
<span id="cb30-623"><a href="#cb30-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-624"><a href="#cb30-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-625"><a href="#cb30-625" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_wtd <span class="ot">&lt;-</span> model_tbl_ensemble <span class="sc">%&gt;%</span> </span>
<span id="cb30-626"><a href="#cb30-626" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ensemble_weighted</span>(<span class="at">loadings =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-627"><a href="#cb30-627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_table</span>()</span>
<span id="cb30-628"><a href="#cb30-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-629"><a href="#cb30-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-630"><a href="#cb30-630" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_ensemble_calibrate &lt;- model_tbl_ensemble %&gt;% </span></span>
<span id="cb30-631"><a href="#cb30-631" aria-hidden="true" tabindex="-1"></a><span class="co">#   modeltime_calibrate(new_data = testing(splits))</span></span>
<span id="cb30-632"><a href="#cb30-632" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb30-633"><a href="#cb30-633" aria-hidden="true" tabindex="-1"></a><span class="co"># model_tbl_ensemble_calibrate %&gt;% </span></span>
<span id="cb30-634"><a href="#cb30-634" aria-hidden="true" tabindex="-1"></a><span class="co">#     modeltime_accuracy(</span></span>
<span id="cb30-635"><a href="#cb30-635" aria-hidden="true" tabindex="-1"></a><span class="co">#       #testing(splits),</span></span>
<span id="cb30-636"><a href="#cb30-636" aria-hidden="true" tabindex="-1"></a><span class="co">#       metric_set = extended_forecast_accuracy_metric_set()</span></span>
<span id="cb30-637"><a href="#cb30-637" aria-hidden="true" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb30-638"><a href="#cb30-638" aria-hidden="true" tabindex="-1"></a><span class="co">#     arrange(rmse) %&gt;%</span></span>
<span id="cb30-639"><a href="#cb30-639" aria-hidden="true" tabindex="-1"></a><span class="co">#    gt::gt() %&gt;% </span></span>
<span id="cb30-640"><a href="#cb30-640" aria-hidden="true" tabindex="-1"></a><span class="co">#     gt::fmt_number(</span></span>
<span id="cb30-641"><a href="#cb30-641" aria-hidden="true" tabindex="-1"></a><span class="co">#      columns = 4:10,</span></span>
<span id="cb30-642"><a href="#cb30-642" aria-hidden="true" tabindex="-1"></a><span class="co">#       decimals = 3)</span></span>
<span id="cb30-643"><a href="#cb30-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-644"><a href="#cb30-644" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb30-645"><a href="#cb30-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-646"><a href="#cb30-646" aria-hidden="true" tabindex="-1"></a><span class="fu">## Refit Ensemble to Full Train/Test Data Set and Graph</span></span>
<span id="cb30-647"><a href="#cb30-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-648"><a href="#cb30-648" aria-hidden="true" tabindex="-1"></a><span class="in">```{r,refit_ensemble,fig.width=10,fig.height=15}</span></span>
<span id="cb30-649"><a href="#cb30-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-650"><a href="#cb30-650" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_refit <span class="ot">&lt;-</span> model_tbl_ensemble_wtd <span class="sc">%&gt;%</span> </span>
<span id="cb30-651"><a href="#cb30-651" aria-hidden="true" tabindex="-1"></a>    <span class="fu">modeltime_refit</span>(data_prepared_tbl)</span>
<span id="cb30-652"><a href="#cb30-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-653"><a href="#cb30-653" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_pred <span class="ot">&lt;-</span> model_tbl_ensemble_refit <span class="sc">%&gt;%</span> </span>
<span id="cb30-654"><a href="#cb30-654" aria-hidden="true" tabindex="-1"></a>  <span class="fu">modeltime_forecast</span>(</span>
<span id="cb30-655"><a href="#cb30-655" aria-hidden="true" tabindex="-1"></a>    <span class="at">new_data =</span> future_tbl,</span>
<span id="cb30-656"><a href="#cb30-656" aria-hidden="true" tabindex="-1"></a>    <span class="at">actual_data =</span> data_prepared_tbl,</span>
<span id="cb30-657"><a href="#cb30-657" aria-hidden="true" tabindex="-1"></a>    <span class="at">keep_data =</span> <span class="cn">TRUE</span></span>
<span id="cb30-658"><a href="#cb30-658" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-659"><a href="#cb30-659" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">.value1 =</span> <span class="fu">expm1</span>(.value))</span>
<span id="cb30-660"><a href="#cb30-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-661"><a href="#cb30-661" aria-hidden="true" tabindex="-1"></a>model_tbl_ensemble_pred <span class="sc">%&gt;%</span></span>
<span id="cb30-662"><a href="#cb30-662" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(route <span class="sc">%in%</span> topx,</span>
<span id="cb30-663"><a href="#cb30-663" aria-hidden="true" tabindex="-1"></a>         .index<span class="sc">&gt;</span>lubridate<span class="sc">::</span><span class="fu">ymd</span>(<span class="st">"2015-01,01"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-664"><a href="#cb30-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(route) <span class="sc">%&gt;%</span></span>
<span id="cb30-665"><a href="#cb30-665" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .index, <span class="at">y =</span> .value1<span class="sc">/</span><span class="dv">1000</span>,<span class="at">colour =</span> .model_desc))<span class="sc">+</span></span>
<span id="cb30-666"><a href="#cb30-666" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb30-667"><a href="#cb30-667" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb30-668"><a href="#cb30-668" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"pax pm(000)"</span>) <span class="sc">+</span></span>
<span id="cb30-669"><a href="#cb30-669" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> route,  <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb30-670"><a href="#cb30-670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb30-671"><a href="#cb30-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">5</span>))</span>
<span id="cb30-672"><a href="#cb30-672" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-673"><a href="#cb30-673" aria-hidden="true" tabindex="-1"></a>    <span class="co"># group_by(route) %&gt;% </span></span>
<span id="cb30-674"><a href="#cb30-674" aria-hidden="true" tabindex="-1"></a>    <span class="co"># plot_modeltime_forecast(</span></span>
<span id="cb30-675"><a href="#cb30-675" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     .facet_ncol = 4</span></span>
<span id="cb30-676"><a href="#cb30-676" aria-hidden="true" tabindex="-1"></a>    <span class="co"># )</span></span>
<span id="cb30-677"><a href="#cb30-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-678"><a href="#cb30-678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>